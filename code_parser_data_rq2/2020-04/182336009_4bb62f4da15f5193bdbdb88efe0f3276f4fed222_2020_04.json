{
    "identifiers": [
        "Component",
        "OnInit",
        "Inject",
        "Konva",
        "MatDialogRef",
        "MAT_DIALOG_DATA",
        "DeleteVariationModalComponent",
        "da",
        "Component",
        "Konva",
        "Konva",
        "Konva",
        "Konva",
        "dialogRef",
        "Inject",
        "MAT_DIALOG_DATA",
        "data",
        "data",
        "Konva",
        "width",
        "height",
        "Image",
        "imageObj",
        "imageObj",
        "imageObj",
        "imageObj",
        "Konva",
        "Konva",
        "imageObj",
        "background",
        "background",
        "background",
        "Konva",
        "rectangle",
        "rectangle",
        "rectangle",
        "Konva",
        "e",
        "e",
        "component",
        "tr",
        "tr",
        "e",
        "component",
        "tr",
        "component",
        "tr",
        "component"
    ],
    "literals": [
        "'@angular/core'",
        "'konva'",
        "'@angular/material'",
        "'../delete-variation/delete-variation.component'",
        "'date-fns/locale'",
        "'visual-knight-draw-area'",
        "'./draw-area.html'",
        "'./draw-area.scss'",
        "string",
        "'container'",
        "'mouseover'",
        "'pointer'",
        "'mouseout'",
        "'default'",
        "'gray'",
        "'black'",
        "'all'",
        "'click'",
        "'Rect'"
    ],
    "variables": [
        "width",
        "height",
        "imageObj",
        "background",
        "rectangle",
        "component",
        "tr"
    ],
    "comments": [
        "selectedButton: any = {",
        "rectangle: false,",
        "undo: false,",
        "erase: false",
        "};",
        "erase = false;",
        "add background",
        "add cursor styling",
        "clearSelection() {",
        "Object.keys(this.selectedButton).forEach(key => {",
        "this.selectedButton[key] = false;",
        "});",
        "}",
        "setSelection(type: string) {",
        "this.selectedButton[type] = true;",
        "}",
        "addShape(type: string) {",
        "this.clearSelection();",
        "this.setSelection(type);",
        "if (type === 'rectangle') {",
        "this.addRectangle();",
        "}",
        "}",
        "undo() {",
        "const removedShape = this.shapes.pop();",
        "this.transformers.forEach(t => {",
        "t.detach();",
        "});",
        "if (removedShape) {",
        "removedShape.remove();",
        "}",
        "this.layer.draw();",
        "}",
        "const component = this;",
        "const tr = new Konva.Transformer();",
        "this.stage.on('click', function(e) {",
        "// if click on empty area - remove all transformers",
        "if (e.target === component.stage) {",
        "component.stage.find('Transformer').destroy();",
        "component.layer.draw();",
        "return;",
        "}",
        "// do nothing if clicked NOT on our rectangles",
        "if (!e.target.hasName('rect')) {",
        "return;",
        "}",
        "component.layer.add(tr);",
        "tr.attachTo(e.target);",
        "component.layer.draw();",
        "});",
        "addDeleteListener(shape) {",
        "const component = this;",
        "window.addEventListener('keydown', function(e) {",
        "if (e.keyCode === 46) {",
        "shape.remove();",
        "component.transformers.forEach(t => {",
        "t.detach();",
        "});",
        "e.preventDefault();",
        "}",
        "component.layer.batchDraw();",
        "});",
        "}"
    ],
    "docstrings": [],
    "functions": [
        "ngOnInit",
        "addBackground",
        "addRectangle",
        "addTransformerListeners"
    ],
    "classes": [
        "DrawAreaComponent"
    ]
}