{
    "identifiers": [],
    "literals": [],
    "variables": [],
    "comments": [
        "#pragma strict\nvar gameName : String = \"MIG35GameType\";\nvar mainCamera : GameObject;\n\nprivate var refresh : boolean;\nprivate var hostData : HostData[]; //紀錄hostlist\nprivate var connected : boolean = false;\n\nprivate var roomButPos : Vector2 = Vector2(Screen.width * 0.7,Screen.height * 0.07);//activebut\nprivate var connectPos : Vector2 = Vector2(Screen.width * 0.5,Screen.height * 0.07);//activebut\n\nprivate var boxPos : Vector2 = Vector2(Screen.width * 0.7,Screen.height * 0.12);//按鈕box\nprivate var boxPos2 : Vector2 = Vector2(Screen.width * 0.5,Screen.height * 0.10);//按鈕box2\n\nprivate var activeButSize : Vector2 = Vector2(Screen.width/8.5, Screen.height/17);//玩家按鈕的大小\nprivate var gate : int = 5;\n\nfunction Awake (){\n    \n    if(Screen.width < 1250){\n    \tactiveButSize.x = 105;//防止按鈕過小\n    }\n    \n}\n\n//Gui\nfunction OnGUI (){\n    var scriptA : O14_Music_Controller = GameObject.Find(\"Music Controller\").GetComponent(\"O14_Music_Controller\") as O14_Music_Controller;    \n    \n    if(!Network.isClient && !Network.isServer && connected == false){\n\t    GUI.Box (Rect(boxPos.x - (activeButSize.x + gate*2)/2,boxPos.y ,activeButSize.x + gate*2,((activeButSize.x + gate*2) * 0.20 )+ (gate * 3) + (activeButSize.y * 2)), \"可加入的遊戲\");\n\t    \n\t    if (GUI.Button (Rect (roomButPos.x - (activeButSize.x/2),boxPos.y + (gate * 1) + ((activeButSize.x + gate*2) * 0.20 ) + (activeButSize.y * 0),activeButSize.x,activeButSize.y), \"建立遊戲\")) {\n\t\t    scriptA.playGUI(0);//cor\n\t\t    startServer();//生成Server\n\t\t}\n\t\tif (GUI.Button (Rect (roomButPos.x - (activeButSize.x/2),boxPos.y + (gate * 2) + ((activeButSize.x + gate * 2) * 0.20 ) + (activeButSize.y * 1),activeButSize.x,activeButSize.y), \"尋找遊戲\")) {\n\t\t    refreshHostList();//重新取得清單\n\t\t    scriptA.playGUI(0);//cor\n\t\t}\n\t\tif(hostData){\n\t\t\tGUI.Box (Rect(boxPos2.x - (activeButSize.x + gate*2)/2,boxPos2.y ,activeButSize.x + gate*2,((activeButSize.x + gate * 2) * 0.20 )+ (gate * (hostData.length + 1)) + (activeButSize.y * (hostData.length))), \"可加入的遊戲\");\n\t\t\t\n\t\t\t\n\t\t\tfor(var i:int = 0;i < hostData.length;i++){\n\t\t\t    if (GUI.Button (Rect (connectPos.x - (activeButSize.x/2),boxPos2.y + (gate * (i + 1)) + ((activeButSize.x + gate * 2) * 0.20 ) + (activeButSize.y * i),activeButSize.x ,activeButSize.y), hostData[i].gameName)) {\n\t\t\t\t    Network.Connect(hostData[i]);\n\t\t\t\t    //Debug.Log(hostData[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n//Server\nfunction startServer(){\n\tvar scriptA : O05_Data = GameObject.Find(\"Data\").GetComponent(\"O05_Data\") as O05_Data;\n\tNetwork.InitializeServer(32, 25001, !Network.HavePublicAddress);\n\tMasterServer.RegisterHost(gameName, scriptA.get_User() + \"'s game\", \"We need more gold!\");\n\tvar scriptB : A05_Menu_Logic = mainCamera.GetComponent(\"A05_Menu_Logic\") as A05_Menu_Logic;  \n\tscriptB.set_Text(\"遊戲已建立，請等待玩家加入...\");  \n}\n\nfunction refreshHostList(){//請求List\n\tMasterServer.RequestHostList(gameName);\n\trefresh = true ;\n\t/*yield WaitForSeconds(5);//等待1.5秒\n}\n\nfunction Update() {\n    if(refresh){\n        if(MasterServer.PollHostList().Length > 0){\n            refresh = false;\n            hostData = MasterServer.PollHostList();//紀錄hostlist\n        }\n    }\n}\n\nfunction OnConnectedToServer(){\n    Debug.Log(\"Server connected!\");\n    var scriptA : A03_SinglePlayer = mainCamera.GetComponent(\"A03_SinglePlayer\") as A03_SinglePlayer;\n    var scriptB : A06_RPC_Controller = GameObject.Find(\"World Controller\").GetComponent(\"A06_RPC_Controller\") as A06_RPC_Controller;\n\n\tscriptB.send_Name();//傳送姓名S\n\tscriptB.send_Data();//傳送姓名S\n\t\n    connected = true;\n    /*    \n    scriptA.set_Player(1);//後攻設定L\n    scriptB.send_Name();//傳送姓名S\n    connected = true;\n    \n}\n\nfunction OnPlayerConnected(){\n    var scriptA : A03_SinglePlayer = mainCamera.GetComponent(\"A03_SinglePlayer\") as A03_SinglePlayer;\n    var scriptB : A06_RPC_Controller = GameObject.Find(\"World Controller\").GetComponent(\"A06_RPC_Controller\") as A06_RPC_Controller;        \n    var order :int = Random.Range(0,2);\n    \n    scriptA.set_Player(order);//先攻設定L\n    scriptB.send_Order(1 - order);//傳送姓名C\n    \n    \n    \n    scriptB.send_Name();//傳送姓名C\n    connected = true;\n    \n    scriptA.board_Initialization();//初始化棋盤\n    /*\n    scriptA.set_Player(0);//先攻設定L\n    scriptB.send_Name();//傳送姓名C\n    connected = true;\n    \n}\n\n//Debug.Log\n\nfunction OnServerInitialized(){//Server生成\n    Debug.Log(\"Server initialize!\");\n}\n\nfunction OnMasterServerEvent(msE: MasterServerEvent) {//server事件\n\tif (msE == MasterServerEvent.RegistrationSucceeded) {\n\t\tDebug.Log(\"Server registered\");\n\t}\n}\n\n//斷線設定\n\nfunction OnFailedToConnect(){\n    var scriptA : A05_Menu_Logic = mainCamera.GetComponent(\"A05_Menu_Logic\") as A05_Menu_Logic;  \n\tscriptA.set_Text(\"另一位玩者逃離了遊戲...\"); \n\tscriptA.set_Win();\n}\n\nfunction OnPlayerDisconnected(){\n    var scriptA : A05_Menu_Logic = mainCamera.GetComponent(\"A05_Menu_Logic\") as A05_Menu_Logic;  \n\tscriptA.set_Text(\"另一位玩者逃離了遊戲...\"); \n\tscriptA.set_Win();\n}"
    ],
    "docstrings": [],
    "functions": [],
    "classes": []
}