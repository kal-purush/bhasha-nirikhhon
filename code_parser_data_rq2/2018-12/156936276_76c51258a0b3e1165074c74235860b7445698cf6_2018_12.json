{
    "identifiers": [
        "tkinter",
        "PIL",
        "Image",
        "os",
        "glob",
        "cv2",
        "numpy",
        "np",
        "vdtools",
        "main",
        "Canvas",
        "main",
        "width",
        "_canvas_width",
        "height",
        "_canvas_height",
        "canvas",
        "grid",
        "row",
        "column",
        "columnspan",
        "rowspan",
        "i",
        "parentdir",
        "inputdir",
        "imgname_prefix",
        "i",
        "os",
        "path",
        "exists",
        "filepath",
        "file_list",
        "append",
        "i",
        "filepath",
        "PhotoImage",
        "file",
        "file_list",
        "canvas",
        "create_image",
        "anchor",
        "NW",
        "image",
        "nowimage",
        "cv2",
        "imread",
        "file_list",
        "canvas",
        "bind",
        "right_key_pressed",
        "canvas",
        "bind",
        "left_key_pressed",
        "canvas",
        "bind",
        "space_key_pressed",
        "canvas",
        "bind",
        "mouse_lclick_moving",
        "canvas",
        "bind",
        "mouse_lbuton_pressed",
        "canvas",
        "bind",
        "mouse_lbutton_released",
        "root",
        "bind",
        "mouse_wheel_moving",
        "root",
        "bind",
        "mouse_wheel_moving",
        "root",
        "bind",
        "mouse_wheel_moving",
        "canvas",
        "focus_set",
        "cropframe_width",
        "_crop_height",
        "_crop_width",
        "_canvas_width",
        "_canvas_height",
        "__getCropFrameCoordinate",
        "canvas",
        "create_rectangle",
        "sx",
        "sy",
        "ex",
        "ey",
        "outline",
        "width",
        "Label",
        "canvas",
        "bg",
        "fg",
        "text",
        "file_list",
        "borderwidth",
        "font",
        "filenamelabel",
        "place",
        "anchor",
        "NW",
        "Label",
        "canvas",
        "bg",
        "fg",
        "text",
        "borderwidth",
        "font",
        "resultlabel",
        "place",
        "relx",
        "rely",
        "anchor",
        "SW",
        "__imageRefresh",
        "vdtools",
        "WindowFinder",
        "now_image_index",
        "now_image_index",
        "len",
        "file_list",
        "__imageRefresh",
        "now_image_index",
        "now_image_index",
        "len",
        "file_list",
        "__imageRefresh",
        "x",
        "y",
        "__cropRectangleRefresh",
        "__getCropFrameCoordinate",
        "__doEstimate",
        "sx",
        "sy",
        "ex",
        "ey",
        "resultlabel",
        "proba",
        "delta",
        "delta",
        "_crop_height",
        "_crop_width",
        "num",
        "delta",
        "max",
        "cropframe_width",
        "delta_width",
        "max",
        "cropframe_height",
        "delta_height",
        "num",
        "delta",
        "cropframe_width",
        "delta_width",
        "cropframe_height",
        "delta_height",
        "__cropRectangleRefresh",
        "PhotoImage",
        "file",
        "file_list",
        "now_image_index",
        "canvas",
        "itemconfig",
        "image_on_canvas",
        "image",
        "nowimage",
        "file_list",
        "now_image_index",
        "os",
        "path",
        "basename",
        "inputfilepath",
        "filenamelabel",
        "inputfilepath",
        "resultlabel",
        "cv2",
        "imread",
        "inputfilepath",
        "__getCropFrameCoordinate",
        "canvas",
        "coords",
        "crop_rectangle",
        "sx",
        "sy",
        "ex",
        "ey",
        "cropframe_centerposx",
        "cropframe_width",
        "cropframe_centerposy",
        "cropframe_height",
        "cropframe_centerposx",
        "cropframe_width",
        "cropframe_centerposy",
        "cropframe_height",
        "sx",
        "sy",
        "ex",
        "ey",
        "sx",
        "sy",
        "ex",
        "ey",
        "cvimage",
        "sy",
        "ey",
        "sx",
        "ex",
        "finder",
        "predictoneimage",
        "test_crop",
        "proba",
        "Tk",
        "MainWindow",
        "root",
        "root",
        "mainloop"
    ],
    "literals": [
        "'video'",
        "'kousaten_sorosoro'",
        "'image_'",
        "'./'",
        "'/'",
        "'/'",
        "'%04d'",
        "'.png'",
        "'<Right>'",
        "'<Left>'",
        "'<space>'",
        "\"<B1-Motion>\"",
        "\"<Button-1>\"",
        "\"<ButtonRelease-1>\"",
        "\"<MouseWheel>\"",
        "\"<Button-4>\"",
        "\"<Button-5>\"",
        "\"blue\"",
        "\"black\"",
        "\"green\"",
        "\"\"",
        "\"black\"",
        "\"red\"",
        "\"\"",
        "\"\"",
        "\"text\"",
        "\"text\"",
        "\"text\"",
        "\"\""
    ],
    "variables": [
        "parentdir",
        "inputdir",
        "imgname_prefix",
        "_canvas_width",
        "_canvas_height",
        "_crop_width",
        "_crop_height",
        "canvas",
        "file_list",
        "filepath",
        "now_image_index",
        "nowimage",
        "image_on_canvas",
        "cvimage",
        "cropframe_width",
        "cropframe_height",
        "cropframe_centerposx",
        "cropframe_centerposy",
        "sx",
        "sy",
        "ex",
        "ey",
        "crop_rectangle",
        "filenamelabel",
        "resultlabel",
        "finder",
        "now_image_index",
        "now_image_index",
        "cropframe_centerposx",
        "cropframe_centerposy",
        "sx",
        "sy",
        "ex",
        "ey",
        "proba",
        "delta",
        "delta_width",
        "delta_height",
        "cropframe_width",
        "cropframe_height",
        "nowimage",
        "inputfilepath",
        "imagefilename",
        "cvimage",
        "sx",
        "sy",
        "ex",
        "ey",
        "sx",
        "sy",
        "ex",
        "ey",
        "test_crop",
        "proba",
        "root"
    ],
    "comments": [
        "-*- coding: utf-8 -*-",
        "outputdir = 'output'",
        "csvlogfilename = 'crop.csv'",
        "----------------------------------------------------------------------",
        "----------------",
        "warning : image must be smaller than canvas size.",
        "create image canvas",
        "load image list",
        "image file name must be 'prefix + number(0000-9999) .png'",
        "outputpath = './' + parentdir + '/' + outputdir + '/' + imgname_prefix + ('%04d' % i) + '.png'",
        "load cropping frame information if csv file exists",
        "self.crop_frame_dic = {}",
        "self.csvfilepath = './' + parentdir + '/' + csvlogfilename",
        "if os.path.exists(self.csvfilepath):",
        "with open(self.csvfilepath) as f:",
        "for line in f:",
        "elements = line.split(',')",
        "#filename, sx, sy, ex, ey",
        "self.crop_frame_dic[elements[0]] = (int(elements[1]), int(elements[2]), int(elements[3]), int(elements[4]))",
        "load first image",
        "set callback function for key and mouse events",
        "mouse event with Windows OS",
        "mouse event with Linux OS",
        "need to recive key events",
        "set initial value of crop frame",
        "draw crop frame",
        "filename label",
        "result label",
        "new vdtool instance",
        "----------------",
        "open next image",
        "open previous image",
        "respond to Linux or Windows wheel event",
        "mouse wheel down",
        "mouse wheel up",
        "----------------",
        "change image",
        "check whether cropped image coordinate information already exists",
        "ignore wheter cropped image file exists",
        "update filename label",
        "im = Image.open(self.file_list[self.now_image_index][1])",
        "sx, sy, ex, ey = self.__getCropFrameCoordinate()",
        "im_crop = im.crop((sx, sy, ex, ey))",
        "im_crop_resized  = im_crop.resize((_crop_width, _crop_height))",
        "im_crop_resized.save(self.file_list[self.now_image_index][2], quality=95)",
        "originalfilename = os.path.basename(self.file_list[self.now_image_index][1])",
        "sx, sy, ex, ey = self.__getCropFrameCoordinate()",
        "self.crop_frame_dic[originalfilename] = (sx, sy, ex, ey)",
        "with open(self.csvfilepath, mode='w') as f:",
        "for filename, coordinate in self.crop_frame_dic.items():",
        "f.write(','.join([filename, str(coordinate[0]), str(coordinate[1]), str(coordinate[2]), str(coordinate[3])]) + \"\\n\")",
        "print(\"csv saved\")",
        "----------------------------------------------------------------------"
    ],
    "docstrings": [],
    "functions": [
        "right_key_pressed",
        "left_key_pressed",
        "space_key_pressed",
        "mouse_lclick_moving",
        "mouse_lbuton_pressed",
        "mouse_lbutton_released",
        "mouse_wheel_moving",
        "__imageRefresh",
        "__cropRectangleRefresh",
        "__saveCropImage",
        "__addCropDic",
        "__saveCropInfoToCSV",
        "__getCropFrameCoordinate",
        "__doEstimate"
    ],
    "classes": [
        "MainWindow"
    ]
}