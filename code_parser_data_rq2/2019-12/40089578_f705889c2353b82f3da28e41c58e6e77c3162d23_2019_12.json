{
    "identifiers": [
        "os",
        "sys",
        "uuid",
        "base64",
        "b64decode",
        "b64encode",
        "datetime",
        "datetime",
        "time",
        "gmtime",
        "strftime",
        "jsonschema",
        "validate",
        "exceptions",
        "flask",
        "Blueprint",
        "request",
        "make_response",
        "jsonify",
        "json",
        "flask_login",
        "login_required",
        "sqlalchemy",
        "func",
        "config",
        "logger",
        "kobo_auth",
        "db",
        "helper",
        "web",
        "download_required",
        "Blueprint",
        "kobo_auth",
        "disable_failed_auth_redirect_for_blueprint",
        "kobo",
        "logger",
        "create",
        "json_data",
        "sys",
        "version_info",
        "b64encode",
        "json",
        "dumps",
        "json_data",
        "b64encode",
        "json",
        "dumps",
        "json_data",
        "encode",
        "datetime_object",
        "datetime_object",
        "datetime",
        "total_seconds",
        "raw_kobo_store_token",
        "books_last_created",
        "datetime",
        "min",
        "books_last_modified",
        "datetime",
        "min",
        "raw_kobo_store_token",
        "books_last_created",
        "books_last_modified",
        "staticmethod",
        "headers",
        "headers",
        "get",
        "SyncToken",
        "SYNC_TOKEN_HEADER",
        "sync_token_header",
        "SyncToken",
        "sync_token_header",
        "SyncToken",
        "raw_kobo_store_token",
        "sync_token_header",
        "json",
        "loads",
        "b64decode",
        "sync_token_header",
        "len",
        "sync_token_header",
        "validate",
        "sync_token_json",
        "SyncToken",
        "token_schema",
        "sync_token_json",
        "SyncToken",
        "MIN_VERSION",
        "ValueError",
        "sync_token_json",
        "validate",
        "sync_token_json",
        "SyncToken",
        "data_schema_v1",
        "exceptions",
        "ValidationError",
        "ValueError",
        "e",
        "log",
        "error",
        "SyncToken",
        "data_json",
        "datetime",
        "utcfromtimestamp",
        "data_json",
        "datetime",
        "utcfromtimestamp",
        "data_json",
        "log",
        "error",
        "SyncToken",
        "raw_kobo_store_token",
        "raw_kobo_store_token",
        "SyncToken",
        "raw_kobo_store_token",
        "raw_kobo_store_token",
        "books_last_created",
        "books_last_created",
        "books_last_modified",
        "books_last_modified",
        "headers",
        "SyncToken",
        "SYNC_TOKEN_HEADER",
        "build_sync_token",
        "SyncToken",
        "VERSION",
        "raw_kobo_store_token",
        "to_epoch_timestamp",
        "books_last_modified",
        "to_epoch_timestamp",
        "books_last_created",
        "b64encode_json",
        "token",
        "kobo",
        "route",
        "login_required",
        "download_required",
        "SyncToken",
        "from_headers",
        "request",
        "headers",
        "log",
        "info",
        "sync_token",
        "books_last_modified",
        "sync_token",
        "books_last_created",
        "db",
        "session",
        "query",
        "db",
        "Books",
        "func",
        "datetime",
        "db",
        "Books",
        "last_modified",
        "sync_token",
        "books_last_modified",
        "all",
        "book",
        "changed_entries",
        "create_book_entitlement",
        "book",
        "get_metadata",
        "book",
        "reading_state",
        "book",
        "book",
        "timestamp",
        "sync_token",
        "books_last_created",
        "entitlements",
        "append",
        "entitlement",
        "entitlements",
        "append",
        "entitlement",
        "max",
        "book",
        "last_modified",
        "sync_token",
        "books_last_modified",
        "max",
        "book",
        "timestamp",
        "sync_token",
        "books_last_modified",
        "new_books_last_created",
        "new_books_last_modified",
        "make_response",
        "jsonify",
        "entitlements",
        "sync_token",
        "to_headers",
        "response",
        "headers",
        "response",
        "headers",
        "response",
        "headers",
        "response",
        "kobo",
        "route",
        "login_required",
        "download_required",
        "book_uuid",
        "log",
        "info",
        "book_uuid",
        "db",
        "session",
        "query",
        "db",
        "Books",
        "db",
        "Books",
        "uuid",
        "book_uuid",
        "first",
        "book",
        "book",
        "data",
        "log",
        "info",
        "book_uuid",
        "make_response",
        "get_metadata",
        "book",
        "jsonify",
        "metadata",
        "book",
        "book_format",
        "format",
        "url_base",
        "request",
        "environ",
        "base_url",
        "book_id",
        "book",
        "id",
        "book_format",
        "book_format",
        "lower",
        "book",
        "book",
        "uuid",
        "current_time",
        "book",
        "timestamp",
        "book_uuid",
        "book_uuid",
        "book",
        "last_modified",
        "book_uuid",
        "strftime",
        "gmtime",
        "book",
        "book",
        "comments",
        "book",
        "comments",
        "text",
        "book",
        "book",
        "authors",
        "book",
        "authors",
        "name",
        "book",
        "book",
        "publishers",
        "book",
        "publishers",
        "name",
        "book",
        "book",
        "series",
        "book",
        "series",
        "name",
        "book",
        "book_data",
        "book",
        "data",
        "book_data",
        "format",
        "ALLOWED_FORMATS",
        "download_urls",
        "append",
        "book_data",
        "format",
        "book_data",
        "uncompressed_size",
        "get_download_url_for_book",
        "book",
        "book_data",
        "format",
        "book",
        "uuid",
        "get_author",
        "book",
        "book_uuid",
        "book_uuid",
        "get_description",
        "book",
        "download_urls",
        "book_uuid",
        "get_publisher",
        "book",
        "book_uuid",
        "book",
        "title",
        "book_uuid",
        "get_series",
        "book",
        "sys",
        "version_info",
        "get_series",
        "book",
        "encode",
        "get_series",
        "book",
        "get_series",
        "book",
        "book",
        "series_index",
        "book",
        "series_index",
        "uuid",
        "uuid3",
        "uuid",
        "NAMESPACE_DNS",
        "name",
        "metadata",
        "book",
        "reading_state",
        "kobo",
        "route",
        "book_uuid",
        "horizontal",
        "vertical",
        "jpeg_quality",
        "monochrome",
        "helper",
        "get_book_cover_with_uuid",
        "book_uuid",
        "use_generic_cover_on_failure",
        "book_cover",
        "make_response",
        "book_cover",
        "kobo",
        "route",
        "kobo",
        "route",
        "kobo",
        "route",
        "methods",
        "kobo",
        "route",
        "kobo",
        "route",
        "kobo",
        "route",
        "kobo",
        "route",
        "kobo",
        "route",
        "kobo",
        "route",
        "kobo",
        "route",
        "kobo",
        "route",
        "methods",
        "dummy",
        "make_response",
        "jsonify",
        "kobo",
        "route",
        "methods",
        "make_response",
        "jsonify",
        "response",
        "kobo",
        "route",
        "NATIVE_KOBO_RESOURCES",
        "calibre_web_url",
        "config",
        "config_server_url",
        "make_response",
        "jsonify",
        "resources",
        "response",
        "headers",
        "response",
        "calibre_web_url",
        "calibre_web_url",
        "calibre_web_url",
        "calibre_web_url"
    ],
    "literals": [
        "\"kobo\"",
        "\"x-kobo-synctoken\"",
        "\"1-0-0\"",
        "\"1-0-0\"",
        "\"type\"",
        "\"object\"",
        "\"properties\"",
        "\"version\"",
        "\"type\"",
        "\"string\"",
        "\"data\"",
        "\"type\"",
        "\"object\"",
        "\"type\"",
        "\"object\"",
        "\"properties\"",
        "\"raw_kobo_store_token\"",
        "\"type\"",
        "\"string\"",
        "\"books_last_modified\"",
        "\"type\"",
        "\"string\"",
        "\"books_last_created\"",
        "\"type\"",
        "\"string\"",
        "\"\"",
        "\"\"",
        "\"\"",
        "\".\"",
        "\"=\"",
        "\"version\"",
        "\"data\"",
        "\"Sync token contents do not follow the expected json schema.\"",
        "\"raw_kobo_store_token\"",
        "\"books_last_modified\"",
        "\"books_last_created\"",
        "\"SyncToken timestamps don't parse to a datetime.\"",
        "\"version\"",
        "\"data\"",
        "\"raw_kobo_store_token\"",
        "\"books_last_modified\"",
        "\"books_last_created\"",
        "\"/v1/library/sync\"",
        "\"Kobo library sync request received.\"",
        "\"BookEntitlement\"",
        "\"BookMetadata\"",
        "\"ReadingState\"",
        "\"NewEntitlement\"",
        "\"ChangedEntitlement\"",
        "\"x-kobo-sync-mode\"",
        "\"delta\"",
        "\"x-kobo-apitoken\"",
        "\"e30=\"",
        "\"/v1/library/<book_uuid>/metadata\"",
        "\"Kobo library metadata request received for book %s\"",
        "u\"Book %s not found in database\"",
        "\"Book not found in database.\"",
        "\"{url_base}/download/{book_id}/{book_format}\"",
        "'werkzeug.request'",
        "\"Accessibility\"",
        "\"Full\"",
        "\"ActivePeriod\"",
        "\"From\"",
        "\"Created\"",
        "\"CrossRevisionId\"",
        "\"Id\"",
        "\"IsHiddenFromArchive\"",
        "\"IsLocked\"",
        "\"IsRemoved\"",
        "\"LastModified\"",
        "\"OriginCategory\"",
        "\"Imported\"",
        "\"RevisionId\"",
        "\"Status\"",
        "\"Active\"",
        "\"%Y-%m-%dT%H:%M:%SZ\"",
        "\"KEPUB\"",
        "\"Format\"",
        "\"Size\"",
        "\"Url\"",
        "\"Platform\"",
        "\"Android\"",
        "\"Categories\"",
        "\"00000000-0000-0000-0000-000000000001\"",
        "\"Contributors\"",
        "\"CoverImageId\"",
        "\"CrossRevisionId\"",
        "\"CurrentDisplayPrice\"",
        "\"CurrencyCode\"",
        "\"USD\"",
        "\"TotalAmount\"",
        "\"CurrentLoveDisplayPrice\"",
        "\"TotalAmount\"",
        "\"Description\"",
        "\"DownloadUrls\"",
        "\"EntitlementId\"",
        "\"ExternalIds\"",
        "\"Genre\"",
        "\"00000000-0000-0000-0000-000000000001\"",
        "\"IsEligibleForKoboLove\"",
        "\"IsInternetArchive\"",
        "\"IsPreOrder\"",
        "\"IsSocialEnabled\"",
        "\"Language\"",
        "\"en\"",
        "\"PhoneticPronunciations\"",
        "\"PublicationDate\"",
        "\"2019-02-03T00:25:03.0000000Z\"",
        "\"Publisher\"",
        "\"Imprint\"",
        "\"\"",
        "\"Name\"",
        "\"RevisionId\"",
        "\"Title\"",
        "\"WorkId\"",
        "\"utf-8\"",
        "\"Series\"",
        "\"Name\"",
        "\"Number\"",
        "\"NumberFloat\"",
        "\"Id\"",
        "\"/<book_uuid>/<horizontal>/<vertical>/<jpeg_quality>/<monochrome>/image.jpg\"",
        "\"/v1/user/profile\"",
        "\"/v1/user/loyalty/benefits\"",
        "\"/v1/analytics/gettests\"",
        "\"GET\"",
        "\"POST\"",
        "\"/v1/user/wishlist\"",
        "\"/v1/user/<dummy>\"",
        "\"/v1/user/recommendations\"",
        "\"/v1/products/<dummy>\"",
        "\"/v1/products/<dummy>/nextread\"",
        "\"/v1/products/featured/<dummy>\"",
        "\"/v1/products/featured/\"",
        "\"/v1/library/<dummy>\"",
        "\"DELETE\"",
        "\"GET\"",
        "\"/v1/auth/device\"",
        "\"POST\"",
        "\"AccessToken\"",
        "\"abcde\"",
        "\"RefreshToken\"",
        "\"abcde\"",
        "\"TokenType\"",
        "\"Bearer\"",
        "\"TrackingId\"",
        "\"abcde\"",
        "\"UserKey\"",
        "\"abcdefgeh\"",
        "\"/v1/initialization\"",
        "\"Resources\"",
        "\"x-kobo-apitoken\"",
        "\"e30=\"",
        "\"account_page\"",
        "\"https://secure.kobobooks.com/profile\"",
        "\"account_page_rakuten\"",
        "\"https://my.rakuten.co.jp/\"",
        "\"add_entitlement\"",
        "\"https://storeapi.kobo.com/v1/library/{RevisionIds}\"",
        "\"affiliaterequest\"",
        "\"https://storeapi.kobo.com/v1/affiliate\"",
        "\"audiobook_subscription_orange_deal_inclusion_url\"",
        "\"https://authorize.kobo.com/inclusion\"",
        "\"authorproduct_recommendations\"",
        "\"https://storeapi.kobo.com/v1/products/books/authors/recommendations\"",
        "\"autocomplete\"",
        "\"https://storeapi.kobo.com/v1/products/autocomplete\"",
        "\"blackstone_header\"",
        "\"key\"",
        "\"x-amz-request-payer\"",
        "\"value\"",
        "\"requester\"",
        "\"book\"",
        "\"https://storeapi.kobo.com/v1/products/books/{ProductId}\"",
        "\"book_detail_page\"",
        "\"https://store.kobobooks.com/{culture}/ebook/{slug}\"",
        "\"book_detail_page_rakuten\"",
        "\"http://books.rakuten.co.jp/rk/{crossrevisionid}\"",
        "\"book_landing_page\"",
        "\"https://store.kobobooks.com/ebooks\"",
        "\"book_subscription\"",
        "\"https://storeapi.kobo.com/v1/products/books/subscriptions\"",
        "\"categories\"",
        "\"https://storeapi.kobo.com/v1/categories\"",
        "\"categories_page\"",
        "\"https://store.kobobooks.com/ebooks/categories\"",
        "\"category\"",
        "\"https://storeapi.kobo.com/v1/categories/{CategoryId}\"",
        "\"category_featured_lists\"",
        "\"https://storeapi.kobo.com/v1/categories/{CategoryId}/featured\"",
        "\"category_products\"",
        "\"https://storeapi.kobo.com/v1/categories/{CategoryId}/products\"",
        "\"checkout_borrowed_book\"",
        "\"https://storeapi.kobo.com/v1/library/borrow\"",
        "\"configuration_data\"",
        "\"https://storeapi.kobo.com/v1/configuration\"",
        "\"content_access_book\"",
        "\"https://storeapi.kobo.com/v1/products/books/{ProductId}/access\"",
        "\"customer_care_live_chat\"",
        "\"https://v2.zopim.com/widget/livechat.html?key=Y6gwUmnu4OATxN3Tli4Av9bYN319BTdO\"",
        "\"daily_deal\"",
        "\"https://storeapi.kobo.com/v1/products/dailydeal\"",
        "\"deals\"",
        "\"https://storeapi.kobo.com/v1/deals\"",
        "\"delete_entitlement\"",
        "\"https://storeapi.kobo.com/v1/library/{Ids}\"",
        "\"delete_tag\"",
        "\"https://storeapi.kobo.com/v1/library/tags/{TagId}\"",
        "\"delete_tag_items\"",
        "\"https://storeapi.kobo.com/v1/library/tags/{TagId}/items/delete\"",
        "\"device_auth\"",
        "\"https://storeapi.kobo.com/v1/auth/device\"",
        "\"device_refresh\"",
        "\"https://storeapi.kobo.com/v1/auth/refresh\"",
        "\"dictionary_host\"",
        "\"https://kbdownload1-a.akamaihd.net\"",
        "\"discovery_host\"",
        "\"https://discovery.kobobooks.com\"",
        "\"eula_page\"",
        "\"https://www.kobo.com/termsofuse?style=onestore\"",
        "\"exchange_auth\"",
        "\"https://storeapi.kobo.com/v1/auth/exchange\"",
        "\"external_book\"",
        "\"https://storeapi.kobo.com/v1/products/books/external/{Ids}\"",
        "\"facebook_sso_page\"",
        "\"https://authorize.kobo.com/signin/provider/Facebook/login?returnUrl=http://store.kobobooks.com/\"",
        "\"featured_list\"",
        "\"https://storeapi.kobo.com/v1/products/featured/{FeaturedListId}\"",
        "\"featured_lists\"",
        "\"https://storeapi.kobo.com/v1/products/featured\"",
        "\"free_books_page\"",
        "\"EN\"",
        "\"https://www.kobo.com/{region}/{language}/p/free-ebooks\"",
        "\"FR\"",
        "\"https://www.kobo.com/{region}/{language}/p/livres-gratuits\"",
        "\"IT\"",
        "\"https://www.kobo.com/{region}/{language}/p/libri-gratuiti\"",
        "\"NL\"",
        "\"https://www.kobo.com/{region}/{language}/List/bekijk-het-overzicht-van-gratis-ebooks/QpkkVWnUw8sxmgjSlCbJRg\"",
        "\"PT\"",
        "\"https://www.kobo.com/{region}/{language}/p/livros-gratis\"",
        "\"fte_feedback\"",
        "\"https://storeapi.kobo.com/v1/products/ftefeedback\"",
        "\"get_tests_request\"",
        "\"https://storeapi.kobo.com/v1/analytics/gettests\"",
        "\"giftcard_epd_redeem_url\"",
        "\"https://www.kobo.com/{storefront}/{language}/redeem-ereader\"",
        "\"giftcard_redeem_url\"",
        "\"https://www.kobo.com/{storefront}/{language}/redeem\"",
        "\"help_page\"",
        "\"http://www.kobo.com/help\"",
        "\"image_host\"",
        "\"image_url_quality_template\"",
        "\"/{ImageId}/{Width}/{Height}/{Quality}/{IsGreyscale}/image.jpg\"",
        "\"image_url_template\"",
        "\"/{ImageId}/{Width}/{Height}/false/image.jpg\"",
        "\"kobo_audiobooks_enabled\"",
        "\"False\"",
        "\"kobo_audiobooks_orange_deal_enabled\"",
        "\"False\"",
        "\"kobo_audiobooks_subscriptions_enabled\"",
        "\"False\"",
        "\"kobo_nativeborrow_enabled\"",
        "\"True\"",
        "\"kobo_onestorelibrary_enabled\"",
        "\"False\"",
        "\"kobo_redeem_enabled\"",
        "\"True\"",
        "\"kobo_shelfie_enabled\"",
        "\"False\"",
        "\"kobo_subscriptions_enabled\"",
        "\"False\"",
        "\"kobo_superpoints_enabled\"",
        "\"False\"",
        "\"kobo_wishlist_enabled\"",
        "\"True\"",
        "\"library_book\"",
        "\"https://storeapi.kobo.com/v1/user/library/books/{LibraryItemId}\"",
        "\"library_items\"",
        "\"https://storeapi.kobo.com/v1/user/library\"",
        "\"library_metadata\"",
        "\"https://storeapi.kobo.com/v1/library/{Ids}/metadata\"",
        "\"library_prices\"",
        "\"https://storeapi.kobo.com/v1/user/library/previews/prices\"",
        "\"library_stack\"",
        "\"https://storeapi.kobo.com/v1/user/library/stacks/{LibraryItemId}\"",
        "\"library_sync\"",
        "\"https://storeapi.kobo.com/v1/library/sync\"",
        "\"love_dashboard_page\"",
        "\"https://store.kobobooks.com/{culture}/kobosuperpoints\"",
        "\"love_points_redemption_page\"",
        "\"https://store.kobobooks.com/{culture}/KoboSuperPointsRedemption?productId={ProductId}\"",
        "\"magazine_landing_page\"",
        "\"https://store.kobobooks.com/emagazines\"",
        "\"notifications_registration_issue\"",
        "\"https://storeapi.kobo.com/v1/notifications/registration\"",
        "\"oauth_host\"",
        "\"https://oauth.kobo.com\"",
        "\"overdrive_account\"",
        "\"https://auth.overdrive.com/account\"",
        "\"overdrive_library\"",
        "\"https://{libraryKey}.auth.overdrive.com/library\"",
        "\"overdrive_library_finder_host\"",
        "\"https://libraryfinder.api.overdrive.com\"",
        "\"overdrive_thunder_host\"",
        "\"https://thunder.api.overdrive.com\"",
        "\"password_retrieval_page\"",
        "\"https://www.kobobooks.com/passwordretrieval.html\"",
        "\"post_analytics_event\"",
        "\"https://storeapi.kobo.com/v1/analytics/event\"",
        "\"privacy_page\"",
        "\"https://www.kobo.com/privacypolicy?style=onestore\"",
        "\"product_nextread\"",
        "\"https://storeapi.kobo.com/v1/products/{ProductIds}/nextread\"",
        "\"product_prices\"",
        "\"https://storeapi.kobo.com/v1/products/{ProductIds}/prices\"",
        "\"product_recommendations\"",
        "\"https://storeapi.kobo.com/v1/products/{ProductId}/recommendations\"",
        "\"product_reviews\"",
        "\"https://storeapi.kobo.com/v1/products/{ProductIds}/reviews\"",
        "\"products\"",
        "\"https://storeapi.kobo.com/v1/products\"",
        "\"provider_external_sign_in_page\"",
        "\"https://authorize.kobo.com/ExternalSignIn/{providerName}?returnUrl=http://store.kobobooks.com/\"",
        "\"purchase_buy\"",
        "\"https://www.kobo.com/checkout/createpurchase/\"",
        "\"purchase_buy_templated\"",
        "\"https://www.kobo.com/{culture}/checkout/createpurchase/{ProductId}\"",
        "\"quickbuy_checkout\"",
        "\"https://storeapi.kobo.com/v1/store/quickbuy/{PurchaseId}/checkout\"",
        "\"quickbuy_create\"",
        "\"https://storeapi.kobo.com/v1/store/quickbuy/purchase\"",
        "\"rating\"",
        "\"https://storeapi.kobo.com/v1/products/{ProductId}/rating/{Rating}\"",
        "\"reading_state\"",
        "\"https://storeapi.kobo.com/v1/library/{Ids}/state\"",
        "\"redeem_interstitial_page\"",
        "\"https://store.kobobooks.com\"",
        "\"registration_page\"",
        "\"https://authorize.kobo.com/signup?returnUrl=http://store.kobobooks.com/\"",
        "\"related_items\"",
        "\"https://storeapi.kobo.com/v1/products/{Id}/related\"",
        "\"remaining_book_series\"",
        "\"https://storeapi.kobo.com/v1/products/books/series/{SeriesId}\"",
        "\"rename_tag\"",
        "\"https://storeapi.kobo.com/v1/library/tags/{TagId}\"",
        "\"review\"",
        "\"https://storeapi.kobo.com/v1/products/reviews/{ReviewId}\"",
        "\"review_sentiment\"",
        "\"https://storeapi.kobo.com/v1/products/reviews/{ReviewId}/sentiment/{Sentiment}\"",
        "\"shelfie_recommendations\"",
        "\"https://storeapi.kobo.com/v1/user/recommendations/shelfie\"",
        "\"sign_in_page\"",
        "\"https://authorize.kobo.com/signin?returnUrl=http://store.kobobooks.com/\"",
        "\"social_authorization_host\"",
        "\"https://social.kobobooks.com:8443\"",
        "\"social_host\"",
        "\"https://social.kobobooks.com\"",
        "\"stacks_host_productId\"",
        "\"https://store.kobobooks.com/collections/byproductid/\"",
        "\"store_home\"",
        "\"www.kobo.com/{region}/{language}\"",
        "\"store_host\"",
        "\"store.kobobooks.com\"",
        "\"store_newreleases\"",
        "\"https://store.kobobooks.com/{culture}/List/new-releases/961XUjtsU0qxkFItWOutGA\"",
        "\"store_search\"",
        "\"https://store.kobobooks.com/{culture}/Search?Query={query}\"",
        "\"store_top50\"",
        "\"https://store.kobobooks.com/{culture}/ebooks/Top\"",
        "\"tag_items\"",
        "\"https://storeapi.kobo.com/v1/library/tags/{TagId}/Items\"",
        "\"tags\"",
        "\"https://storeapi.kobo.com/v1/library/tags\"",
        "\"taste_profile\"",
        "\"https://storeapi.kobo.com/v1/products/tasteprofile\"",
        "\"update_accessibility_to_preview\"",
        "\"https://storeapi.kobo.com/v1/library/{EntitlementIds}/preview\"",
        "\"use_one_store\"",
        "\"False\"",
        "\"user_loyalty_benefits\"",
        "\"https://storeapi.kobo.com/v1/user/loyalty/benefits\"",
        "\"user_platform\"",
        "\"https://storeapi.kobo.com/v1/user/platform\"",
        "\"user_profile\"",
        "\"https://storeapi.kobo.com/v1/user/profile\"",
        "\"user_ratings\"",
        "\"https://storeapi.kobo.com/v1/user/ratings\"",
        "\"user_recommendations\"",
        "\"https://storeapi.kobo.com/v1/user/recommendations\"",
        "\"user_reviews\"",
        "\"https://storeapi.kobo.com/v1/user/reviews\"",
        "\"user_wishlist\"",
        "\"https://storeapi.kobo.com/v1/user/wishlist\"",
        "\"userguide_host\"",
        "\"https://kbdownload1-a.akamaihd.net\"",
        "\"wishlist_page\"",
        "\"https://store.kobobooks.com/{region}/{language}/account/wishlist\""
    ],
    "variables": [
        "kobo",
        "log",
        "SYNC_TOKEN_HEADER",
        "VERSION",
        "MIN_VERSION",
        "token_schema",
        "data_schema_v1",
        "raw_kobo_store_token",
        "books_last_created",
        "books_last_modified",
        "sync_token_header",
        "sync_token_json",
        "data_json",
        "raw_kobo_store_token",
        "books_last_modified",
        "books_last_created",
        "headers",
        "token",
        "sync_token",
        "new_books_last_modified",
        "new_books_last_created",
        "entitlements",
        "changed_entries",
        "entitlement",
        "new_books_last_modified",
        "new_books_last_created",
        "sync_token",
        "books_last_created",
        "sync_token",
        "books_last_modified",
        "response",
        "book",
        "metadata",
        "book_uuid",
        "ALLOWED_FORMATS",
        "download_urls",
        "book_uuid",
        "metadata",
        "name",
        "name",
        "metadata",
        "reading_state",
        "book_cover",
        "response",
        "resources",
        "response"
    ],
    "comments": [
        "!/usr/bin/env python",
        "-*- coding: utf-8 -*-",
        "This file is part of the Calibre-Web (https://github.com/janeczku/calibre-web)",
        "Copyright (C) 2018-2019 shavitmichael, OzzieIsaacs",
        "",
        "This program is free software: you can redistribute it and/or modify",
        "it under the terms of the GNU General Public License as published by",
        "the Free Software Foundation, either version 3 of the License, or",
        "(at your option) any later version.",
        "",
        "This program is distributed in the hope that it will be useful,",
        "but WITHOUT ANY WARRANTY; without even the implied warranty of",
        "MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the",
        "GNU General Public License for more details.",
        "",
        "You should have received a copy of the GNU General Public License",
        "along with this program. If not, see <http://www.gnu.org/licenses/>.",
        "Python3 has a timestamp() method we could be calling, however it's not avaiable in python2.",
        "This Schema doesn't contain enough information to detect and propagate book deletions from Calibre to the device.",
        "A potential solution might be to keep a list of all known book uuids in the token, and look for any missing from the db.",
        "On the first sync from a Kobo device, we may receive the SyncToken",
        "from the official Kobo store. Without digging too deep into it, that",
        "token is of the form [b64encoded blob].[b64encoded blob 2]",
        "TODO: Limit the number of books return per sync call, and rely on the sync-continuatation header",
        "instead so that the device triggers another sync.",
        "sqlite gives unexpected results when performing the last_modified comparison without the datetime cast.",
        "It looks like it's treating the db.Books.last_modified field as a string and may fail",
        "the comparison because of the +00:00 suffix.",
        "Missing feature: Detect server-side book deletions.",
        "Missing feature: Join the response with results from the official Kobo store so that users can still buy and access books from the device store (particularly while on-the-road).",
        "Setting this to true removes from the device.",
        "TODO handle multiple authors",
        "\"DrmType\": \"None\", # Not required",
        "Required field.",
        "current_time(),",
        "Get a deterministic id based on the series name.",
        "TODO: Implement",
        "\"StatusInfo\": {",
        "\"LastModified\": get_single_cc_value(book, \"lastreadtimestamp\"),",
        "\"Status\": get_single_cc_value(book, \"reading_status\"),",
        "}",
        "TODO: CurrentBookmark, Location",
        "TODO: implement",
        "This AuthRequest isn't used for most of our usecases."
    ],
    "docstrings": [
        "\"\"\" The SyncToken is used to persist state accross requests.\n    When serialized over the response headers, the Kobo device will propagate the token onto following requests to the service.\n    As an example use-case, the SyncToken is used to detect books that have been added to the library since the last time the device synced to the server.\n\n    Attributes:\n        books_last_created: Datetime representing the newest book that the device knows about.\n        books_last_modified: Datetime representing the last modified book that the device knows about.\n    \"\"\""
    ],
    "functions": [
        "b64encode_json",
        "to_epoch_timestamp",
        "from_headers",
        "to_headers",
        "build_sync_token",
        "HandleSyncRequest",
        "HandleMetadataRequest",
        "get_download_url_for_book",
        "create_book_entitlement",
        "current_time",
        "get_description",
        "get_author",
        "get_publisher",
        "get_series",
        "get_metadata",
        "reading_state",
        "HandleCoverImageRequest",
        "HandleDummyRequest",
        "HandleAuthRequest",
        "HandleInitRequest",
        "NATIVE_KOBO_RESOURCES"
    ],
    "classes": [
        "SyncToken"
    ]
}