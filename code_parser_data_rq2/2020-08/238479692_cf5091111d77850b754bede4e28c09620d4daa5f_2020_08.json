{
    "identifiers": [
        "org",
        "opentripplanner",
        "middleware",
        "docs",
        "com",
        "fasterxml",
        "jackson",
        "databind",
        "JsonNode",
        "com",
        "fasterxml",
        "jackson",
        "databind",
        "node",
        "ArrayNode",
        "com",
        "fasterxml",
        "jackson",
        "databind",
        "node",
        "JsonNodeFactory",
        "com",
        "fasterxml",
        "jackson",
        "databind",
        "node",
        "ObjectNode",
        "org",
        "junit",
        "jupiter",
        "api",
        "Disabled",
        "org",
        "junit",
        "jupiter",
        "api",
        "Test",
        "org",
        "opentripplanner",
        "middleware",
        "OtpMiddlewareTest",
        "org",
        "opentripplanner",
        "middleware",
        "utils",
        "YamlUtils",
        "org",
        "slf4j",
        "Logger",
        "org",
        "slf4j",
        "LoggerFactory",
        "java",
        "io",
        "File",
        "java",
        "io",
        "java",
        "net",
        "URI",
        "java",
        "net",
        "http",
        "HttpClient",
        "java",
        "net",
        "http",
        "HttpRequest",
        "java",
        "net",
        "http",
        "HttpResponse",
        "java",
        "nio",
        "file",
        "Files",
        "java",
        "nio",
        "file",
        "Path",
        "java",
        "nio",
        "file",
        "Paths",
        "java",
        "util",
        "Iterator",
        "java",
        "util",
        "org",
        "junit",
        "jupiter",
        "api",
        "Assertions",
        "assertEquals",
        "LOG",
        "LoggerFactory",
        "getLogger",
        "client",
        "HttpClient",
        "newBuilder",
        "build",
        "versionControlledSwaggerFile",
        "toPath",
        "apiGatewayPathTemplateFile",
        "apiGatewayPathIdTemplateFile",
        "apiGatewayPathTokenTemplateFile",
        "apiGatewayDefinitionsFile",
        "TAG_DESCRIPTION_TEMPLATE",
        "Test",
        "Disabled",
        "autoGeneratedSwagger",
        "getSwaggerDocsAsString",
        "Files",
        "writeString",
        "versionControlledSwaggerFile",
        "autoGeneratedSwagger",
        "parentNode",
        "key",
        "content",
        "nodeToModify",
        "parentNode",
        "get",
        "key",
        "nodeToModify",
        "it",
        "nodeToModify",
        "fieldNames",
        "it",
        "hasNext",
        "fieldName",
        "it",
        "next",
        "newChildNode",
        "content",
        "get",
        "fieldName",
        "newChildNode",
        "nodeToModify",
        "fieldName",
        "newChildNode",
        "pathsNode",
        "hostName",
        "DEFINITION_REF",
        "it",
        "pathsNode",
        "fieldNames",
        "it",
        "hasNext",
        "pathName",
        "it",
        "next",
        "pathEntryNode",
        "pathsNode",
        "get",
        "pathName",
        "it1",
        "pathEntryNode",
        "fieldNames",
        "it1",
        "hasNext",
        "methodName",
        "it1",
        "next",
        "methodNode",
        "pathEntryNode",
        "get",
        "methodName",
        "returnTypeNode",
        "methodNode",
        "at",
        "returnType",
        "returnTypeNode",
        "returnTypeText",
        "returnTypeNode",
        "asText",
        "returnTypeText",
        "startsWith",
        "DEFINITION_REF",
        "returnType",
        "returnTypeText",
        "substring",
        "DEFINITION_REF",
        "length",
        "LOG",
        "info",
        "pathName",
        "methodName",
        "returnType",
        "pathsNode",
        "tagNode",
        "hostName",
        "descriptionParts",
        "tagNode",
        "get",
        "asText",
        "split",
        "descriptionParts",
        "equals",
        "returnType",
        "descriptionParts",
        "path",
        "tagNode",
        "get",
        "asText",
        "slashPath",
        "path",
        "LOG",
        "info",
        "path",
        "returnType",
        "pathsObjectNode",
        "pathsNode",
        "rewriteIfExists",
        "pathsObjectNode",
        "slashPath",
        "getApiContent",
        "apiGatewayPathTemplateFile",
        "hostName",
        "returnType",
        "path",
        "rewriteIfExists",
        "pathsObjectNode",
        "slashPath",
        "getApiContent",
        "apiGatewayPathIdTemplateFile",
        "hostName",
        "returnType",
        "path",
        "rewriteIfExists",
        "pathsObjectNode",
        "slashPath",
        "getApiContent",
        "apiGatewayPathTokenTemplateFile",
        "hostName",
        "returnType",
        "path",
        "tagNode",
        "put",
        "TAG_DESCRIPTION_TEMPLATE",
        "replaceAll",
        "returnType",
        "LOG",
        "info",
        "path",
        "returnType",
        "templateFile",
        "host",
        "returnType",
        "path",
        "template",
        "Files",
        "readAllBytes",
        "Paths",
        "get",
        "templateFile",
        "getAbsolutePath",
        "modifiedTemplate",
        "template",
        "replaceAll",
        "host",
        "replaceAll",
        "path",
        "replaceAll",
        "returnType",
        "YamlUtils",
        "yamlMapper",
        "readTree",
        "modifiedTemplate",
        "Test",
        "autoGeneratedSwagger",
        "getSwaggerDocsAsString",
        "Files",
        "writeString",
        "Paths",
        "get",
        "autoGeneratedSwagger",
        "swaggerJson",
        "YamlUtils",
        "yamlMapper",
        "readTree",
        "autoGeneratedSwagger",
        "deepCopy",
        "templateJson",
        "YamlUtils",
        "yamlMapper",
        "readTree",
        "apiGatewayDefinitionsFile",
        "modifyPathEntries",
        "swaggerJson",
        "swaggerJson",
        "templateJson",
        "get",
        "insertAbstractUserRefs",
        "swaggerJson",
        "templateJson",
        "get",
        "generateArrayDefinitions",
        "swaggerJson",
        "generateMissingTypes",
        "swaggerJson",
        "swaggerJson",
        "get",
        "put",
        "templateJson",
        "at",
        "asText",
        "outputPath",
        "toPath",
        "yamlOutput",
        "YamlUtils",
        "yamlMapper",
        "writer",
        "writeValueAsString",
        "swaggerJson",
        "Files",
        "writeString",
        "outputPath",
        "yamlOutput",
        "LOG",
        "info",
        "outputPath",
        "autoGeneratedSwaggerJson",
        "hostName",
        "autoGeneratedSwaggerJson",
        "get",
        "asText",
        "pathsNode",
        "autoGeneratedSwaggerJson",
        "get",
        "tagNode",
        "autoGeneratedSwaggerJson",
        "get",
        "modifyMethodEntries",
        "pathsNode",
        "hostName",
        "autoGeneratedSwaggerJson",
        "definitionsNode",
        "autoGeneratedSwaggerJson",
        "get",
        "ARRAY_DEF",
        "node",
        "autoGeneratedSwaggerJson",
        "findValues",
        "refNode",
        "node",
        "get",
        "refNode",
        "refNode",
        "asText",
        "startsWith",
        "ARRAY_DEF",
        "baseType",
        "refNode",
        "asText",
        "substring",
        "ARRAY_DEF",
        "length",
        "arrayDefinition",
        "JsonNodeFactory",
        "instance",
        "objectNode",
        "put",
        "JsonNodeFactory",
        "instance",
        "objectNode",
        "put",
        "baseType",
        "definitionsNode",
        "baseType",
        "arrayDefinition",
        "autoGeneratedSwaggerJson",
        "definitionsNode",
        "autoGeneratedSwaggerJson",
        "get",
        "DEFINITION_REF",
        "node",
        "autoGeneratedSwaggerJson",
        "findValues",
        "node",
        "asText",
        "startsWith",
        "DEFINITION_REF",
        "baseType",
        "node",
        "asText",
        "substring",
        "DEFINITION_REF",
        "length",
        "definitionsNode",
        "get",
        "baseType",
        "typeDefinition",
        "JsonNodeFactory",
        "instance",
        "objectNode",
        "put",
        "put",
        "definitionsNode",
        "baseType",
        "typeDefinition",
        "autoGeneratedSwaggerJson",
        "definitionsTemplate",
        "definitionsNode",
        "autoGeneratedSwaggerJson",
        "get",
        "definitionsNode",
        "definitionsTemplate",
        "get",
        "abstractUserRefNode",
        "JsonNodeFactory",
        "instance",
        "objectNode",
        "abstractUserRefNode",
        "put",
        "userClass",
        "of",
        "userNode",
        "definitionsNode",
        "get",
        "userClass",
        "allOfNode",
        "JsonNodeFactory",
        "instance",
        "arrayNode",
        "add",
        "abstractUserRefNode",
        "deepCopy",
        "add",
        "userNode",
        "newUserNode",
        "JsonNodeFactory",
        "instance",
        "objectNode",
        "allOfNode",
        "definitionsNode",
        "userClass",
        "newUserNode",
        "Test",
        "swaggerResponse",
        "getSwaggerDocs",
        "assertEquals",
        "swaggerResponse",
        "statusCode",
        "autoGeneratedSwagger",
        "swaggerResponse",
        "body",
        "swaggerJson",
        "YamlUtils",
        "yamlMapper",
        "readTree",
        "autoGeneratedSwagger",
        "title",
        "swaggerJson",
        "get",
        "get",
        "asText",
        "LOG",
        "info",
        "title",
        "assertEquals",
        "title",
        "versionControlledSwagger",
        "Files",
        "readString",
        "versionControlledSwaggerFile",
        "assertEquals",
        "autoGeneratedSwagger",
        "versionControlledSwagger",
        "getSwaggerDocs",
        "body",
        "get",
        "HttpRequest",
        "newBuilder",
        "uri",
        "URI",
        "create",
        "GET",
        "build",
        "client",
        "send",
        "get",
        "HttpResponse",
        "BodyHandlers",
        "ofString"
    ],
    "literals": [
        "\"src/main/resources/doc.yaml\"",
        "\"src/main/resources/api-gateway-path-template.yaml\"",
        "\"src/main/resources/api-gateway-path-id-template.yaml\"",
        "\"src/main/resources/api-gateway-path-token-template.yaml\"",
        "\"src/main/resources/api-gateway-template.yaml\"",
        "\"Interface for managing '{RETURN_TYPE} entities.\"",
        "\"#/definitions/\"",
        "\"/responses/200/schema/$ref\"",
        "\"\"",
        "\"Rewriting API path '{}' '{}' of type '{}'.\"",
        "\"description\"",
        "\":\"",
        "\"API_TEMPLATE\"",
        "\"name\"",
        "\"/\"",
        "\"Rewriting API path '{}' of type '{}'.\"",
        "\"/{id}\"",
        "\"/fromtoken\"",
        "\"description\"",
        "\"\\\\{RETURN_TYPE}\"",
        "\"Rewrote API path '{}' of type '{}'.\"",
        "\"\\\\{HOST}\"",
        "\"\\\\{PATH}\"",
        "\"\\\\{RETURN_TYPE}\"",
        "\"doc.yaml\"",
        "\"securityDefinitions\"",
        "\"securityDefinitions\"",
        "\"definitions\"",
        "\"info\"",
        "\"version\"",
        "\"/info/version\"",
        "\"target/doc-api-gateway.yaml\"",
        "\"Wrote API Gateway enhanced Swagger docs to: {}\"",
        "\"host\"",
        "\"paths\"",
        "\"tags\"",
        "\"definitions\"",
        "\"#/definitions/ArrayOf\"",
        "\"schema\"",
        "\"$ref\"",
        "\"type\"",
        "\"array\"",
        "\"items\"",
        "\"$ref\"",
        "\"#/definitions/\"",
        "\"ArrayOf\"",
        "\"definitions\"",
        "\"#/definitions/\"",
        "\"$ref\"",
        "\"type\"",
        "\"object\"",
        "\"description\"",
        "\"autogenerated\"",
        "\"definitions\"",
        "\"AbstractUser\"",
        "\"AbstractUser\"",
        "\"$ref\"",
        "\"#/definitions/AbstractUser\"",
        "\"AdminUser\"",
        "\"ApiUser\"",
        "\"OtpUser\"",
        "\"allOf\"",
        "\"info\"",
        "\"title\"",
        "\"Found swagger docs title: {}\"",
        "\"OTP Middleware\"",
        "\"http://localhost:4567/doc.yaml\""
    ],
    "variables": [],
    "comments": [
        "Go through the node's field names, and replace them",
        "if they have an entry of the same name defined in the content to write.",
        "String slashPath = \"/\" + path;",
        "Return type is at /responses/200/schema/$ref",
        "TODO: Extract method.",
        "extract return type",
        "Insert authorization parameter (adds parameter entry if needed)",
        "TODO: add type check.",
        "ArrayNode parameterNode = (ArrayNode) methodNode.get(\"parameters\");",
        "Insert node if not found.",
        "if (parameterNode == null) {",
        "parameterNode = JsonNodeFactory.instance.arrayNode();",
        "methodName.set(\"parameters\", parameterNode);",
        "}",
        "API Gateway mapping (uses path)",
        "Insert security definition (from template)",
        "Replace responses (canned responses) with CORS headers",
        "LOG.info(\"Rewrote API path '{}' of type '{}'.\", pathName, returnType);",
        "Description would contain text of the form API_TEMPLATE:OtpUser",
        "Get the url and type parameter for the API template.",
        "Rewrite, if they exist, the /path, /path/{id}, and /path/fromtoken nodes.",
        "Rewrite the description of tagNode too.",
        "Get the YAML template for the path.",
        "Replace params in the template.",
        "Import modified template and rewrite node.",
        "Start with the swagger YAML skeleton generated by spark-swagger (clone it)",
        "TODO: Remove",
        "Use definitions from a template file.",
        "Do the modifications for AWS API Gateway compatibility (extensions, CORS...).",
        "Insert version (the version attribute in spark-swagger.conf is not read by spark-swagger.)",
        "Generate output file.",
        "The host name for AWS API Gateway mappings.",
        "Find the paths node",
        "rewritePathData(pathsNode, tagNode, hostName);",
        "Find return type references from all \"schema\" entries.",
        "Find the types from all $ref entries.",
        "Add type if it is not defined.",
        "Insert the AbstractUser type.",
        "On the user types, insert an \"allOf\" entry to include the ref to AbstractUser."
    ],
    "docstrings": [
        "* Contains test to verify that the swagger docs are generated correctly.",
        "* Run this test to update the Swagger docs file located at {@link #versionControlledSwaggerFile}. This is disabled\n     * because it serves as a utility for keeping the docs file up-to-date.",
        "* Rewrites child entries only if they already exist (does not insert new entries).",
        "* Modifies the API method entries specified node.",
        "* Processes the API template macro for the specified node,\n     * which is one of the entries in /tags in the base yaml file.",
        "* Generate enhanced Swagger docs for use with AWS API Gateway. This handles things like adding auth headers and key\n     * parameters used with API Gateway as well as injecting info needed to make CORS work.",
        "* Each spark-swagger-generated element under the /tags\n     * has a name property that is the path of an API endpoint,\n     * and a description property that contains a return type.\n     * Use these data to rewrite the /paths entries generated by spark-swagger\n     * with our templates that include the AWS API Gateway extensions.",
        "* Generate array type definitions for all array references that we added.\n     * (spark-swagger's withResponseAsCollection method does not generate array types).",
        "* Generate missing types not created by spark-swagger.",
        "* Insert {@link:AbstractUser} references.\n     * (spark-swagger ignores parent classes when generating swagger.)\n     * FIXME: Find a better way to include parent classes.",
        "* Verify that version-controlled doc.yaml file is up to date with the latest changes to swagger file auto-generated\n     * from the spark-swagger library (available at {@link #getSwaggerDocs()}.",
        "Convenience method to get swagger docs as string.",
        "* Get swagger docs from the endpoint provided by spark-swagger. Note: this location can be modified by updating the\n     * spark-swagger.conf options."
    ],
    "functions": [
        "updateSwaggerDocs",
        "rewriteIfExists",
        "modifyMethodEntries",
        "rewritePathData",
        "JsonNode",
        "getApiContent",
        "generateApiGatewaySwagger",
        "modifyPathEntries",
        "generateArrayDefinitions",
        "generateMissingTypes",
        "insertAbstractUserRefs",
        "swaggerDocsAreUpToDate",
        "getSwaggerDocsAsString",
        "getSwaggerDocs"
    ],
    "classes": [
        "SwaggerTest"
    ]
}