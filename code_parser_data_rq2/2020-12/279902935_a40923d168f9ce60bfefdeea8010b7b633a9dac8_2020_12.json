{
    "identifiers": [
        "time",
        "json",
        "source_data",
        "source_dataset",
        "boto3",
        "os",
        "datetime",
        "date",
        "datetime",
        "multiprocessing",
        "dummy",
        "Pool",
        "os",
        "environ",
        "boto3",
        "client",
        "service_name",
        "region_name",
        "os",
        "environ",
        "boto3",
        "client",
        "service_name",
        "region_name",
        "os",
        "environ",
        "os",
        "environ",
        "os",
        "environ",
        "data_set_arn",
        "split",
        "os",
        "environ",
        "os",
        "environ",
        "data_set_name",
        "data_set_name",
        "data_set_name",
        "date",
        "today",
        "strftime",
        "today",
        "s3_bucket",
        "new_s3_key",
        "data_set_arn",
        "product_id",
        "describe_entity_response",
        "revision_arn",
        "data_set_arn",
        "revision_arn",
        "describe_entity_response",
        "describe_entity_response",
        "json",
        "dumps",
        "change_details",
        "marketplace",
        "start_change_set",
        "Catalog",
        "ChangeSet",
        "change_set",
        "response",
        "data",
        "format",
        "data",
        "data",
        "data",
        "dataexchange",
        "create_job",
        "Type",
        "Details",
        "data_set_id",
        "data",
        "data",
        "dataexchange",
        "start_job",
        "JobId",
        "import_job",
        "job_ids",
        "add",
        "import_job",
        "job_ids",
        "completed_jobs",
        "job_id",
        "job_ids",
        "job_id",
        "completed_jobs",
        "dataexchange",
        "get_job",
        "JobId",
        "job_id",
        "get_job_response",
        "format",
        "job_id",
        "data",
        "data",
        "completed_jobs",
        "add",
        "job_id",
        "get_job_response",
        "get_job_response",
        "format",
        "job_id",
        "job_errors",
        "time",
        "sleep",
        "context",
        "source_dataset",
        "asset_list",
        "i",
        "i",
        "i",
        "len",
        "asset_list",
        "asset_lists",
        "len",
        "asset_lists",
        "json",
        "dumps",
        "dataexchange",
        "create_revision",
        "DataSetId",
        "data_set_id",
        "create_revision_response",
        "create_revision_response",
        "idx",
        "len",
        "asset_lists",
        "asset_lists",
        "idx",
        "revision_id",
        "idx",
        "len",
        "asset_lists",
        "Pool",
        "p",
        "p",
        "jobs_handler",
        "asset_lists",
        "dataexchange",
        "update_revision",
        "DataSetId",
        "data_set_id",
        "RevisionId",
        "revision_id",
        "Comment",
        "revision_comment",
        "Finalized",
        "update_revision_response",
        "revision_state",
        "marketplace",
        "describe_entity",
        "Catalog",
        "EntityId",
        "product_id",
        "start_change_set",
        "describe_entity_response",
        "revision_arn",
        "start_change_set_response",
        "json",
        "dumps",
        "json",
        "dumps",
        "json",
        "dumps"
    ],
    "literals": [
        "'AWS_DATA_PATH'",
        "'/opt/'",
        "'dataexchange'",
        "'REGION'",
        "'marketplace-catalog'",
        "'REGION'",
        "'S3_BUCKET'",
        "'DATA_SET_ARN'",
        "'/'",
        "'PRODUCT_ID'",
        "'DATA_SET_NAME'",
        "'/dataset/'",
        "'/automation/cloudformation.yaml'",
        "'/automation/post-processing-code.zip'",
        "'%Y-%m-%d'",
        "'Revision Updates v'",
        "\"'S3_BUCKET' environment variable must be defined!\"",
        "\"'DATA_SET_NAME' environment variable must be defined!\"",
        "\"'DATA_SET_ARN' environment variable must be defined!\"",
        "\"'PRODUCT_ID' environment variable must be defined!\"",
        "'DataSetArn'",
        "'RevisionArns'",
        "'ChangeType'",
        "'AddRevisions'",
        "'Entity'",
        "'Identifier'",
        "'EntityIdentifier'",
        "'Type'",
        "'EntityType'",
        "'Details'",
        "'AWSMarketplace'",
        "'asset_list {} of {}:'",
        "'job_num'",
        "'total_jobs'",
        "'asset_list'",
        "'IMPORT_ASSETS_FROM_S3'",
        "'ImportAssetsFromS3'",
        "'DataSetId'",
        "'RevisionId'",
        "'revision_id'",
        "'AssetSources'",
        "'asset_list'",
        "'Id'",
        "'Id'",
        "'State'",
        "'COMPLETED'",
        "'JobId: {}, Job {} of {} completed'",
        "'job_num'",
        "'total_jobs'",
        "'State'",
        "'ERROR'",
        "'Errors'",
        "'JobId: {} failed with errors:\\n{}'",
        "'No need for a revision, all datasets included with this product are up to date'",
        "'statusCode'",
        "'body'",
        "'No need for a revision, all datasets included with this product are up to date'",
        "'Id'",
        "'Arn'",
        "'asset_list'",
        "'revision_id'",
        "'job_num'",
        "'total_jobs'",
        "'Finalized'",
        "'AWSMarketplace'",
        "'ChangeSetId'",
        "'Revision updated successfully and added to the dataset'",
        "'statusCode'",
        "'body'",
        "'Revision updated successfully and added to the dataset'",
        "'Something went wrong with AWSMarketplace Catalog API'",
        "'statusCode'",
        "'body'",
        "'Something went wrong with AWSMarketplace Catalog API'",
        "'Revision did not complete successfully'",
        "'statusCode'",
        "'body'",
        "'Revision did not complete successfully'",
        "'Something went wrong when uploading files to s3'"
    ],
    "variables": [
        "dataexchange",
        "marketplace",
        "s3_bucket",
        "data_set_arn",
        "data_set_id",
        "product_id",
        "data_set_name",
        "new_s3_key",
        "cfn_template",
        "post_processing_code",
        "today",
        "revision_comment",
        "change_details",
        "change_set",
        "response",
        "job_ids",
        "import_job",
        "completed_jobs",
        "get_job_response",
        "job_errors",
        "asset_list",
        "asset_lists",
        "create_revision_response",
        "revision_id",
        "revision_arn",
        "asset_lists",
        "idx",
        "update_revision_response",
        "revision_state",
        "describe_entity_response",
        "start_change_set_response"
    ],
    "comments": [
        "Call AWSMarketplace Catalog's start-change-set API to add revisions to the Product",
        "Used to store the Ids of the Jobs importing the assets to S3.",
        "Start the Job and save the JobId.",
        "Iterate until all remaining jobs have reached a terminal state, or an error is found.",
        "Sleep to ensure we don't get throttled by the GetJob API.",
        "Call AWSMarketplace Catalog's APIs to add revisions"
    ],
    "docstrings": [],
    "functions": [
        "start_change_set",
        "jobs_handler",
        "lambda_handler"
    ],
    "classes": []
}