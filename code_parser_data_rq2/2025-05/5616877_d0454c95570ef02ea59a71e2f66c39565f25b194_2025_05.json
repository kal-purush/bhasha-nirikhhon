{
    "identifiers": [
        "Godot",
        "Godot",
        "Collections",
        "Newtonsoft",
        "Json",
        "Node",
        "Export",
        "Export",
        "Export",
        "Export",
        "Export",
        "Export",
        "Export",
        "Export",
        "Export",
        "Export",
        "Export",
        "Export",
        "Export",
        "CA2213",
        "Export",
        "Camera3D",
        "Node3D",
        "CA2213",
        "Vector2",
        "Vector2",
        "MAX_POSITION_HISTORY",
        "Vector3",
        "Vector3",
        "MAX_POSITION_HISTORY",
        "Vector2",
        "Vector2",
        "Right",
        "Vector2",
        "Right",
        "JsonIgnore",
        "Node3D",
        "followTargetNode",
        "followTargetNode",
        "value",
        "value",
        "followTargetNode",
        "EnableEffect",
        "value",
        "IsInsideTree",
        "ArgumentException",
        "followTargetNode",
        "value",
        "InitializePositionTracking",
        "Export",
        "effectRadius",
        "Max",
        "value",
        "Abs",
        "effectRadius",
        "newValue",
        "effectRadius",
        "newValue",
        "UpdateSizing",
        "waterPlane",
        "MaterialOverride",
        "ShaderMaterial",
        "material",
        "Mesh",
        "PlaneMesh",
        "mesh",
        "GD",
        "PrintErr",
        "waterMaterial",
        "material",
        "planeMesh",
        "mesh",
        "waterMaterial",
        "SetShaderParameter",
        "waterColorParam",
        "Color",
        "waterMaterial",
        "SetShaderParameter",
        "rippleStrengthParam",
        "RippleStrength",
        "waterMaterial",
        "SetShaderParameter",
        "timeOffsetParam",
        "waterMaterial",
        "SetShaderParameter",
        "movementSpeedParam",
        "waterMaterial",
        "SetShaderParameter",
        "movementDirectionParam",
        "Vector2",
        "Zero",
        "waterMaterial",
        "SetShaderParameter",
        "phaseParam",
        "waterMaterial",
        "SetShaderParameter",
        "attenuationParam",
        "waterMaterial",
        "SetShaderParameter",
        "stillnessFactorParam",
        "waterMaterial",
        "SetShaderParameter",
        "pastPositionsParam",
        "godotPastPositions",
        "waterMaterial",
        "SetShaderParameter",
        "pastPositionsCountParam",
        "waterMaterial",
        "SetShaderParameter",
        "membraneRadiusParam",
        "waterPlane",
        "Visible",
        "delta",
        "EnableEffect",
        "FollowTargetNode",
        "waterPlane",
        "Visible",
        "waterPlane",
        "Visible",
        "MathF",
        "Min",
        "delta",
        "MAX_DELTA_TIME",
        "currentCamera",
        "currentCamera",
        "IsCurrent",
        "currentCamera",
        "GetViewport",
        "GetCamera3D",
        "visibilityCheckTimer",
        "clampedDelta",
        "visibilityCheckTimer",
        "VisibilityCheckInterval",
        "visibilityCheckTimer",
        "UpdateCameraPositionCache",
        "isCurrentlyVisible",
        "IsVisible",
        "waterPlane",
        "Visible",
        "isCurrentlyVisible",
        "EnableEffect",
        "isCurrentlyVisible",
        "EnableEffect",
        "FollowTargetNode",
        "IsInsideTree",
        "waterPlane",
        "GlobalTransform",
        "Transform3D",
        "Basis",
        "Identity",
        "FollowTargetNode",
        "GlobalPosition",
        "Vector3",
        "VerticalOffset",
        "GD",
        "PrintErr",
        "UpdateRippleEffect",
        "clampedDelta",
        "CalculateTimeScale",
        "timeAccumulator",
        "clampedDelta",
        "timeScale",
        "waterMaterial",
        "SetShaderParameter",
        "timeOffsetParam",
        "timeAccumulator",
        "UpdateMovementParameters",
        "clampedDelta",
        "disposing",
        "disposing",
        "timeOffsetParam",
        "Dispose",
        "movementDirectionParam",
        "Dispose",
        "movementSpeedParam",
        "Dispose",
        "waterColorParam",
        "Dispose",
        "rippleStrengthParam",
        "Dispose",
        "phaseParam",
        "Dispose",
        "attenuationParam",
        "Dispose",
        "pastPositionsParam",
        "Dispose",
        "pastPositionsCountParam",
        "Dispose",
        "stillnessFactorParam",
        "Dispose",
        "membraneRadiusParam",
        "Dispose",
        "Dispose",
        "disposing",
        "godotPastPositions",
        "Clear",
        "i",
        "MAX_POSITION_HISTORY",
        "i",
        "godotPastPositions",
        "Add",
        "Vector2",
        "Zero",
        "lastPosition",
        "Vector3",
        "Zero",
        "previousPosition",
        "Vector3",
        "Zero",
        "i",
        "MAX_POSITION_HISTORY",
        "i",
        "positionHistory",
        "i",
        "lastPosition",
        "pastPositions",
        "i",
        "Vector2",
        "Zero",
        "FollowTargetNode",
        "lastPosition",
        "FollowTargetNode",
        "GlobalPosition",
        "previousPosition",
        "lastPosition",
        "waterPlane",
        "GlobalTransform",
        "Transform3D",
        "Basis",
        "Identity",
        "lastPosition",
        "Vector3",
        "VerticalOffset",
        "isCurrentlyVisible",
        "EnableEffect",
        "waterPlane",
        "Visible",
        "GD",
        "PrintErr",
        "currentPositionIndex",
        "isPositionHistoryFull",
        "isForming",
        "formingTime",
        "currentAlpha",
        "targetAlpha",
        "stillnessValue",
        "targetStillness",
        "waterMaterial",
        "SetShaderParameter",
        "membraneRadiusParam",
        "EffectRadius",
        "waterMaterial",
        "SetShaderParameter",
        "waterColorParam",
        "Color",
        "waterMaterial",
        "SetShaderParameter",
        "stillnessFactorParam",
        "Max",
        "EffectRadius",
        "Abs",
        "planeMesh",
        "Size",
        "X",
        "desiredSize",
        "planeMesh",
        "Size",
        "Vector2",
        "desiredSize",
        "desiredSize",
        "UpdateDetailLevelSubdivisions",
        "currentSpeed",
        "isCameraPositionValid",
        "lastCameraDistance",
        "timeScale",
        "currentSpeed",
        "lastCameraDistance",
        "timeScale",
        "currentSpeed",
        "lastCameraDistance",
        "timeScale",
        "currentSpeed",
        "timeScale",
        "currentSpeed",
        "Mathf",
        "Lerp",
        "timeScale",
        "stillnessFactor",
        "delta",
        "isForming",
        "formingTime",
        "delta",
        "formingTime",
        "RippleFormationDelay",
        "isForming",
        "targetAlpha",
        "fullAlpha",
        "targetStillness",
        "targetAlpha",
        "wasMovingLastFrame",
        "fullAlpha",
        "minAlpha",
        "targetStillness",
        "wasMovingLastFrame",
        "wasMovingLastFrame",
        "stillnessTimer",
        "StillnessFadeDelay",
        "targetAlpha",
        "minAlpha",
        "targetStillness",
        "currentAlpha",
        "Mathf",
        "Lerp",
        "currentAlpha",
        "targetAlpha",
        "delta",
        "currentAlpha",
        "targetAlpha",
        "fadeInSpeed",
        "fadeOutSpeed",
        "stillnessValue",
        "Mathf",
        "Lerp",
        "stillnessValue",
        "targetStillness",
        "delta",
        "waterMaterial",
        "SetShaderParameter",
        "waterColorParam",
        "Color",
        "currentAlpha",
        "waterMaterial",
        "SetShaderParameter",
        "stillnessFactorParam",
        "stillnessValue",
        "FollowTargetNode",
        "currentCamera",
        "GetViewport",
        "GetVisibleRect",
        "HasPoint",
        "currentCamera",
        "UnprojectPosition",
        "FollowTargetNode",
        "GlobalPosition",
        "currentCamera",
        "FollowTargetNode",
        "isCameraPositionValid",
        "currentCamera",
        "GlobalPosition",
        "isCameraPositionValid",
        "lastCameraPosition",
        "DistanceSquaredTo",
        "cameraPos",
        "lastCameraPosition",
        "cameraPos",
        "lastCameraDistance",
        "FollowTargetNode",
        "GlobalPosition",
        "DistanceTo",
        "cameraPos",
        "isCameraPositionValid",
        "UpdateDetailLevelSubdivisions",
        "isCameraPositionValid",
        "Clamp",
        "EffectRadius",
        "lastCameraDistance",
        "sizeScale",
        "Clamp",
        "scaledDistance",
        "t",
        "MathF",
        "Pow",
        "t",
        "Mathf",
        "Lerp",
        "t",
        "planeMesh",
        "SubdivideWidth",
        "subdivision",
        "planeMesh",
        "SubdivideDepth",
        "subdivision",
        "planeMesh",
        "SubdivideWidth",
        "subdivision",
        "planeMesh",
        "SubdivideDepth",
        "subdivision",
        "delta",
        "FollowTargetNode",
        "previousPosition",
        "lastPosition",
        "FollowTargetNode",
        "GlobalPosition",
        "currentPos",
        "lastPosition",
        "movement",
        "LengthSquared",
        "averageMovementSqr",
        "Mathf",
        "Lerp",
        "averageMovementSqr",
        "movementSqr",
        "wasMovingLastFrame",
        "significantMovement",
        "averageMovementSqr",
        "MovementThresholdSqr",
        "significantMovement",
        "averageMovementSqr",
        "ResumeMovementThresholdSqr",
        "significantMovement",
        "stillnessTimer",
        "timeWithoutMovement",
        "wasMovingLastFrame",
        "stillnessFactor",
        "stillnessFactor",
        "Max",
        "stillnessFactor",
        "delta",
        "stillnessTimer",
        "delta",
        "timeWithoutMovement",
        "delta",
        "Min",
        "stillnessTimer",
        "StillnessFadeDelay",
        "StillnessFadeRate",
        "stillnessFactor",
        "Mathf",
        "Lerp",
        "stillnessFactor",
        "stillnessRatio",
        "delta",
        "wasMovingLastFrame",
        "positionRecordTimer",
        "delta",
        "positionRecordTimer",
        "PositionRecordInterval",
        "positionHistory",
        "currentPositionIndex",
        "currentPos",
        "currentPositionIndex",
        "currentPositionIndex",
        "MAX_POSITION_HISTORY",
        "currentPositionIndex",
        "isPositionHistoryFull",
        "positionRecordTimer",
        "UpdateLocalPositions",
        "isPositionHistoryFull",
        "MAX_POSITION_HISTORY",
        "currentPositionIndex",
        "waterMaterial",
        "SetShaderParameter",
        "pastPositionsCountParam",
        "actualCount",
        "waterMaterial",
        "SetShaderParameter",
        "pastPositionsParam",
        "godotPastPositions",
        "lastPosition",
        "currentPos",
        "directionChangeTimer",
        "delta",
        "significantMovement",
        "lastCameraDistance",
        "direction",
        "Vector2",
        "movement",
        "X",
        "movement",
        "Z",
        "Normalized",
        "calculatedSpeed",
        "Clamp",
        "movement",
        "Length",
        "delta",
        "currentDirection",
        "currentDirection",
        "Lerp",
        "direction",
        "currentSpeed",
        "Mathf",
        "Lerp",
        "currentSpeed",
        "calculatedSpeed",
        "movement",
        "Length",
        "delta",
        "distance",
        "direction",
        "Vector2",
        "movement",
        "X",
        "movement",
        "Z",
        "Normalized",
        "FollowTargetNode",
        "GlobalTransform",
        "Basis",
        "Z",
        "Vector2",
        "forwardVector",
        "X",
        "forwardVector",
        "Z",
        "Normalized",
        "direction",
        "direction",
        "Lerp",
        "orientationDir",
        "Normalized",
        "distance",
        "Max",
        "EffectRadius",
        "calculatedSpeed",
        "Clamp",
        "sizeAdjustedDistance",
        "currentDirection",
        "Dot",
        "direction",
        "directionChangeMagnitude",
        "calculatedSpeed",
        "Max",
        "calculatedSpeed",
        "directionChangeMagnitude",
        "lastDirectionChangeTime",
        "timeAccumulator",
        "directionChangeTimer",
        "Min",
        "directionChangeMagnitude",
        "currentDirection",
        "currentDirection",
        "Lerp",
        "direction",
        "dirLerpFactor",
        "currentSpeed",
        "Mathf",
        "Lerp",
        "currentSpeed",
        "calculatedSpeed",
        "movement",
        "LengthSquared",
        "lastValidDirection",
        "currentDirection",
        "currentSpeed",
        "Mathf",
        "Lerp",
        "currentSpeed",
        "directionChangeTimer",
        "wasMovingLastFrame",
        "FollowTargetNode",
        "GlobalTransform",
        "Basis",
        "Z",
        "Vector2",
        "forwardVector",
        "X",
        "forwardVector",
        "Z",
        "Normalized",
        "currentDirection",
        "currentDirection",
        "Lerp",
        "orientationDir",
        "Normalized",
        "directionChangeTimer",
        "currentDirection",
        "LengthSquared",
        "currentDirection",
        "lastValidDirection",
        "waterMaterial",
        "SetShaderParameter",
        "movementDirectionParam",
        "currentDirection",
        "waterMaterial",
        "SetShaderParameter",
        "movementSpeedParam",
        "currentSpeed",
        "FollowTargetNode",
        "FollowTargetNode",
        "GlobalPosition",
        "isPositionHistoryFull",
        "MAX_POSITION_HISTORY",
        "currentPositionIndex",
        "lastCameraDistance",
        "step",
        "lastCameraDistance",
        "step",
        "godotPastPositions",
        "Count",
        "i",
        "MAX_POSITION_HISTORY",
        "i",
        "pastPositionCount",
        "i",
        "pastPositions",
        "i",
        "Vector2",
        "Zero",
        "godotPastPositions",
        "i",
        "Vector2",
        "Zero",
        "i",
        "count",
        "i",
        "step",
        "currentPositionIndex",
        "i",
        "PositiveModulo",
        "MAX_POSITION_HISTORY",
        "positionHistory",
        "index",
        "currentPos",
        "Vector2",
        "offset",
        "X",
        "offset",
        "Z",
        "i",
        "step",
        "targetIndex",
        "MAX_POSITION_HISTORY",
        "targetIndex",
        "pastPositionCount",
        "pastPositions",
        "targetIndex",
        "position",
        "godotPastPositions",
        "targetIndex",
        "position",
        "targetPositionsCount",
        "targetIndex",
        "GD",
        "PrintErr",
        "waterMaterial",
        "SetShaderParameter",
        "pastPositionsCountParam",
        "targetPositionsCount"
    ],
    "literals": [
        "\"TimeOffset\"",
        "\"MovementDirection\"",
        "\"MovementSpeed\"",
        "\"WaterColor\"",
        "\"RippleStrength\"",
        "\"Phase\"",
        "\"Attenuation\"",
        "\"PastPositions\"",
        "\"PastPositionsCount\"",
        "\"StillnessFactor\"",
        "\"MembraneRadius\"",
        "\"Node to follow should already be in the tree\"",
        "\"MembraneWaterRipple: Required components missing (scene is incorrectly set up)\"",
        "\"MembraneWaterRipple: Target node not inside tree\"",
        "\"MembraneWaterRipple: Target node not set\"",
        "\"MembraneWaterRipple: Calculated Position index out of bounds\""
    ],
    "variables": [
        "EnableEffect",
        "RippleStrength",
        "VerticalOffset",
        "PositionHistorySize",
        "MAX_POSITION_HISTORY",
        "PositionRecordInterval",
        "VisibilityCheckInterval",
        "StillnessFadeDelay",
        "StillnessFadeRate",
        "RippleFormationDelay",
        "MovementThresholdSqr",
        "ResumeMovementThresholdSqr",
        "MAX_DELTA_TIME",
        "MAX_POSITION_HISTORY",
        "StringName",
        "timeOffsetParam",
        "StringName",
        "movementDirectionParam",
        "StringName",
        "movementSpeedParam",
        "StringName",
        "waterColorParam",
        "StringName",
        "rippleStrengthParam",
        "StringName",
        "phaseParam",
        "StringName",
        "attenuationParam",
        "StringName",
        "pastPositionsParam",
        "StringName",
        "pastPositionsCountParam",
        "StringName",
        "stillnessFactorParam",
        "StringName",
        "membraneRadiusParam",
        "fadeInSpeed",
        "fadeOutSpeed",
        "MeshInstance3D",
        "waterPlane",
        "ShaderMaterial",
        "waterMaterial",
        "PlaneMesh",
        "planeMesh",
        "currentCamera",
        "followTargetNode",
        "effectRadius",
        "pastPositions",
        "positionHistory",
        "godotPastPositions",
        "currentPositionIndex",
        "isPositionHistoryFull",
        "positionRecordTimer",
        "Vector3",
        "lastPosition",
        "Vector3",
        "previousPosition",
        "Vector2",
        "currentDirection",
        "Vector2",
        "lastValidDirection",
        "currentSpeed",
        "timeAccumulator",
        "isCurrentlyVisible",
        "visibilityCheckTimer",
        "stillnessTimer",
        "stillnessFactor",
        "wasMovingLastFrame",
        "averageMovementSqr",
        "directionChangeTimer",
        "lastDirectionChangeTime",
        "timeWithoutMovement",
        "targetAlpha",
        "currentAlpha",
        "stillnessValue",
        "targetStillness",
        "isForming",
        "formingTime",
        "minAlpha",
        "fullAlpha",
        "lastCameraDistance",
        "Vector3",
        "lastCameraPosition",
        "isCameraPositionValid",
        "FollowTargetNode",
        "EffectRadius",
        "newValue",
        "clampedDelta",
        "timeScale",
        "i",
        "i",
        "desiredSize",
        "timeScale",
        "Vector3",
        "cameraPos",
        "sizeScale",
        "scaledDistance",
        "t",
        "subdivision",
        "currentPos",
        "movement",
        "movementSqr",
        "significantMovement",
        "stillnessRatio",
        "actualCount",
        "Vector2",
        "direction",
        "calculatedSpeed",
        "distance",
        "forwardVector",
        "orientationDir",
        "sizeAdjustedDistance",
        "directionChangeMagnitude",
        "dirLerpFactor",
        "forwardVector",
        "orientationDir",
        "currentPos",
        "count",
        "step",
        "pastPositionCount",
        "i",
        "targetPositionsCount",
        "i",
        "index",
        "offset",
        "position",
        "targetIndex"
    ],
    "comments": [
        "Manages spawning and processing ripple effect for a single microbe",
        "</summary>",
        "Multiplier applied to the ripple amplitude inside the shader",
        "must remain in sync with the value in the shader",
        "</summary>",
        "Vertical offset (in world units) applied when positioning the",
        "ripple plane beneath the cell membrane",
        "must match the one in the shader",
        "</summary>",
        "Number of past positions to store for the movement history.",
        "WARNING: these configuration values must match what is set in the shader.",
        "</summary>",
        "How frequently to record a new position",
        "</summary>",
        "Time after which ripples start to fade when the cell is not moving",
        "</summary>",
        "How quickly ripples fade out when the cell is not moving",
        "</summary>",
        "Delay before ripples start to form",
        "</summary>",
        "Minimal movement threshold",
        "</summary>",
        "Threshold for resuming movement",
        "</summary>",
        "Maximum delta time to prevent jitter",
        "</summary>",
        "The maximum number of past positions to store",
        "This must match the array size in the shader",
        "</summary>",
        "Cached handles for the shader's uniform names",
        "(prevents per-frame allocations).",
        "</summary>",
        "Fade-in speed multiplier (higher = faster fade-in)",
        "</summary>",
        "Fade-out speed multiplier",
        "</summary>",
        "Rendering resources that together display the ripple effect",
        "</summary>",
        "Cached reference to the active camera",
        "</summary>",
        "Position tracking and effect state variables",
        "Stillness tracking variables",
        "Ripple effect variables",
        "Camera state caching variables",
        "This effect follows this world position node instead of just being attached to the parent as that reduced",
        "visual jitter.",
        "</summary>",
        "As we don't lazily update our data in _Process, the node to follow must be valid already",
        "The size of the membrane this effect is attached to, controls how large the effect is",
        "</summary>",
        "Check for required components first - invert the if statement to reduce nesting",
        "Initialize shader parameters",
        "Clamp delta to further prevent jitter",
        "Fetch new camera reference if needed",
        "Updates camera and visibility",
        "Optimize position calculation by reusing the base vector and only adding offset",
        "Initialize the position history arrays",
        "The C# native arrays are implicitly initialized",
        "Initialize position history with the default position",
        "Update position in world space",
        "Make visible if not already",
        "Reset state tracking",
        "Start informing state",
        "Set radius and update mesh",
        "Scale based on distance from camera",
        "Updates the ripple effect's alpha and stillness",
        "</summary>",
        "Handle forming delay first",
        "When newly not moving, apply delay before fading out",
        "Simple lerp with delta for transitions",
        "Check if the effect is currently visible",
        "This is used to optimize performance by only processing effects that are visible to the camera,",
        "going beyond normal frustum culling for more expensive effects",
        "</summary>",
        "TODO: shouldn't this allow extra space based on how big the water plane is currently so as not to frustrum",
        "cull too early?",
        "Updates the camera position cache and detail level",
        "</summary>",
        "Only update if the camera moved significantly",
        "Update detail level based on distance",
        "Updates the mesh subdivisions based on camera distance",
        "</summary>",
        "Map distance (0-120) to subdivision (120-40) with a non-linear curve",
        "Calculate subdivision from min (40) to max (120)",
        "TODO: optimize how often subdivisions are updated",
        "Updates movement parameters for the effect and records position history",
        "</summary>",
        "Store previous position before calculating new movement",
        "Calculates movement since the last frame",
        "Update stillness tracking",
        "Reset stillness timer when moving",
        "Increment stillness timer when not moving",
        "Store position in the circular history buffer at timed intervals",
        "Reset timer",
        "Only send as many positions as we actually need",
        "Direction and speed calculation",
        "Track significant direction changes",
        "Store last valid direction when moving",
        "If the direction hasn't changed for a while, but we're moving, nudge it",
        "Force direction update if it's been frozen",
        "Make sure the direction is always normalized",
        "TODO: shader parameters should not be set again if they haven't changed for performance reasons",
        "Updates the local position array for the shader",
        "based on the real position history",
        "</summary>",
        "Calculate local positions relative to current position",
        "Optimize based on camera distance so uses fewer samples for distant objects",
        "Reset all positions to zero first to ensure a clean state",
        "TODO: optimize this by only resetting the ones that are actually not updated later",
        "Access circular buffer with wrapping index",
        "Transforms world positions to local XZ offsets for shader",
        "Update the count of non-zero entries in the array"
    ],
    "docstrings": [
        "<summary>",
        "<summary>",
        "<summary>",
        "<summary>",
        "<summary>",
        "<summary>",
        "<summary>",
        "<summary>",
        "<summary>",
        "<summary>",
        "<summary>",
        "<summary>",
        "<summary>",
        "<summary>",
        "<summary>",
        "<summary>",
        "<summary>",
        "<summary>",
        "<summary>",
        "<summary>",
        "<summary>",
        "<summary>",
        "<summary>",
        "<summary>",
        "<summary>"
    ],
    "functions": [
        "_Ready",
        "_Process",
        "Dispose",
        "InitializePositionTracking",
        "UpdateSizing",
        "CalculateTimeScale",
        "UpdateRippleEffect",
        "IsVisible",
        "UpdateCameraPositionCache",
        "UpdateDetailLevelSubdivisions",
        "UpdateMovementParameters",
        "UpdateLocalPositions"
    ],
    "classes": [
        "MembraneWaterRipple"
    ]
}