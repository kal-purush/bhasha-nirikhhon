{
    "identifiers": [
        "org",
        "opencastproject",
        "workflow",
        "handler",
        "subtitletimeshift",
        "org",
        "opencastproject",
        "job",
        "api",
        "JobContext",
        "org",
        "opencastproject",
        "mediapackage",
        "MediaPackage",
        "org",
        "opencastproject",
        "mediapackage",
        "MediaPackageElementFlavor",
        "org",
        "opencastproject",
        "mediapackage",
        "Track",
        "org",
        "opencastproject",
        "subtitleparser",
        "webvttparser",
        "WebVTTParser",
        "org",
        "opencastproject",
        "subtitleparser",
        "webvttparser",
        "WebVTTSubtitle",
        "org",
        "opencastproject",
        "subtitleparser",
        "webvttparser",
        "WebVTTSubtitleCue",
        "org",
        "opencastproject",
        "subtitleparser",
        "webvttparser",
        "WebVTTWriter",
        "org",
        "opencastproject",
        "util",
        "Checksum",
        "org",
        "opencastproject",
        "util",
        "ChecksumType",
        "org",
        "opencastproject",
        "util",
        "NotFoundException",
        "org",
        "opencastproject",
        "workflow",
        "api",
        "AbstractWorkflowOperationHandler",
        "org",
        "opencastproject",
        "workflow",
        "api",
        "WorkflowInstance",
        "org",
        "opencastproject",
        "workflow",
        "api",
        "WorkflowOperationException",
        "org",
        "opencastproject",
        "workflow",
        "api",
        "WorkflowOperationHandler",
        "org",
        "opencastproject",
        "workflow",
        "api",
        "WorkflowOperationInstance",
        "org",
        "opencastproject",
        "workflow",
        "api",
        "WorkflowOperationResult",
        "org",
        "opencastproject",
        "workflow",
        "api",
        "WorkflowOperationResult",
        "Action",
        "org",
        "opencastproject",
        "workspace",
        "api",
        "Workspace",
        "org",
        "apache",
        "commons",
        "io",
        "FilenameUtils",
        "org",
        "osgi",
        "service",
        "component",
        "annotations",
        "Component",
        "org",
        "osgi",
        "service",
        "component",
        "annotations",
        "Reference",
        "org",
        "slf4j",
        "Logger",
        "org",
        "slf4j",
        "LoggerFactory",
        "java",
        "io",
        "ByteArrayInputStream",
        "java",
        "io",
        "ByteArrayOutputStream",
        "java",
        "io",
        "File",
        "java",
        "io",
        "FileInputStream",
        "java",
        "io",
        "java",
        "net",
        "URI",
        "java",
        "util",
        "Objects",
        "java",
        "util",
        "UUID",
        "Component",
        "property",
        "immediate",
        "service",
        "SUBTITLE_SOURCE_FLAVOR_CFG_KEY",
        "VIDEO_SOURCE_FLAVOR_CFG_KEY",
        "TARGET_FLAVOR_CFG_KEY",
        "COLLECTION",
        "logger",
        "LoggerFactory",
        "getLogger",
        "workspace",
        "Reference",
        "workspace",
        "workspace",
        "workspace",
        "Override",
        "workflowInstance",
        "context",
        "mediaPackage",
        "workflowInstance",
        "getMediaPackage",
        "logger",
        "info",
        "mediaPackage",
        "getIdentifier",
        "toString",
        "operation",
        "workflowInstance",
        "getCurrentOperation",
        "configuredSubtitleFlavor",
        "configuredVideoFlavor",
        "configuredTargetFlavor",
        "configuredSubtitleFlavor",
        "MediaPackageElementFlavor",
        "parseFlavor",
        "Objects",
        "toString",
        "operation",
        "getConfiguration",
        "SUBTITLE_SOURCE_FLAVOR_CFG_KEY",
        "configuredVideoFlavor",
        "MediaPackageElementFlavor",
        "parseFlavor",
        "operation",
        "getConfiguration",
        "VIDEO_SOURCE_FLAVOR_CFG_KEY",
        "configuredTargetFlavor",
        "MediaPackageElementFlavor",
        "parseFlavor",
        "operation",
        "getConfiguration",
        "TARGET_FLAVOR_CFG_KEY",
        "e",
        "e",
        "originalSubtitleTracks",
        "videoTrack",
        "subtitleTracks",
        "mediaPackage",
        "getTracks",
        "configuredSubtitleFlavor",
        "videoTracks",
        "mediaPackage",
        "getTracks",
        "configuredVideoFlavor",
        "subtitleTracks",
        "length",
        "logger",
        "info",
        "configuredSubtitleFlavor",
        "mediaPackage",
        "getIdentifier",
        "createResult",
        "mediaPackage",
        "Action",
        "SKIP",
        "videoTracks",
        "length",
        "format",
        "videoTracks",
        "length",
        "configuredVideoFlavor",
        "mediaPackage",
        "getIdentifier",
        "originalSubtitleTracks",
        "subtitleTracks",
        "videoTrack",
        "videoTracks",
        "logger",
        "info",
        "videoTrack",
        "e",
        "logger",
        "error",
        "mediaPackage",
        "getIdentifier",
        "e",
        "e",
        "originalSubtitleTrack",
        "originalSubtitleTracks",
        "newSubtitleFile",
        "loadAndParseSubtitleFile",
        "originalSubtitleTrack",
        "shiftTime",
        "newSubtitleFile",
        "videoTrack",
        "getDuration",
        "originalFileName",
        "FilenameUtils",
        "getBaseName",
        "originalSubtitleTrack",
        "getLogicalName",
        "newFileName",
        "originalFileName",
        "newSubtitleFileUri",
        "saveSubtitleFileToWorkspace",
        "newSubtitleFile",
        "newFileName",
        "newSubtitleTrack",
        "createNewTrackFromSubtitleUri",
        "newSubtitleFileUri",
        "configuredTargetFlavor",
        "originalSubtitleTrack",
        "mediaPackage",
        "add",
        "newSubtitleTrack",
        "logger",
        "info",
        "newSubtitleFileUri",
        "mediaPackage",
        "getIdentifier",
        "e",
        "logger",
        "error",
        "mediaPackage",
        "getIdentifier",
        "e",
        "e",
        "logger",
        "info",
        "mediaPackage",
        "createResult",
        "mediaPackage",
        "Action",
        "CONTINUE",
        "subtitleFile",
        "targetFlavor",
        "originalSubtitleTrack",
        "id",
        "UUID",
        "randomUUID",
        "toString",
        "newSubtitleTrack",
        "originalSubtitleTrack",
        "clone",
        "newSubtitleTrack",
        "setIdentifier",
        "id",
        "newSubtitleTrack",
        "setFlavor",
        "targetFlavor",
        "newSubtitleTrack",
        "setURI",
        "subtitleFile",
        "newSubtitleTrack",
        "setChecksum",
        "Checksum",
        "create",
        "ChecksumType",
        "DEFAULT_TYPE",
        "workspace",
        "get",
        "subtitleFile",
        "newSubtitleTrack",
        "webVTTSubtitle",
        "fileName",
        "outputStream",
        "writer",
        "writer",
        "write",
        "webVTTSubtitle",
        "outputStream",
        "inputStream",
        "outputStream",
        "toByteArray",
        "workspace",
        "putInCollection",
        "COLLECTION",
        "fileName",
        "inputStream",
        "e",
        "logger",
        "error",
        "e",
        "e",
        "subtitleTrack",
        "subtitleFile",
        "subtitleFile",
        "workspace",
        "get",
        "subtitleTrack",
        "getURI",
        "ex",
        "subtitleTrack",
        "getURI",
        "ex",
        "subtitleTrack",
        "getURI",
        "subtitle",
        "fin",
        "subtitleFile",
        "subtitle",
        "parse",
        "fin",
        "e",
        "subtitleTrack",
        "getURI",
        "e",
        "subtitle",
        "subtitleFile",
        "time",
        "cue",
        "subtitleFile",
        "getCues",
        "start",
        "cue",
        "getStartTime",
        "end",
        "cue",
        "getEndTime",
        "cue",
        "setStartTime",
        "start",
        "time",
        "cue",
        "setEndTime",
        "end",
        "time"
    ],
    "literals": [
        "\"service.description=subtitle-timeshift Workflow Operation Handler\"",
        "\"workflow.operation=subtitle-timeshift\"",
        "\"subtitle-source-flavor\"",
        "\"video-source-flavor\"",
        "\"target-flavor\"",
        "\"subtitles\"",
        "\"Starting subtitle timeshift workflow for mediapackage: {}\"",
        "\"Couldn't parse subtitle-timeshift workflow configurations.\"",
        "\"No subtitle track found with flavor {}. Skipping subtitle-timeshift workflow operation \"",
        "\"for mediapackage {}\"",
        "\"Found %d video tracks with flavor %s in mediapackage %s \"",
        "\"for subtitle-timeshift operation. Expected exactly 1 video track. Please check you workflow \"",
        "\"configuration.\"",
        "\"Valid tracks found. Start shifting subtitle tracks by duration from video '{}'\"",
        "\"Error in subtitle-timeshift workflow while getting tracks for mediapackage {}\"",
        "\"timeshifted-\"",
        "\".vtt\"",
        "\"Added subtitle track with URI {} to mediapackage {}\"",
        "\"Error while shifting time of subtitle tracks for mediapackage {}\"",
        "\"Subtitle-Timeshift workflow operation for media package {} completed\"",
        "\"An exception occurred while parsing and saving a subtitle file to the workspace\"",
        "\"Can't read \"",
        "\"Workspace does not contain a track \"",
        "\"Couldn't parse subtitle file \""
    ],
    "variables": [
        "configuredSubtitleFlavor",
        "configuredVideoFlavor",
        "configuredTargetFlavor",
        "originalSubtitleTracks",
        "videoTrack",
        "subtitleFile",
        "subtitle"
    ],
    "comments": [
        "get flavor from workflow configuration",
        "In this block we try to get the subtitle and video track for this workflow",
        "Get the subtitles and videos from the mediapackage",
        "Check if we found the right amount of subtitles and videos",
        "Allowed are exactly 1 video track and at least 1 subtitle track",
        "if no subtitle track was found, we skip the workflow operation",
        "if the amount of video tracks is not 1, something is configured wrong and we throw an exception",
        "these subtitle tracks will be used to create the new subtitle tracks with the shifted timestamps",
        "this video track will be used to determine how much the subtitle tracks should be shifted",
        "In this block we try to create the new subtitle tracks and add them to the mediapackage",
        "load the subtitle file from workspace and parse it into a webvtt object",
        "shift the timestamps of the parsed webvtt object",
        "save the new subtitle file in the workspace to get a URI",
        "create a track object out of the subtitle URI",
        "save the new subtitle track to the mediapackage",
        "Get the subtitle file from workspace",
        "Next try to parse the file into a WebVTT Object"
    ],
    "docstrings": [
        "* Licensed to The Apereo Foundation under one or more contributor license\n * agreements. See the NOTICE file distributed with this work for additional\n * information regarding copyright ownership.\n *\n *\n * The Apereo Foundation licenses this file to you under the Educational\n * Community License, Version 2.0 (the \"License\"); you may not use this file\n * except in compliance with the License. You may obtain a copy of the License\n * at:\n *\n *   http://opensource.org/licenses/ecl2.txt\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the\n * License for the specific language governing permissions and limitations under\n * the License.\n *",
        "* This workflow operation allows to shift the timestamps of subtitle files.\n * For example: If someone adds a bumper/intro video in front of an already subtitled presenter track\n * the subtitles would start too early. With this operation, you can select a video and a subtitle track and the\n * timestamps of the subtitle file will be shifted backwards by the duration of the selected video.",
        "The workspace collection name",
        "The logging facility",
        "* Reference to the workspace service",
        "* OSGi setter for the workspace class\n   *\n   * @param workspace an instance of the workspace",
        "* Takes several parameter for the new subtitle file in and creates a track object from it.\n   *\n   * @param subtitleFile The new subtitle file that will be contained in the track.\n   * @param targetFlavor The future flavor of the new subtitle track.\n   * @param originalSubtitleTrack The original subtitle track.\n   * @return The subtitle file as a track.",
        "* Saves the subtitle object into the workspace and creates a file there.\n   *\n   * @param webVTTSubtitle The subtitle object.\n   * @param fileName The filname of the new subtitle file.\n   * @return The URI of the new subtitle file.\n   * @throws WorkflowOperationException when something went wrong in the parsing and saving process.",
        "* Loads a subtitle file from the workspace and parses it into a WebVTTSubtitle Object\n   *\n   * @param subtitleTrack The track we want to load\n   * @return The parsed webVTTSubtitle object\n   * @throws WorkflowOperationException when something went wrong in the parsing and loading process",
        "* Shifts all timestamps of a subtitle file by a given time.\n   *\n   * @param time Time in milliseconds by which all timestamps shall be shifted."
    ],
    "functions": [
        "setWorkspace",
        "WorkflowOperationResult",
        "start",
        "Track",
        "createNewTrackFromSubtitleUri",
        "URI",
        "saveSubtitleFileToWorkspace",
        "WebVTTSubtitle",
        "loadAndParseSubtitleFile",
        "shiftTime"
    ],
    "classes": [
        "SubtitleTimeshiftWorkflowOperationHandler"
    ]
}