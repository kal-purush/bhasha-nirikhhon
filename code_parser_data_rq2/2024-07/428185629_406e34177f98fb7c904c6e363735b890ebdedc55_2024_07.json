{
    "identifiers": [
        "pytest",
        "pytest_operator",
        "plugin",
        "OpsTest",
        "helpers",
        "find_unit",
        "sharding_tests",
        "helpers",
        "deploy_cluster_components",
        "integrate_cluster",
        "sharding_tests",
        "writes_helpers",
        "SHARD_ONE_DB_NAME",
        "SHARD_TWO_DB_NAME",
        "count_shard_writes",
        "stop_continous_writes",
        "SHARD_ONE_APP_NAME",
        "SHARD_TWO_APP_NAME",
        "SHARD_ONE_APP_NAME",
        "SHARD_TWO_APP_NAME",
        "CONFIG_SERVER_APP_NAME",
        "pytest",
        "mark",
        "group",
        "pytest",
        "mark",
        "abort_on_fail",
        "ops_test",
        "OpsTest",
        "CONFIG_SERVER_APP_NAME",
        "SHARD_ONE_APP_NAME",
        "SHARD_TWO_APP_NAME",
        "deploy_cluster_components",
        "ops_test",
        "num_units_cluster_config",
        "ops_test",
        "model",
        "wait_for_idle",
        "apps",
        "CLUSTER_COMPONENTS",
        "idle_period",
        "timeout",
        "TIMEOUT",
        "raise_on_blocked",
        "integrate_cluster",
        "ops_test",
        "ops_test",
        "model",
        "wait_for_idle",
        "apps",
        "CLUSTER_COMPONENTS",
        "status",
        "idle_period",
        "timeout",
        "TIMEOUT",
        "pytest",
        "mark",
        "skip",
        "pytest",
        "mark",
        "group",
        "pytest",
        "mark",
        "abort_on_fail",
        "ops_test",
        "OpsTest",
        "continuous_writes_to_shard_one",
        "continuous_writes_to_shard_two",
        "ops_test",
        "build_charm",
        "find_unit",
        "ops_test",
        "leader",
        "app_name",
        "CONFIG_SERVER_APP_NAME",
        "config_server_unit",
        "run_action",
        "action",
        "wait",
        "action",
        "status",
        "ops_test",
        "model",
        "applications",
        "CONFIG_SERVER_APP_NAME",
        "refresh",
        "path",
        "new_charm",
        "ops_test",
        "model",
        "wait_for_idle",
        "apps",
        "CONFIG_SERVER_APP_NAME",
        "timeout",
        "idle_period",
        "ops_test",
        "model",
        "applications",
        "CONFIG_SERVER_APP_NAME",
        "refresh",
        "path",
        "new_charm",
        "stop_continous_writes",
        "ops_test",
        "config_server_name",
        "CONFIG_SERVER_APP_NAME",
        "db_name",
        "SHARD_ONE_DB_NAME",
        "stop_continous_writes",
        "ops_test",
        "config_server_name",
        "CONFIG_SERVER_APP_NAME",
        "db_name",
        "SHARD_TWO_DB_NAME",
        "count_shard_writes",
        "ops_test",
        "CONFIG_SERVER_APP_NAME",
        "SHARD_ONE_DB_NAME",
        "count_shard_writes",
        "ops_test",
        "CONFIG_SERVER_APP_NAME",
        "SHARD_TWO_DB_NAME",
        "shard_one_actual_writes",
        "shard_one_expected_writes",
        "shard_two_actual_writes",
        "shard_two_expected_writes",
        "pytest",
        "mark",
        "skip",
        "pytest",
        "mark",
        "group",
        "pytest",
        "mark",
        "abort_on_fail",
        "ops_test",
        "OpsTest",
        "continuous_writes_to_shard_one",
        "continuous_writes_to_shard_two",
        "ops_test",
        "build_charm",
        "run_upgrade_sequence",
        "ops_test",
        "CONFIG_SERVER_APP_NAME",
        "new_charm",
        "find_unit",
        "ops_test",
        "leader",
        "app_name",
        "SHARD_ONE_APP_NAME",
        "shard_unit",
        "run_action",
        "action",
        "wait",
        "action",
        "status",
        "ops_test",
        "model",
        "applications",
        "SHARD_ONE_APP_NAME",
        "refresh",
        "path",
        "new_charm",
        "ops_test",
        "model",
        "wait_for_idle",
        "apps",
        "CONFIG_SERVER_APP_NAME",
        "timeout",
        "idle_period",
        "run_upgrade_sequence",
        "ops_test",
        "CONFIG_SERVER_APP_NAME",
        "new_charm",
        "stop_continous_writes",
        "ops_test",
        "config_server_name",
        "CONFIG_SERVER_APP_NAME",
        "db_name",
        "SHARD_ONE_DB_NAME",
        "stop_continous_writes",
        "ops_test",
        "config_server_name",
        "CONFIG_SERVER_APP_NAME",
        "db_name",
        "SHARD_TWO_DB_NAME",
        "count_shard_writes",
        "ops_test",
        "CONFIG_SERVER_APP_NAME",
        "SHARD_ONE_DB_NAME",
        "count_shard_writes",
        "ops_test",
        "CONFIG_SERVER_APP_NAME",
        "SHARD_TWO_DB_NAME",
        "shard_one_actual_writes",
        "shard_one_expected_writes",
        "shard_two_actual_writes",
        "shard_two_expected_writes",
        "ops_test",
        "OpsTest",
        "app_name",
        "new_charm",
        "find_unit",
        "ops_test",
        "leader",
        "app_name",
        "app_name",
        "leader_unit",
        "run_action",
        "action",
        "wait",
        "action",
        "status",
        "ops_test",
        "model",
        "applications",
        "app_name",
        "refresh",
        "path",
        "new_charm",
        "ops_test",
        "model",
        "wait_for_idle",
        "apps",
        "app_name",
        "timeout",
        "idle_period",
        "leader_unit",
        "run_action",
        "action",
        "wait",
        "action",
        "status",
        "ops_test",
        "model",
        "wait_for_idle",
        "apps",
        "app_name",
        "timeout",
        "idle_period"
    ],
    "literals": [
        "\"snap.charmed-mongodb.mongod.service\"",
        "\"snap.charmed-mongodb.mongos.service\"",
        "\"shard-one\"",
        "\"shard-two\"",
        "\"config-server\"",
        "\"sharding\"",
        "\"config-server\"",
        "\"active\"",
        "\"re-enable these tests once upgrades are available on charmhub\"",
        "\".\"",
        "\"pre-upgrade-check\"",
        "\"completed\"",
        "\"pre-upgrade-check failed, expected to succeed.\"",
        "\"number\"",
        "\"continuous writes to shard one failed during upgrade\"",
        "\"number\"",
        "\"continuous writes to shard two failed during upgrade\"",
        "\"re-enable these tests once upgrades are available on charmhub\"",
        "\".\"",
        "\"pre-upgrade-check\"",
        "\"completed\"",
        "\"pre-upgrade-check failed, expected to succeed.\"",
        "\"number\"",
        "\"continuous writes to shard one failed during upgrade\"",
        "\"number\"",
        "\"continuous writes to shard two failed during upgrade\"",
        "\"pre-upgrade-check\"",
        "\"completed\"",
        "\"pre-upgrade-check failed, expected to succeed.\"",
        "\"resume-upgrade\"",
        "\"completed\"",
        "\"resume-upgrade failed, expected to succeed.\""
    ],
    "variables": [
        "MONGOD_SERVICE",
        "MONGOS_SERVICE",
        "SHARD_ONE_APP_NAME",
        "SHARD_TWO_APP_NAME",
        "CONFIG_SERVER_APP_NAME",
        "SHARD_COMPONENTS",
        "CLUSTER_COMPONENTS",
        "SHARD_REL_NAME",
        "CONFIG_SERVER_REL_NAME",
        "TIMEOUT",
        "MEDIAN_REELECTION_TIME",
        "num_units_cluster_config",
        "new_charm",
        "config_server_unit",
        "action",
        "shard_one_expected_writes",
        "shard_two_expected_writes",
        "shard_one_actual_writes",
        "shard_two_actual_writes",
        "new_charm",
        "shard_unit",
        "action",
        "shard_one_expected_writes",
        "shard_two_expected_writes",
        "shard_one_actual_writes",
        "shard_two_actual_writes",
        "leader_unit",
        "action",
        "action"
    ],
    "comments": [
        "!/usr/bin/env python3",
        "Copyright 2024 Canonical Ltd.",
        "See LICENSE file for licensing details.",
        "instead of resuming upgrade refresh with the old version",
        "TODO: instead of using new_charm - use the one deployed on charmhub - cannot do this until",
        "the newest revision is published",
        "verify no writes were skipped during upgrade/rollback process",
        "after all shards have upgraded, verify that the balancer has been turned back on",
        "TODO implement this check once we have implemented the post-cluster-upgrade code DPE-4143",
        "instead of resuming upgrade refresh with the old version",
        "TODO: instead of using new_charm - use the one deployed on charmhub - cannot do this until",
        "the newest revision is published",
        "TODO: instead of using new_charm - use the one deployed on charmhub - cannot do this until",
        "the newest revision is published",
        "verify no writes were skipped during upgrade process",
        "after all shards have upgraded, verify that the balancer has been turned back on",
        "TODO implement this check once we have implemented the post-cluster-upgrade code DPE-4143"
    ],
    "docstrings": [
        "\"\"\"Build deploy, and integrate, a sharded cluster.\n\n    TODO: When upgrades are supported, deploy with most recent revision (6/stable when possible,\n    but 6/edge as soon as available)\n    \"\"\"",
        "\"\"\"Verify that the config-server can safely rollback without losing writes.\"\"\"",
        "\"\"\"Verify that a config-server and shard can safely rollback without losing writes.\"\"\"",
        "\"\"\"Runs the upgrade sequence on a given app.\"\"\""
    ],
    "functions": [
        "test_build_and_deploy",
        "test_rollback_on_config_server",
        "test_rollback_on_shard_and_config_server",
        "run_upgrade_sequence"
    ],
    "classes": []
}