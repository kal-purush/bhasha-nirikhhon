{
    "identifiers": [
        "org",
        "apache",
        "helix",
        "integration",
        "controller",
        "java",
        "util",
        "java",
        "util",
        "Collections",
        "java",
        "util",
        "java",
        "util",
        "java",
        "util",
        "java",
        "util",
        "java",
        "util",
        "java",
        "util",
        "java",
        "util",
        "UUID",
        "java",
        "util",
        "stream",
        "Collectors",
        "org",
        "apache",
        "helix",
        "ConfigAccessor",
        "org",
        "apache",
        "helix",
        "PropertyKey",
        "org",
        "apache",
        "helix",
        "PropertyPathBuilder",
        "org",
        "apache",
        "helix",
        "TestHelper",
        "org",
        "apache",
        "helix",
        "common",
        "ZkTestBase",
        "org",
        "apache",
        "helix",
        "examples",
        "LeaderStandbyStateModelFactory",
        "org",
        "apache",
        "helix",
        "integration",
        "manager",
        "ClusterControllerManager",
        "org",
        "apache",
        "helix",
        "integration",
        "manager",
        "MockParticipantManager",
        "org",
        "apache",
        "helix",
        "model",
        "BuiltInStateModelDefinitions",
        "org",
        "apache",
        "helix",
        "model",
        "ClusterConfig",
        "org",
        "apache",
        "helix",
        "model",
        "ControllerHistory",
        "org",
        "apache",
        "helix",
        "model",
        "ExternalView",
        "org",
        "apache",
        "helix",
        "model",
        "IdealState",
        "org",
        "apache",
        "helix",
        "model",
        "InstanceConfig",
        "org",
        "apache",
        "helix",
        "tools",
        "ClusterVerifiers",
        "BestPossibleExternalViewVerifier",
        "org",
        "apache",
        "helix",
        "tools",
        "ClusterVerifiers",
        "StrictMatchExternalViewVerifier",
        "org",
        "apache",
        "helix",
        "tools",
        "ClusterVerifiers",
        "ZkHelixClusterVerifier",
        "org",
        "testng",
        "Assert",
        "org",
        "testng",
        "annotations",
        "AfterClass",
        "org",
        "testng",
        "annotations",
        "BeforeClass",
        "org",
        "testng",
        "annotations",
        "Test",
        "START_PORT",
        "_nextStartPort",
        "START_PORT",
        "TEST_CAPACITY_KEY",
        "TEST_CAPACITY_VALUE",
        "RACK",
        "HOST",
        "APPLICATION_INSTANCE_ID",
        "MZ",
        "INIT_TOPOLOGY",
        "format",
        "RACK",
        "HOST",
        "MIGRATED_TOPOLOGY",
        "format",
        "MZ",
        "HOST",
        "APPLICATION_INSTANCE_ID",
        "INIT_ZONE_COUNT",
        "MIGRATE_ZONE_COUNT",
        "RESOURCE_COUNT",
        "INSTANCES_PER_RESOURCE",
        "PARTITIONS",
        "REPLICA",
        "DEFAULT_RESOURCE_DELAY_TIME",
        "CLASS_NAME",
        "getShortClassName",
        "CLUSTER_NAME",
        "CLUSTER_PREFIX",
        "CLASS_NAME",
        "_controller",
        "_participants",
        "_allDBs",
        "_clusterVerifier",
        "_configAccessor",
        "BeforeClass",
        "CLASS_NAME",
        "currentTimeMillis",
        "_gSetupTool",
        "addCluster",
        "CLUSTER_NAME",
        "controllerName",
        "CONTROLLER_PREFIX",
        "_controller",
        "ZK_ADDR",
        "CLUSTER_NAME",
        "controllerName",
        "_controller",
        "syncStart",
        "_configAccessor",
        "_gZkClient",
        "enablePersistBestPossibleAssignment",
        "_gZkClient",
        "CLUSTER_NAME",
        "setupClusterConfig",
        "INIT_TOPOLOGY",
        "RACK",
        "setupInitResourcesAndParticipants",
        "_clusterVerifier",
        "CLUSTER_NAME",
        "setZkAddr",
        "ZK_ADDR",
        "setResources",
        "_allDBs",
        "setWaitTillVerify",
        "TestHelper",
        "DEFAULT_REBALANCE_PROCESSING_WAIT_TIME",
        "build",
        "AfterClass",
        "db",
        "_allDBs",
        "_gSetupTool",
        "dropResourceFromCluster",
        "CLUSTER_NAME",
        "db",
        "Assert",
        "assertTrue",
        "_clusterVerifier",
        "verifyByPolling",
        "participant",
        "_participants",
        "participant",
        "syncStop",
        "_controller",
        "syncStop",
        "topology",
        "faultZoneType",
        "clusterConfig",
        "_configAccessor",
        "getClusterConfig",
        "CLUSTER_NAME",
        "clusterConfig",
        "stateTransitionCancelEnabled",
        "clusterConfig",
        "setDelayRebalaceEnabled",
        "clusterConfig",
        "setRebalanceDelayTime",
        "DEFAULT_RESOURCE_DELAY_TIME",
        "clusterConfig",
        "setTopology",
        "topology",
        "clusterConfig",
        "setFaultZoneType",
        "faultZoneType",
        "clusterConfig",
        "setTopologyAwareEnabled",
        "clusterConfig",
        "setInstanceCapacityKeys",
        "Collections",
        "singletonList",
        "TEST_CAPACITY_KEY",
        "clusterConfig",
        "setDefaultInstanceCapacityMap",
        "Collections",
        "singletonMap",
        "TEST_CAPACITY_KEY",
        "TEST_CAPACITY_VALUE",
        "clusterConfig",
        "setDefaultPartitionWeightMap",
        "Collections",
        "singletonMap",
        "TEST_CAPACITY_KEY",
        "_configAccessor",
        "setClusterConfig",
        "CLUSTER_NAME",
        "clusterConfig",
        "i",
        "i",
        "RESOURCE_COUNT",
        "i",
        "dbName",
        "i",
        "j",
        "j",
        "INSTANCES_PER_RESOURCE",
        "j",
        "participantName",
        "_nextStartPort",
        "instanceConfig",
        "setDomain",
        "format",
        "RACK",
        "j",
        "INIT_ZONE_COUNT",
        "HOST",
        "participantName",
        "addTag",
        "dbName",
        "build",
        "participantName",
        "_gSetupTool",
        "getClusterManagementTool",
        "addInstance",
        "CLUSTER_NAME",
        "instanceConfig",
        "participant",
        "createParticipant",
        "participantName",
        "participant",
        "syncStart",
        "_nextStartPort",
        "_participants",
        "add",
        "participant",
        "createResourceWithWagedRebalance",
        "CLUSTER_NAME",
        "dbName",
        "BuiltInStateModelDefinitions",
        "LeaderStandby",
        "name",
        "PARTITIONS",
        "REPLICA",
        "REPLICA",
        "setResourceGroupName",
        "dbName",
        "_gSetupTool",
        "getClusterManagementTool",
        "setResourceIdealState",
        "CLUSTER_NAME",
        "dbName",
        "_allDBs",
        "add",
        "dbName",
        "participantName",
        "participant",
        "ZK_ADDR",
        "CLUSTER_NAME",
        "participantName",
        "participant",
        "getStateMachineEngine",
        "registerStateModelFactory",
        "participant",
        "Test",
        "Assert",
        "assertTrue",
        "_clusterVerifier",
        "verifyByPolling",
        "originalEVs",
        "getEVs",
        "instanceConfigs",
        "_gSetupTool",
        "getClusterManagementTool",
        "getInstancesInCluster",
        "CLUSTER_NAME",
        "stream",
        "instanceName",
        "_gSetupTool",
        "getClusterManagementTool",
        "getInstanceConfig",
        "CLUSTER_NAME",
        "instanceName",
        "collect",
        "Collectors",
        "toList",
        "setAndVerifyMaintenanceMode",
        "setupClusterConfig",
        "MIGRATED_TOPOLOGY",
        "MZ",
        "migrateInstanceConfigTopology",
        "instanceConfigs",
        "setAndVerifyMaintenanceMode",
        "validateNoShufflingOccurred",
        "originalEVs",
        "updatingDb",
        "_allDBs",
        "preMigrationEVs",
        "getEVs",
        "setAndVerifyMaintenanceMode",
        "migrateDomainForResourceGroup",
        "updatingDb",
        "setAndVerifyMaintenanceMode",
        "validateNoShufflingOccurred",
        "preMigrationEVs",
        "updatingDb",
        "enable",
        "enable",
        "Assert",
        "assertTrue",
        "_clusterVerifier",
        "verifyByPolling",
        "_gSetupTool",
        "getClusterManagementTool",
        "manuallyEnableMaintenanceMode",
        "CLUSTER_NAME",
        "enable",
        "Collections",
        "emptyMap",
        "enable",
        "Assert",
        "assertTrue",
        "_clusterVerifier",
        "verifyByPolling",
        "externalViews",
        "db",
        "_allDBs",
        "externalViews",
        "put",
        "db",
        "_gSetupTool",
        "getClusterManagementTool",
        "getResourceExternalView",
        "CLUSTER_NAME",
        "db",
        "externalViews",
        "oldEV",
        "newEV",
        "oldEV",
        "newEV",
        "oldEVMap",
        "oldEV",
        "getRecord",
        "getMapFields",
        "newEVMap",
        "newEV",
        "getRecord",
        "getMapFields",
        "oldEVMap",
        "size",
        "newEVMap",
        "size",
        "partition",
        "oldEVMap",
        "keySet",
        "oldEVMap",
        "get",
        "partition",
        "equals",
        "newEVMap",
        "get",
        "partition",
        "originalEVs",
        "shouldShuffleDB",
        "updatedEVs",
        "getEVs",
        "db",
        "_allDBs",
        "db",
        "equals",
        "shouldShuffleDB",
        "Assert",
        "assertFalse",
        "compareExternalViews",
        "originalEVs",
        "get",
        "db",
        "updatedEVs",
        "get",
        "db",
        "format",
        "db",
        "Assert",
        "assertTrue",
        "compareExternalViews",
        "originalEVs",
        "get",
        "db",
        "updatedEVs",
        "get",
        "db",
        "format",
        "db",
        "instanceConfigs",
        "instanceConfig",
        "instanceConfigs",
        "rackId",
        "instanceConfig",
        "getDomainAsMap",
        "get",
        "RACK",
        "hostId",
        "instanceConfig",
        "getDomainAsMap",
        "get",
        "HOST",
        "newDomain",
        "format",
        "MZ",
        "rackId",
        "HOST",
        "hostId",
        "APPLICATION_INSTANCE_ID",
        "hostId",
        "instanceConfig",
        "setDomain",
        "newDomain",
        "_gSetupTool",
        "getClusterManagementTool",
        "setInstanceConfig",
        "CLUSTER_NAME",
        "instanceConfig",
        "getInstanceName",
        "instanceConfig",
        "resourceGroup",
        "instanceIndex",
        "participant",
        "_participants",
        "instanceConfig",
        "_gSetupTool",
        "getClusterManagementTool",
        "getInstanceConfig",
        "CLUSTER_NAME",
        "participant",
        "getInstanceName",
        "instanceConfig",
        "containsTag",
        "resourceGroup",
        "newDomain",
        "instanceConfig",
        "getDomainAsMap",
        "newDomain",
        "put",
        "MZ",
        "valueOf",
        "instanceIndex",
        "MIGRATE_ZONE_COUNT",
        "newDomain",
        "put",
        "APPLICATION_INSTANCE_ID",
        "UUID",
        "randomUUID",
        "toString",
        "instanceConfig",
        "setDomain",
        "newDomain",
        "_gSetupTool",
        "getClusterManagementTool",
        "setInstanceConfig",
        "CLUSTER_NAME",
        "participant",
        "getInstanceName",
        "instanceConfig",
        "instanceIndex"
    ],
    "literals": [
        "\"TestCapacityKey\"",
        "\"rack\"",
        "\"host\"",
        "\"applicationInstanceId\"",
        "\"mz\"",
        "\"/%s/%s\"",
        "\"/%s/%s/%s\"",
        "\"_\"",
        "\"START \"",
        "\" at \"",
        "\"_0\"",
        "\"TestDB_\"",
        "\"localhost_\"",
        "\"%s=%s, %s=%s\"",
        "\"LeaderStandby\"",
        "\"\"",
        "\"Expected shuffling didn't occur for database %s\"",
        "\"Unexpected shuffling occurred for database %s\"",
        "\"%s=%s, %s=%s, %s=%s\""
    ],
    "variables": [
        "_controller",
        "_clusterVerifier",
        "_configAccessor"
    ],
    "comments": [
        "Starting port for mock participants",
        "Incremental port for participants",
        "Default instance capacity for testing",
        "Rack identifier in topology",
        "Host identifier in topology",
        "Migrated zone identifier",
        "Initial topology format",
        "New topology format",
        "Initial zone count",
        "Zone count post-migration",
        "Number of resources in the cluster",
        "Number of instances per resource",
        "Number of partitions",
        "Number of replicas",
        "Delay time for resource rebalance",
        "Test class name",
        "Cluster name for testing",
        "Cluster controller instance",
        "List of participant managers",
        "Set of all databases",
        "Cluster verifier",
        "Config accessor",
        "Start cluster controller",
        "Set up cluster configuration and participants",
        "Initialize cluster verifier for validating state",
        "Drop all databases from the cluster",
        "Stop all participants and controller",
        "Create and start participants for the resource",
        "Set up IdealState for the resource",
        "Step 1: Migrate to new topology in maintenance mode",
        "Verify cluster did not have shuffling anywhere after",
        "the migration to the new topology",
        "Step 2: Update domain values for one resource group at a time",
        "Verify cluster only had shuffling in the resource group that was updated",
        "Check that the cluster converged to the best possible state that should be calculated",
        "by the controller before we change the maintenance mode.",
        "Check that the cluster converged to the best possible state that should be calculated",
        "by the controller after we have changed the maintenance mode.",
        "Set new domain based on the new topology format",
        "Update the instance configuration in the cluster"
    ],
    "docstrings": [
        "* Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.",
        "* Sets up the test cluster and initializes participants before running tests.",
        "* Cleans up after the test by stopping participants and dropping resources.",
        "* Sets up the cluster configuration with the given topology and fault zone type.",
        "* Sets up initial resources and mock participants for the cluster.",
        "* Creates and starts a mock participant with a registered state model factory.",
        "* Tests topology migration with and without domain updates, ensuring no shuffling occurs.",
        "* Set MaintenanceMode and verify that controller has processed it.",
        "* Retrieves the ExternalViews for all databases in the cluster.",
        "* Compares the contents of two ExternalViews to determine if they are equal."
    ],
    "functions": [
        "beforeClass",
        "afterClass",
        "setupClusterConfig",
        "setupInitResourcesAndParticipants",
        "MockParticipantManager",
        "createParticipant",
        "testTopologyMigrationByResourceGroup",
        "setAndVerifyMaintenanceMode",
        "getEVs",
        "compareExternalViews",
        "validateNoShufflingOccurred",
        "migrateInstanceConfigTopology",
        "migrateDomainForResourceGroup"
    ],
    "classes": [
        "TestTopologyMigration"
    ]
}