{
    "identifiers": [
        "docopt",
        "docopt",
        "imageio",
        "imread",
        "imwrite",
        "logging",
        "logging",
        "config",
        "logging",
        "handlers",
        "multiprocessing",
        "Process",
        "numpy",
        "np",
        "os",
        "skimage",
        "draw",
        "line_aa",
        "skimage",
        "exposure",
        "is_low_contrast",
        "skimage",
        "feature",
        "canny",
        "skimage",
        "filters",
        "threshold_otsu",
        "skimage",
        "morphology",
        "binary_dilation",
        "skimage",
        "transform",
        "downscale_local_mean",
        "probabilistic_hough_line",
        "skimage",
        "util",
        "crop",
        "sys",
        "threading",
        "time",
        "x",
        "x",
        "x",
        "x",
        "a",
        "a",
        "sum",
        "q",
        "q",
        "get",
        "record",
        "logging",
        "getLogger",
        "record",
        "name",
        "logger",
        "handle",
        "record",
        "np",
        "vectorize",
        "grey",
        "np",
        "vectorize",
        "bool_to_255",
        "np",
        "deg2rad",
        "np",
        "arange",
        "np",
        "deg2rad",
        "np",
        "deg2rad",
        "hough_prec",
        "np",
        "arange",
        "np",
        "deg2rad",
        "np",
        "deg2rad",
        "hough_prec",
        "np",
        "concatenate",
        "hough_theta_v",
        "hough_theta_h",
        "docopt",
        "__doc__",
        "version",
        "VERSION",
        "logging",
        "config",
        "dictConfig",
        "logd",
        "threading",
        "target",
        "logger_thread",
        "args",
        "logq",
        "lp",
        "start",
        "logging",
        "getLogger",
        "logging",
        "getLogger",
        "os",
        "mkdir",
        "OSError",
        "f",
        "arguments",
        "FILE",
        "os",
        "path",
        "basename",
        "f",
        "logger",
        "info",
        "f",
        "imread",
        "f",
        "page",
        "ndim",
        "logger",
        "debug",
        "page",
        "page",
        "shape",
        "logger",
        "debug",
        "format",
        "filename",
        "page",
        "shape",
        "crop",
        "page",
        "is_low_contrast",
        "pos",
        "logger",
        "debug",
        "format",
        "filename",
        "pos",
        "np",
        "apply_along_axis",
        "sum",
        "neg",
        "vsums",
        "argmax",
        "pos",
        "max",
        "row",
        "min",
        "row",
        "pageh",
        "binary_dilation",
        "canny",
        "cropped",
        "greyf",
        "edges",
        "probabilistic_hough_line",
        "edges",
        "line_length",
        "pagew",
        "line_gap",
        "theta",
        "hough_theta_h",
        "x0",
        "y0",
        "x1",
        "y1",
        "lines",
        "x1",
        "x0",
        "hangles",
        "append",
        "np",
        "rad2deg",
        "np",
        "math",
        "atan2",
        "k",
        "y1",
        "y0",
        "k",
        "x1",
        "x0",
        "line_aa",
        "c0",
        "x0",
        "r0",
        "y0",
        "c1",
        "x1",
        "r1",
        "y1",
        "k",
        "v",
        "val",
        "rr",
        "k",
        "cc",
        "k",
        "v",
        "hedgesg",
        "rr",
        "k",
        "cc",
        "k",
        "v",
        "np",
        "apply_along_axis",
        "sum",
        "neg",
        "hsums",
        "argmax",
        "pos",
        "max",
        "col",
        "min",
        "col",
        "pageh",
        "canny",
        "cropped",
        "binary_dilation",
        "c",
        "greyf",
        "edges",
        "probabilistic_hough_line",
        "edges",
        "line_length",
        "pageh",
        "line_gap",
        "theta",
        "hough_theta_v",
        "x0",
        "y0",
        "x1",
        "y1",
        "lines",
        "y1",
        "y0",
        "vangles",
        "append",
        "np",
        "rad2deg",
        "np",
        "math",
        "atan2",
        "k",
        "y1",
        "y0",
        "k",
        "x1",
        "x0",
        "line_aa",
        "c0",
        "x0",
        "r0",
        "y0",
        "c1",
        "x1",
        "r1",
        "y1",
        "k",
        "v",
        "val",
        "rr",
        "k",
        "cc",
        "k",
        "v",
        "vedgesg",
        "rr",
        "k",
        "cc",
        "k",
        "v",
        "hangles",
        "vsums",
        "row",
        "hsums",
        "col",
        "np",
        "median",
        "hangles",
        "imwrite",
        "format",
        "filename",
        "a",
        "hedgesg",
        "logger",
        "debug",
        "format",
        "filename",
        "a",
        "vangles",
        "np",
        "median",
        "vangles",
        "imwrite",
        "format",
        "filename",
        "a",
        "vedgesg",
        "logger",
        "debug",
        "format",
        "filename",
        "a",
        "imwrite",
        "format",
        "filename",
        "hedgesg",
        "logger",
        "debug",
        "format",
        "filename",
        "imwrite",
        "format",
        "filename",
        "vedgesg",
        "logger",
        "debug",
        "format",
        "filename",
        "downscale_local_mean",
        "neg",
        "threshold_otsu",
        "small",
        "binary_dilation",
        "small",
        "t",
        "np",
        "ones",
        "canny",
        "dilated",
        "greyf",
        "edges",
        "probabilistic_hough_line",
        "edges",
        "line_length",
        "pageh",
        "line_gap",
        "theta",
        "hough_theta_hv",
        "x_0",
        "y_0",
        "x_1",
        "y_1",
        "lines",
        "abs",
        "x_1",
        "x_0",
        "abs",
        "y_1",
        "y_0",
        "x_0",
        "y_0",
        "x_1",
        "y_1",
        "y_0",
        "x_0",
        "y_1",
        "x_1",
        "x1",
        "x0",
        "np",
        "rad2deg",
        "np",
        "math",
        "atan2",
        "k",
        "y1",
        "y0",
        "k",
        "x1",
        "x0",
        "a",
        "angles",
        "append",
        "a",
        "line_aa",
        "c0",
        "x_0",
        "r0",
        "y_0",
        "c1",
        "x_1",
        "r1",
        "y_1",
        "k",
        "v",
        "val",
        "rr",
        "k",
        "cc",
        "k",
        "v",
        "edgesg",
        "rr",
        "k",
        "cc",
        "k",
        "v",
        "angles",
        "np",
        "mean",
        "angles",
        "a",
        "imwrite",
        "format",
        "filename",
        "a",
        "edgesg",
        "imwrite",
        "format",
        "filename",
        "a",
        "bool_to_255f",
        "dilated",
        "logger",
        "debug",
        "format",
        "filename",
        "a",
        "np",
        "median",
        "angles",
        "imwrite",
        "format",
        "filename",
        "dilated",
        "imwrite",
        "format",
        "filename",
        "edges",
        "logger",
        "debug",
        "format",
        "filename",
        "logger_csv",
        "info",
        "format",
        "f",
        "angle",
        "np",
        "angles",
        "angles",
        "pagew",
        "pageh",
        "logq",
        "put",
        "lp",
        "join"
    ],
    "literals": [
        "\"hough 0.2\"",
        "\"__main__\"",
        "\"version\"",
        "\"formatters\"",
        "\"detailed\"",
        "\"class\"",
        "\"logging.Formatter\"",
        "\"format\"",
        "\"%(asctime)s %(name)-15s %(levelname)-8s %(processName)-10s %(message)s\"",
        "\"raw\"",
        "\"class\"",
        "\"logging.Formatter\"",
        "\"format\"",
        "\"%(message)s\"",
        "\"handlers\"",
        "\"console\"",
        "\"class\"",
        "\"logging.StreamHandler\"",
        "\"level\"",
        "\"INFO\"",
        "\"file\"",
        "\"class\"",
        "\"logging.FileHandler\"",
        "\"filename\"",
        "\"hough.log\"",
        "\"mode\"",
        "\"w\"",
        "\"formatter\"",
        "\"detailed\"",
        "\"csv\"",
        "\"class\"",
        "\"logging.FileHandler\"",
        "\"filename\"",
        "\"results.csv\"",
        "\"mode\"",
        "\"w\"",
        "\"formatter\"",
        "\"raw\"",
        "\"loggers\"",
        "\"csv\"",
        "\"handlers\"",
        "\"csv\"",
        "\"root\"",
        "\"level\"",
        "\"DEBUG\"",
        "\"handlers\"",
        "\"console\"",
        "\"file\"",
        "\"hough\"",
        "\"csv\"",
        "\"out\"",
        "f\"Processing {f}\"",
        "\"Multichannel - extracting 2nd channel\"",
        "\"{} - {}\"",
        "\"{} - low contrast - blank page?\"",
        "\"out/{}_{}_hlines.png\"",
        "\"{}  Hough H angle: {} deg (median)\"",
        "\"out/{}_{}_vlines.png\"",
        "\"{}  Hough V angle: {} deg (median)\"",
        "\"out/{}_no_hlines.png\"",
        "\"{}  FAILED horizontal Hough\"",
        "\"out/{}_no_vlines.png\"",
        "\"{}  FAILED vertical Hough\"",
        "\"H\"",
        "\"V\"",
        "\"out/{}_{}_lines_vertical.png\"",
        "\"out/{}_{}_lines_verticaldilated.png\"",
        "\"{}  angle vertical: {} deg (mean)  {} deg (median)\"",
        "\"out/{}_dilated.png\"",
        "\"out/{}_dilate_edges.png\"",
        "\"{}  FAILED vertical\"",
        "'\"{}\",{},{},{},{}'",
        "\"\"",
        "\"\""
    ],
    "variables": [
        "VERSION",
        "record",
        "logger",
        "greyf",
        "bool_to_255f",
        "hough_prec",
        "hough_theta_h",
        "hough_theta_v",
        "hough_theta_hv",
        "arguments",
        "logq",
        "logd",
        "lp",
        "logger",
        "logger_csv",
        "filename",
        "page",
        "page",
        "pageh",
        "pagew",
        "pos",
        "angles",
        "angle",
        "neg",
        "vsums",
        "row",
        "cropped",
        "edges",
        "hedgesg",
        "lines",
        "hangles",
        "k",
        "rr",
        "cc",
        "val",
        "hedgesg",
        "hsums",
        "col",
        "cropped",
        "c",
        "edges",
        "vedgesg",
        "lines",
        "vangles",
        "k",
        "rr",
        "cc",
        "val",
        "vedgesg",
        "angle",
        "a",
        "angle",
        "a",
        "small",
        "t",
        "dilated",
        "edges",
        "edgesg",
        "lines",
        "angles",
        "dir",
        "x0",
        "y0",
        "x1",
        "y1",
        "dir",
        "x0",
        "y0",
        "x1",
        "y1",
        "k",
        "a",
        "rr",
        "cc",
        "val",
        "edgesg",
        "a",
        "angle"
    ],
    "comments": [
        "!/usr/bin/env python3",
        "-*- coding: utf-8 -*-",
        "This file is part of \"hough\", which detects skew angles in scanned images",
        "Copyright (C) 2016-2020 Toby Thain, toby@telegraphics.com.au",
        "",
        "This program is free software; you can redistribute it and/or modify",
        "it under the terms of the GNU General Public License as published by",
        "the Free Software Foundation; either version 2 of the License, or",
        "(at your option) any later version.",
        "",
        "This program is distributed in the hope that it will be useful,",
        "but WITHOUT ANY WARRANTY; without even the implied warranty of",
        "MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the",
        "GNU General Public License for more details.",
        "",
        "You should have received a copy of the GNU General Public License",
        "along with this program; if not, write to the Free Software",
        "Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA",
        "probably RGB",
        "extract green channel",
        "Remove about 1/4\" from page margin, because this is often dirty",
        "due to skewing",
        "----------",
        "find row with maximum sum - this should pass thru the centre of the horizontal rule",
        "Detect edges",
        "This dilation is dangerous if it's going to touch the page edges,",
        "since then a lot of 0/90° lines will be found, likely ruining the results.",
        "Now try Hough transform",
        "Ensure line is moving rightwards",
        "----------",
        "find col with maximum sum - this should pass thru the centre of a vertical rule",
        "Detect edges",
        "Now try Hough transform",
        "Ensure line is moving upwards",
        "----------",
        "If we didn't find a good feature at the horizontal sum peak,",
        "let's brutally dilate everything and look for a vertical margin",
        "Now try Hough transform",
        "angle is <= π/4 from horizontal or vertical",
        "flip angle so that X delta is positive (East quadrants).",
        "Zero angles are suspicious -- could be a cropping margin. If not, they don't add information anyway.",
        "logger.debut(\"{}  line: {} {}   {},{} - {},{}\".format(filename, a, dir, x_0, y_0, x_1, y_1))",
        "end logging thread"
    ],
    "docstrings": [
        "\"\"\"hough - straighten scanned pages using the Hough transform.\n\nUsage:\n  hough [-hv] FILE ...\n\nArguments:\n  FILE              Input file(s) to process\n\nOptions:\n  -h --help         Display this help and exit\n  --version         Display the version number and exit\n  -v --verbose      print status messages\n\n\"\"\""
    ],
    "functions": [
        "grey",
        "bool_to_255",
        "sum",
        "logger_thread"
    ],
    "classes": []
}