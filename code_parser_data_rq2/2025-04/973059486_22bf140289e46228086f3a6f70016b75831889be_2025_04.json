{
    "identifiers": [
        "cv2",
        "matplotlib",
        "pyplot",
        "plt",
        "numpy",
        "np",
        "os",
        "PIL",
        "Image",
        "ImageDraw",
        "sys",
        "tqdm",
        "csv",
        "commons",
        "show_image",
        "mediapipe",
        "python",
        "solutions",
        "drawing_utils",
        "mp_drawing",
        "mediapipe",
        "python",
        "solutions",
        "pose",
        "mp_pose",
        "images_in_folder",
        "images_out_folder",
        "csvs_out_path",
        "images_in_folder",
        "images_out_folder",
        "csvs_out_path",
        "sorted",
        "n",
        "n",
        "os",
        "listdir",
        "_images_in_folder",
        "n",
        "startswith",
        "per_pose_class_limit",
        "pose_class_name",
        "_pose_class_names",
        "pose_class_name",
        "file",
        "sys",
        "stderr",
        "os",
        "path",
        "join",
        "_images_in_folder",
        "pose_class_name",
        "os",
        "path",
        "join",
        "_images_out_folder",
        "pose_class_name",
        "_csvs_out_path",
        "open",
        "csv_out_path",
        "newline",
        "csv_out_file",
        "csv",
        "writer",
        "csv_out_file",
        "delimiter",
        "quoting",
        "csv",
        "QUOTE_MINIMAL",
        "sorted",
        "n",
        "n",
        "os",
        "listdir",
        "images_in_folder",
        "n",
        "startswith",
        "per_pose_class_limit",
        "image_names",
        "per_pose_class_limit",
        "image_name",
        "tqdm",
        "tqdm",
        "image_names",
        "cv2",
        "imread",
        "os",
        "path",
        "join",
        "images_in_folder",
        "image_name",
        "cv2",
        "cvtColor",
        "input_frame",
        "cv2",
        "COLOR_BGR2RGB",
        "mp_pose",
        "Pose",
        "pose_tracker",
        "pose_tracker",
        "process",
        "image",
        "input_frame",
        "result",
        "pose_landmarks",
        "input_frame",
        "copy",
        "pose_landmarks",
        "output_frame",
        "shape",
        "output_frame",
        "shape",
        "i",
        "lmk",
        "pose_landmarks",
        "landmark",
        "i",
        "pose_landmarks2",
        "append",
        "lmk",
        "x",
        "frame_width",
        "pose_landmarks2",
        "append",
        "lmk",
        "y",
        "frame_height",
        "pose_landmarks2",
        "append",
        "lmk",
        "z",
        "frame_width",
        "np",
        "array",
        "pose_landmarks2",
        "dtype",
        "np",
        "float32",
        "np",
        "array",
        "lmk",
        "x",
        "frame_width",
        "lmk",
        "y",
        "frame_height",
        "lmk",
        "z",
        "frame_width",
        "lmk",
        "pose_landmarks",
        "landmark",
        "dtype",
        "np",
        "float32",
        "pose_landmarks",
        "shape",
        "format",
        "pose_landmarks",
        "shape",
        "csv_out_writer",
        "writerow",
        "image_name",
        "pose_landmarks2",
        "flatten",
        "astype",
        "np",
        "tolist",
        "output_frame",
        "pose_landmarks",
        "r",
        "color",
        "output_frame",
        "shape",
        "output_frame",
        "shape",
        "Image",
        "frame_width",
        "frame_height",
        "color",
        "pose_landmarks",
        "np",
        "asarray",
        "img",
        "r",
        "frame_width",
        "ImageDraw",
        "Draw",
        "img",
        "idx_1",
        "idx_2",
        "mp_pose",
        "POSE_CONNECTIONS",
        "pose_landmarks",
        "idx_1",
        "frame_height",
        "pose_landmarks",
        "idx_2",
        "frame_height",
        "draw",
        "ellipse",
        "x1",
        "r",
        "z1",
        "r",
        "x1",
        "r",
        "z1",
        "r",
        "fill",
        "color",
        "draw",
        "ellipse",
        "x2",
        "r",
        "z2",
        "r",
        "x2",
        "r",
        "z2",
        "r",
        "fill",
        "color",
        "draw",
        "line",
        "x1",
        "z1",
        "x2",
        "z2",
        "width",
        "r",
        "fill",
        "color",
        "np",
        "asarray",
        "img",
        "print_removed_items",
        "pose_class_name",
        "_pose_class_names",
        "os",
        "path",
        "join",
        "_images_out_folder",
        "pose_class_name",
        "os",
        "path",
        "join",
        "_csvs_out_folder",
        "pose_class_name",
        "open",
        "csv_out_path",
        "csv_out_file",
        "csv",
        "reader",
        "csv_out_file",
        "delimiter",
        "row",
        "csv_out_reader",
        "rows",
        "append",
        "row",
        "open",
        "csv_out_path",
        "csv_out_file",
        "csv",
        "writer",
        "csv_out_file",
        "delimiter",
        "quoting",
        "csv",
        "QUOTE_MINIMAL",
        "row",
        "rows",
        "row",
        "os",
        "path",
        "join",
        "images_out_folder",
        "image_name",
        "os",
        "path",
        "exists",
        "image_path",
        "image_names_in_csv",
        "append",
        "image_name",
        "csv_out_writer",
        "writerow",
        "row",
        "print_removed_items",
        "image_path",
        "image_name",
        "os",
        "listdir",
        "images_out_folder",
        "image_name",
        "image_names_in_csv",
        "os",
        "path",
        "join",
        "images_out_folder",
        "image_name",
        "os",
        "remove",
        "image_path",
        "print_removed_items",
        "image_path",
        "outliers",
        "outlier",
        "outliers",
        "os",
        "path",
        "join",
        "_images_out_folder",
        "outlier",
        "sample",
        "class_name",
        "outlier",
        "sample",
        "name",
        "image_path",
        "outlier",
        "sample",
        "class_name",
        "outlier",
        "detected_class",
        "outlier",
        "all_classes",
        "cv2",
        "imread",
        "image_path",
        "cv2",
        "cvtColor",
        "img",
        "cv2",
        "COLOR_BGR2RGB",
        "show_image",
        "img",
        "figsize",
        "outliers",
        "outlier",
        "outliers",
        "os",
        "path",
        "join",
        "_images_out_folder",
        "outlier",
        "sample",
        "class_name",
        "outlier",
        "sample",
        "name",
        "os",
        "remove",
        "image_path",
        "_print_images_statistics",
        "_images_in_folder",
        "_pose_class_names",
        "_print_images_statistics",
        "_images_out_folder",
        "_pose_class_names",
        "images_folder",
        "pose_class_names",
        "pose_class_name",
        "pose_class_names",
        "len",
        "n",
        "n",
        "os",
        "listdir",
        "os",
        "path",
        "join",
        "images_folder",
        "pose_class_name",
        "n",
        "startswith",
        "format",
        "pose_class_name",
        "n_images"
    ],
    "literals": [
        "'.'",
        "'Bootstrapping '",
        "'w'",
        "''",
        "','",
        "'.'",
        "'Unexpected landmarks shape: {}'",
        "'red'",
        "'RGB'",
        "'white'",
        "'.csv'",
        "','",
        "'w'",
        "','",
        "'Removed image from CSV: '",
        "'Removed image from folder: '",
        "'Outlier'",
        "'  sample path =    '",
        "'  sample class =   '",
        "'  detected class = '",
        "'  all classes =    '",
        "'Number of images per pose class:'",
        "'.'",
        "'  {}: {}'"
    ],
    "variables": [
        "_images_in_folder",
        "_images_out_folder",
        "_csvs_out_path",
        "_pose_class_names",
        "images_in_folder",
        "images_out_folder",
        "csv_out_path",
        "csv_out_writer",
        "image_names",
        "image_names",
        "input_frame",
        "input_frame",
        "result",
        "pose_landmarks",
        "output_frame",
        "frame_height",
        "frame_width",
        "pose_landmarks2",
        "pose_landmarks2",
        "pose_landmarks",
        "frame_height",
        "frame_width",
        "img",
        "draw",
        "x1",
        "y1",
        "z1",
        "x2",
        "y2",
        "z2",
        "images_out_folder",
        "csv_out_path",
        "rows",
        "csv_out_reader",
        "image_names_in_csv",
        "csv_out_writer",
        "image_name",
        "image_path",
        "image_path",
        "image_path",
        "img",
        "img",
        "image_path",
        "n_images"
    ],
    "comments": [
        "Get list of pose classes and print image statistics.",
        "Create output folder for CVSs.",
        "Paths for the pose class.",
        "Get list of images.",
        "Bootstrap every image.",
        "Load image.",
        "Initialize fresh pose tracker and run it.",
        "Save image with pose prediction (if pose was detected).",
        "Save landmarks if pose was detected.",
        "Get landmarks.",
        "Draw XZ projection and concatenate with the image.",
        "Scale radius according to the image width.",
        "Flip Z and move hips center to the center of the image.",
        "Paths for the pose class.",
        "Read CSV into memory.",
        "Image names left in CSV.",
        "Re-write the CSV removing lines without corresponding images.",
        "Remove images without corresponding line in CSV."
    ],
    "docstrings": [
        "\"\"\"Helps to bootstrap images and filter pose samples for classification.\"\"\"",
        "\"\"\"Bootstraps images in a given folder.\n    \n    Required image in folder (same use for image out folder):\n      pushups_up/\n        image_001.jpg\n        image_002.jpg\n        ...\n      pushups_down/\n        image_001.jpg\n        image_002.jpg\n        ...\n      ...\n\n    Produced CSVs out folder:\n      pushups_up.csv\n      pushups_down.csv\n\n    Produced CSV structure with pose 3D landmarks:\n      sample_00001,x1,y1,z1,x2,y2,z2,....\n      sample_00002,x1,y1,z1,x2,y2,z2,....\n    \"\"\"",
        "\"\"\"if not os.path.exists(self._csvs_out_folder):\n      os.makedirs(self._csvs_out_folder)\"\"\"",
        "\"\"\"if not os.path.exists(images_out_folder):\n        os.makedirs(images_out_folder)\"\"\"",
        "\"\"\"if pose_landmarks is not None:\n            mp_drawing.draw_landmarks(\n                image=output_frame,\n                landmark_list=pose_landmarks,\n                connections=mp_pose.POSE_CONNECTIONS)\n          output_frame = cv2.cvtColor(output_frame, cv2.COLOR_RGB2BGR)\n          cv2.imwrite(os.path.join(self._images_out_folder, image_name), output_frame)\"\"\"",
        "\"\"\"# Get landmarks.\n            frame_height, frame_width = output_frame.shape[0], output_frame.shape[1]\n            pose_landmarks2 = np.array(\n                [[lmk.x * frame_width, lmk.y * frame_height]\n                 for lmk in pose_landmarks.landmark],\n                dtype=np.float32)\n            assert pose_landmarks2.shape == (33, 2), 'Unexpected landmarks shape: {}'.format(pose_landmarks2.shape)\n            csv_out_writer.writerow(pose_landmarks2.flatten().astype(np.str).tolist())\n\n            pose_landmarks = np.array(\n                [[lmk.x * frame_width, lmk.y * frame_height, lmk.z * frame_width]\n                 for lmk in pose_landmarks.landmark],\n                dtype=np.float32)\n\n            assert pose_landmarks.shape == (33, 3), 'Unexpected landmarks shape: {}'.format(pose_landmarks.shape)\n            csv_out_writer.writerow(pose_landmarks.flatten().astype(np.str).tolist())\"\"\"",
        "\"\"\"projection_xz = self._draw_xz_projection(\n              output_frame=output_frame, pose_landmarks=pose_landmarks)\n          output_frame = np.concatenate((output_frame, projection_xz), axis=1)\"\"\"",
        "\"\"\"Makes sure that image folders and CSVs have the same sample.\n    \n    Leaves only intersetion of samples in both image folders and CSVs.\n    \"\"\"",
        "\"\"\"Classifies each sample agains all other to find outliers.\n    \n    If sample is classified differrrently than the original class - it sould\n    either be deleted or more similar samples should be aadded.\n    \"\"\"",
        "\"\"\"Removes outliers from the image folders.\"\"\"",
        "\"\"\"Prints statistics from the input image folder.\"\"\"",
        "\"\"\"Prints statistics from the output image folder.\"\"\""
    ],
    "functions": [
        "bootstrap",
        "_draw_xz_projection",
        "align_images_and_csvs",
        "analyze_outliers",
        "remove_outliers",
        "print_images_in_statistics",
        "print_images_out_statistics",
        "_print_images_statistics"
    ],
    "classes": [
        "BootstrapHelper"
    ]
}