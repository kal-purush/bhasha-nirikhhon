{
    "identifiers": [
        "org",
        "folio",
        "service",
        "orders",
        "io",
        "vertx",
        "core",
        "Future",
        "io",
        "vertx",
        "core",
        "json",
        "JsonObject",
        "org",
        "apache",
        "commons",
        "collections4",
        "CollectionUtils",
        "org",
        "apache",
        "commons",
        "lang3",
        "StringUtils",
        "org",
        "apache",
        "logging",
        "log4j",
        "LogManager",
        "org",
        "apache",
        "logging",
        "log4j",
        "Logger",
        "org",
        "folio",
        "HttpStatus",
        "org",
        "folio",
        "helper",
        "PoNumberHelper",
        "org",
        "folio",
        "helper",
        "PurchaseOrderLineHelper",
        "org",
        "folio",
        "okapi",
        "common",
        "GenericCompositeFuture",
        "org",
        "folio",
        "orders",
        "utils",
        "AcqDesiredPermissions",
        "org",
        "folio",
        "orders",
        "utils",
        "HelperUtils",
        "org",
        "folio",
        "orders",
        "utils",
        "PoLineCommonUtil",
        "org",
        "folio",
        "orders",
        "utils",
        "ProtectedOperationType",
        "org",
        "folio",
        "rest",
        "core",
        "exceptions",
        "ErrorCodes",
        "org",
        "folio",
        "rest",
        "core",
        "exceptions",
        "HttpException",
        "org",
        "folio",
        "rest",
        "core",
        "models",
        "RequestContext",
        "org",
        "folio",
        "rest",
        "jaxrs",
        "model",
        "CompositePoLine",
        "org",
        "folio",
        "rest",
        "jaxrs",
        "model",
        "CompositePurchaseOrder",
        "org",
        "folio",
        "rest",
        "jaxrs",
        "model",
        "org",
        "folio",
        "rest",
        "jaxrs",
        "model",
        "Parameter",
        "org",
        "folio",
        "rest",
        "jaxrs",
        "model",
        "PoLine",
        "org",
        "folio",
        "service",
        "PrefixService",
        "org",
        "folio",
        "service",
        "ProtectionService",
        "org",
        "folio",
        "service",
        "SuffixService",
        "org",
        "folio",
        "service",
        "caches",
        "ConfigurationEntriesCache",
        "org",
        "folio",
        "service",
        "orders",
        "flows",
        "update",
        "unopen",
        "UnOpenCompositeOrderManager",
        "org",
        "folio",
        "service",
        "organization",
        "OrganizationService",
        "java",
        "util",
        "java",
        "util",
        "Collection",
        "java",
        "util",
        "Collections",
        "java",
        "util",
        "java",
        "util",
        "java",
        "util",
        "java",
        "util",
        "Objects",
        "java",
        "util",
        "Optional",
        "java",
        "util",
        "java",
        "util",
        "stream",
        "Collectors",
        "org",
        "apache",
        "commons",
        "collections4",
        "CollectionUtils",
        "isNotEmpty",
        "org",
        "folio",
        "orders",
        "utils",
        "AcqDesiredPermissions",
        "MANAGE",
        "org",
        "folio",
        "orders",
        "utils",
        "HelperUtils",
        "ORDER_CONFIG_MODULE_NAME",
        "org",
        "folio",
        "orders",
        "utils",
        "HelperUtils",
        "collectResultsOnSuccess",
        "org",
        "folio",
        "orders",
        "utils",
        "HelperUtils",
        "getPoLineLimit",
        "org",
        "folio",
        "orders",
        "utils",
        "OrderStatusTransitionUtil",
        "isTransitionToApproved",
        "org",
        "folio",
        "orders",
        "utils",
        "OrderStatusTransitionUtil",
        "isTransitionToPending",
        "org",
        "folio",
        "orders",
        "utils",
        "PermissionsUtil",
        "userDoesNotHaveApprovePermission",
        "org",
        "folio",
        "orders",
        "utils",
        "PermissionsUtil",
        "userDoesNotHaveUnopenPermission",
        "org",
        "folio",
        "orders",
        "utils",
        "ProtectedOperationType",
        "CREATE",
        "org",
        "folio",
        "orders",
        "utils",
        "ProtectedOperationType",
        "DELETE",
        "org",
        "folio",
        "orders",
        "utils",
        "ProtectedOperationType",
        "UPDATE",
        "org",
        "folio",
        "orders",
        "utils",
        "ResourcePathResolver",
        "PO_LINE_NUMBER",
        "org",
        "folio",
        "rest",
        "core",
        "exceptions",
        "ErrorCodes",
        "APPROVAL_REQUIRED_TO_OPEN",
        "org",
        "folio",
        "rest",
        "core",
        "exceptions",
        "ErrorCodes",
        "MISSING_ONGOING",
        "org",
        "folio",
        "rest",
        "core",
        "exceptions",
        "ErrorCodes",
        "ONGOING_NOT_ALLOWED",
        "org",
        "folio",
        "rest",
        "core",
        "exceptions",
        "ErrorCodes",
        "USER_HAS_NO_APPROVAL_PERMISSIONS",
        "org",
        "folio",
        "rest",
        "core",
        "exceptions",
        "ErrorCodes",
        "USER_HAS_NO_UNOPEN_PERMISSIONS",
        "org",
        "folio",
        "service",
        "UserService",
        "getCurrentUserId",
        "logger",
        "LogManager",
        "getLogger",
        "compositePoLineValidationService",
        "configurationEntriesCache",
        "organizationService",
        "poNumberHelper",
        "prefixService",
        "protectionService",
        "purchaseOrderLineHelper",
        "purchaseOrderLineService",
        "suffixService",
        "unOpenCompositeOrderManager",
        "compositePoLineValidationService",
        "configurationEntriesCache",
        "organizationService",
        "protectionService",
        "prefixService",
        "purchaseOrderLineHelper",
        "purchaseOrderLineService",
        "suffixService",
        "poNumberHelper",
        "unOpenCompositeOrderManager",
        "compositePoLineValidationService",
        "compositePoLineValidationService",
        "configurationEntriesCache",
        "configurationEntriesCache",
        "organizationService",
        "organizationService",
        "poNumberHelper",
        "poNumberHelper",
        "prefixService",
        "prefixService",
        "purchaseOrderLineHelper",
        "purchaseOrderLineHelper",
        "purchaseOrderLineService",
        "purchaseOrderLineService",
        "protectionService",
        "protectionService",
        "suffixService",
        "suffixService",
        "unOpenCompositeOrderManager",
        "unOpenCompositeOrderManager",
        "compPO",
        "tenantConfig",
        "requestContext",
        "errors",
        "setCreateInventoryDefaultValues",
        "compPO",
        "tenantConfig",
        "compose",
        "v",
        "validateOrderPoLines",
        "compPO",
        "requestContext",
        "errors",
        "addAll",
        "v",
        "errors",
        "addAll",
        "validatePoLineLimit",
        "compPO",
        "tenantConfig",
        "compose",
        "v",
        "purchaseOrderLineService",
        "validateAndNormalizeISBN",
        "compPO",
        "getCompositePoLines",
        "requestContext",
        "compose",
        "v",
        "validateVendor",
        "compPO",
        "requestContext",
        "errors",
        "addAll",
        "v",
        "errors",
        "addAll",
        "validateRenewalInfo",
        "compPO",
        "errors",
        "compPO",
        "requestContext",
        "logger",
        "info",
        "compPO",
        "getId",
        "futures",
        "futures",
        "add",
        "protectionService",
        "validateAcqUnitsOnCreate",
        "compPO",
        "getAcqUnitIds",
        "AcqDesiredPermissions",
        "ASSIGN",
        "requestContext",
        "futures",
        "add",
        "checkOrderApprovalPermissions",
        "compPO",
        "requestContext",
        "futures",
        "add",
        "prefixService",
        "validatePrefixAvailability",
        "compPO",
        "getPoNumberPrefix",
        "requestContext",
        "futures",
        "add",
        "suffixService",
        "validateSuffixAvailability",
        "compPO",
        "getPoNumberSuffix",
        "requestContext",
        "futures",
        "add",
        "poNumberHelper",
        "checkPONumberUnique",
        "compPO",
        "getPoNumber",
        "requestContext",
        "GenericCompositeFuture",
        "join",
        "futures",
        "onSuccess",
        "v",
        "logger",
        "info",
        "onFailure",
        "t",
        "logger",
        "error",
        "t",
        "mapEmpty",
        "orderId",
        "compPO",
        "requestContext",
        "resultErrors",
        "StringUtils",
        "isEmpty",
        "compPO",
        "getPoNumber",
        "resultErrors",
        "add",
        "ErrorCodes",
        "PO_NUMBER_REQUIRED",
        "toError",
        "compPO",
        "getId",
        "equals",
        "orderId",
        "resultErrors",
        "add",
        "ErrorCodes",
        "MISMATCH_BETWEEN_ID_IN_PATH_AND_BODY",
        "toError",
        "isNotEmpty",
        "compPO",
        "getCompositePoLines",
        "compPO",
        "getCompositePoLines",
        "forEach",
        "poLine",
        "orderId",
        "equals",
        "poLine",
        "getPurchaseOrderId",
        "error",
        "ErrorCodes",
        "MISMATCH_BETWEEN_ID_IN_PATH_AND_BODY",
        "toError",
        "StringUtils",
        "isNotEmpty",
        "poLine",
        "getPoLineNumber",
        "error",
        "getParameters",
        "add",
        "withKey",
        "PO_LINE_NUMBER",
        "withValue",
        "poLine",
        "getPoLineNumber",
        "resultErrors",
        "add",
        "error",
        "configurationEntriesCache",
        "loadConfiguration",
        "ORDER_CONFIG_MODULE_NAME",
        "requestContext",
        "compose",
        "tenantConfig",
        "validateOrderForPost",
        "compPO",
        "tenantConfig",
        "requestContext",
        "errors",
        "resultErrors",
        "addAll",
        "errors",
        "resultErrors",
        "compPO",
        "poFromStorage",
        "deleteHoldings",
        "requestContext",
        "logger",
        "info",
        "compPO",
        "getId",
        "validateAcqUnitsOnUpdate",
        "compPO",
        "poFromStorage",
        "requestContext",
        "compose",
        "ok",
        "prefixService",
        "validatePrefixAvailability",
        "compPO",
        "getPoNumberPrefix",
        "requestContext",
        "compose",
        "ok",
        "suffixService",
        "validateSuffixAvailability",
        "compPO",
        "getPoNumberSuffix",
        "requestContext",
        "compose",
        "ok",
        "poNumberHelper",
        "validatePoNumberPrefixAndSuffix",
        "compPO",
        "compose",
        "ok",
        "poNumberHelper",
        "validatePoNumber",
        "poFromStorage",
        "compPO",
        "requestContext",
        "compose",
        "ok",
        "isTransitionToApproved",
        "poFromStorage",
        "compPO",
        "checkOrderApprovalPermissions",
        "compPO",
        "requestContext",
        "Future",
        "succeededFuture",
        "compose",
        "ok",
        "isTransitionToPending",
        "poFromStorage",
        "compPO",
        "checkOrderUnopenPermissions",
        "requestContext",
        "unOpenCompositeOrderManager",
        "process",
        "compPO",
        "poFromStorage",
        "deleteHoldings",
        "requestContext",
        "Future",
        "succeededFuture",
        "compositeOrder",
        "requestContext",
        "poLinesErrors",
        "compositeOrder",
        "getCompositePoLines",
        "stream",
        "compositePoLine",
        "compositePoLineValidationService",
        "validatePoLine",
        "compositePoLine",
        "requestContext",
        "toList",
        "collectResultsOnSuccess",
        "poLinesErrors",
        "lists",
        "lists",
        "stream",
        "flatMap",
        "Collection",
        "stream",
        "toList",
        "compPO",
        "requestContext",
        "configurationEntriesCache",
        "loadConfiguration",
        "ORDER_CONFIG_MODULE_NAME",
        "requestContext",
        "tenantConfig",
        "isApprovalRequired",
        "isApprovalRequiredConfiguration",
        "tenantConfig",
        "isApprovalRequired",
        "compPO",
        "getApproved",
        "equals",
        "TRUE",
        "APPROVAL_REQUIRED_TO_OPEN",
        "compPO",
        "setApprovedById",
        "getCurrentUserId",
        "requestContext",
        "getHeaders",
        "compPO",
        "setApprovalDate",
        "config",
        "Optional",
        "ofNullable",
        "config",
        "getString",
        "approval",
        "approval",
        "getBoolean",
        "orElse",
        "compPO",
        "requestContext",
        "configurationEntriesCache",
        "loadConfiguration",
        "ORDER_CONFIG_MODULE_NAME",
        "requestContext",
        "tenantConfig",
        "isApprovalRequired",
        "isApprovalRequiredConfiguration",
        "tenantConfig",
        "isApprovalRequired",
        "compPO",
        "getApproved",
        "equals",
        "TRUE",
        "userDoesNotHaveApprovePermission",
        "requestContext",
        "HttpStatus",
        "HTTP_FORBIDDEN",
        "toInt",
        "USER_HAS_NO_APPROVAL_PERMISSIONS",
        "compPO",
        "setApprovalDate",
        "compPO",
        "setApprovedById",
        "getCurrentUserId",
        "requestContext",
        "getHeaders",
        "updatedOrder",
        "poFromStorage",
        "requestContext",
        "newAcqUnitIds",
        "updatedOrder",
        "getAcqUnitIds",
        "acqUnitUdsFromStorage",
        "poFromStorage",
        "getAcqUnitIds",
        "Future",
        "succeededFuture",
        "ok",
        "getInvolvedOperations",
        "updatedOrder",
        "poFromStorage",
        "compose",
        "involvedOperations",
        "protectionService",
        "validateAcqUnitsOnUpdate",
        "newAcqUnitIds",
        "acqUnitUdsFromStorage",
        "MANAGE",
        "involvedOperations",
        "requestContext",
        "requestContext",
        "userDoesNotHaveUnopenPermission",
        "requestContext",
        "HttpStatus",
        "HTTP_FORBIDDEN",
        "toInt",
        "USER_HAS_NO_UNOPEN_PERMISSIONS",
        "compPO",
        "poFromStorage",
        "CollectionUtils",
        "isEmpty",
        "compPO",
        "getCompositePoLines",
        "Collections",
        "singleton",
        "UPDATE",
        "poLines",
        "HelperUtils",
        "convertToPoLines",
        "poFromStorage",
        "getCompositePoLines",
        "newIds",
        "compPO",
        "getCompositePoLines",
        "stream",
        "CompositePoLine",
        "getId",
        "collect",
        "Collectors",
        "toSet",
        "storageIds",
        "poLines",
        "stream",
        "PoLine",
        "getId",
        "collect",
        "Collectors",
        "toSet",
        "operations",
        "operations",
        "add",
        "UPDATE",
        "operations",
        "addAll",
        "getInvolvedOperations",
        "newIds",
        "storageIds",
        "operations",
        "newIds",
        "storageIds",
        "CollectionUtils",
        "isEqualCollection",
        "newIds",
        "storageIds",
        "Collections",
        "emptySet",
        "CollectionUtils",
        "isSubCollection",
        "storageIds",
        "newIds",
        "Collections",
        "singleton",
        "CREATE",
        "CollectionUtils",
        "isSubCollection",
        "newIds",
        "storageIds",
        "Collections",
        "singleton",
        "DELETE",
        "operations",
        "operations",
        "add",
        "CREATE",
        "operations",
        "add",
        "DELETE",
        "operations",
        "compPO",
        "tenantConfiguration",
        "logger",
        "info",
        "compPO",
        "getId",
        "futures",
        "compPO",
        "getCompositePoLines",
        "stream",
        "compPOL",
        "purchaseOrderLineHelper",
        "setTenantDefaultCreateInventoryValues",
        "compPOL",
        "tenantConfiguration",
        "toList",
        "GenericCompositeFuture",
        "join",
        "futures",
        "mapEmpty",
        "compPO",
        "requestContext",
        "compPO",
        "getWorkflowStatus",
        "CompositePurchaseOrder",
        "WorkflowStatus",
        "OPEN",
        "combinedErrors",
        "organizationService",
        "validateVendor",
        "compPO",
        "getVendor",
        "requestContext",
        "aErrors",
        "combinedErrors",
        "addAll",
        "aErrors",
        "getErrors",
        "compose",
        "errors",
        "fetchCompositePoLines",
        "compPO",
        "requestContext",
        "compose",
        "poLines",
        "organizationService",
        "validateAccessProviders",
        "poLines",
        "requestContext",
        "aErrors",
        "combinedErrors",
        "addAll",
        "aErrors",
        "getErrors",
        "v",
        "combinedErrors",
        "Future",
        "succeededFuture",
        "Collections",
        "emptyList",
        "compPO",
        "compPO",
        "getOrderType",
        "CompositePurchaseOrder",
        "OrderType",
        "ONGOING",
        "Objects",
        "isNull",
        "compPO",
        "getOngoing",
        "of",
        "MISSING_ONGOING",
        "toError",
        "compPO",
        "getOrderType",
        "CompositePurchaseOrder",
        "OrderType",
        "ONE_TIME",
        "Objects",
        "nonNull",
        "compPO",
        "getOngoing",
        "of",
        "ONGOING_NOT_ALLOWED",
        "toError",
        "Collections",
        "emptyList",
        "compPO",
        "tenantConfig",
        "isNotEmpty",
        "compPO",
        "getCompositePoLines",
        "limit",
        "getPoLineLimit",
        "tenantConfig",
        "compPO",
        "getCompositePoLines",
        "size",
        "limit",
        "of",
        "ErrorCodes",
        "POL_LINES_LIMIT_EXCEEDED",
        "toError",
        "Collections",
        "emptyList",
        "compPO",
        "requestContext",
        "CollectionUtils",
        "isEmpty",
        "compPO",
        "getCompositePoLines",
        "purchaseOrderLineService",
        "getCompositePoLinesByOrderId",
        "compPO",
        "getId",
        "requestContext",
        "poLines",
        "PoLineCommonUtil",
        "sortPoLinesByPoLineNumber",
        "poLines",
        "poLines",
        "Future",
        "succeededFuture",
        "compPO",
        "getCompositePoLines"
    ],
    "literals": [
        "\"validateOrderForCreation :: orderId: {}\"",
        "\"validateOrderForCreation :: successful\"",
        "\"validateOrderForCreation :: failed\"",
        "\"validateOrderForUpdate :: orderId: {}\"",
        "\"approvals\"",
        "\"isApprovalRequired\"",
        "\"setCreateInventoryDefaultValues:: orderId: {}\""
    ],
    "variables": [
        "compositePoLineValidationService",
        "configurationEntriesCache",
        "organizationService",
        "poNumberHelper",
        "prefixService",
        "protectionService",
        "purchaseOrderLineHelper",
        "purchaseOrderLineService",
        "suffixService",
        "unOpenCompositeOrderManager"
    ],
    "comments": [
        "The PO Number is required for existing orders",
        "Validate order uuid",
        "Validate that each PO Line has correct order id"
    ],
    "docstrings": [
        "* This validation is only used when the POST endpoint is called.\n   * Additional creation validation is done in validateOrderForCreation().\n   * Sets the tenant default values and validates the order. Checks if Orders has\n   * PO Lines within limit and validates vendors and access providers.\n   *\n   * @param compPO\n   *          Purchase Order to validate\n   * @return completable future which might be completed with {@code true} if\n   *         order is valid, {@code false} if not valid or an exception if\n   *         processing fails",
        "* This validation is used for both the POST endpoint and data import.",
        "* This validation is only used when the PUT endpoint is called.\n   * Additional update validation is done in validateOrderForUpdate().\n   * Validates purchase order which already exists in the storage.\n   * Checks PO Number presence, validates that provided order id corresponds to one set in order and its lines.\n   * @param orderId Purchase Order id\n   * @param compPO Purchase Order to validate\n   * @return completable future which might be completed with {@code true} if order is valid, {@code false} if not valid or an exception if processing fails",
        "* This validation is used for both the PUT endpoint and data import.",
        "* If an order is transitioning to OPEN, checks if approval is required and throws an error if it is not approved\n   *\n   * @param compPO composite purchase order",
        "* Checks the value of \"isApprovalRequired\" in configurations, if the value is set to true, and order is being approved, verifies\n   * if the user has required permissions to approve order\n   *\n   * @param compPO composite purchase order for checking permissions",
        "* @param updatedOrder purchase order from request\n   * @param poFromStorage purchase order from storage\n   * @return completable future completed successfully if all checks pass or exceptionally in case of error/restriction\n   *         caused by acquisitions units"
    ],
    "functions": [
        "OrderValidationService",
        "validateOrderForPost",
        "validateOrderForCreation",
        "validateOrderForPut",
        "validateOrderForUpdate",
        "validateOrderPoLines",
        "checkOrderApprovalRequired",
        "isApprovalRequiredConfiguration",
        "checkOrderApprovalPermissions",
        "validateAcqUnitsOnUpdate",
        "checkOrderUnopenPermissions",
        "getInvolvedOperations",
        "getInvolvedOperations",
        "setCreateInventoryDefaultValues",
        "validateVendor",
        "validateRenewalInfo",
        "validatePoLineLimit",
        "fetchCompositePoLines"
    ],
    "classes": [
        "OrderValidationService"
    ]
}