{
    "identifiers": [
        "numpy",
        "np",
        "lsst",
        "ts",
        "salobj",
        "lsst",
        "ts",
        "scriptqueue",
        "SALPY_ATCamera",
        "SALPY_ATSpectrograph",
        "scriptqueue",
        "BaseScript",
        "index",
        "descr",
        "index",
        "index",
        "descr",
        "descr",
        "remotes_dict",
        "atcam",
        "salobj",
        "Remote",
        "SALPY_ATCamera",
        "include",
        "atspec",
        "salobj",
        "Remote",
        "SALPY_ATSpectrograph",
        "include",
        "np",
        "array",
        "n_dark",
        "t_dark",
        "n_bias",
        "n_flat",
        "flat_base_exptime",
        "flat_dn_range",
        "filter_id",
        "grating_id",
        "linear_stage",
        "read_out_time",
        "n_dark",
        "n_dark",
        "RuntimeError",
        "n_dark",
        "t_dark",
        "t_dark",
        "RuntimeError",
        "t_dark",
        "n_bias",
        "n_bias",
        "RuntimeError",
        "n_bias",
        "n_flat",
        "n_flat",
        "RuntimeError",
        "n_flat",
        "flat_base_exptime",
        "flat_base_exptime",
        "RuntimeError",
        "flat_base_exptime",
        "flat_dn_range",
        "np",
        "array",
        "flat_dn_range",
        "dtype",
        "filter_id",
        "filter_id",
        "grating_id",
        "grating_id",
        "linear_stage",
        "linear_stage",
        "read_out_time",
        "read_out_time",
        "log",
        "warning",
        "read_out_time",
        "read_out_time",
        "checkpoint",
        "checkpoint",
        "atspec",
        "cmd_changeFilter",
        "atspec",
        "cmd_changeFilter",
        "start",
        "timeout",
        "cmd_timeout",
        "grating",
        "checkpoint",
        "grating",
        "atspec",
        "cmd_changeDisperser",
        "disperser",
        "grating",
        "atspec",
        "cmd_changeDisperser",
        "start",
        "timeout",
        "cmd_timeout",
        "linear_stage",
        "checkpoint",
        "linear_stage",
        "atspec",
        "cmd_moveLinearStage",
        "distanceFromHome",
        "linear_stage",
        "atspec",
        "cmd_moveLinearStage",
        "start",
        "take_dark_sequence",
        "take_bias_sequence",
        "take_flat_sequence",
        "take_bias_sequence",
        "checkpoint",
        "log",
        "debug",
        "i",
        "n_dark",
        "take_image",
        "exp_time",
        "t_dark",
        "shutter",
        "image_seq_name",
        "i",
        "n_dark",
        "log",
        "debug",
        "i",
        "n_bias",
        "take_image",
        "exp_time",
        "shutter",
        "image_seq_name",
        "i",
        "n_bias",
        "log",
        "debug",
        "i",
        "len",
        "flat_dn_range",
        "j",
        "n_flat",
        "take_image",
        "exp_time",
        "flat_base_exptime",
        "flat_dn_range",
        "i",
        "shutter",
        "image_seq_name",
        "i",
        "len",
        "flat_dn_range",
        "j",
        "n_flat",
        "exp_time",
        "shutter",
        "image_seq_name",
        "atcam",
        "cmd_takeImages",
        "numImages",
        "expTime",
        "exp_time",
        "shutter",
        "shutter",
        "imageSequenceName",
        "image_seq_name",
        "read_out_time",
        "cmd_timeout",
        "atcam",
        "evt_endReadout",
        "next",
        "flush",
        "timeout",
        "timeout",
        "checkpoint",
        "image_seq_name",
        "atcam",
        "cmd_takeImages",
        "start",
        "timeout",
        "timeout",
        "exp_time",
        "end_readout_coro",
        "metadata",
        "n_dark",
        "read_out_time",
        "t_dark",
        "n_bias",
        "read_out_time",
        "np",
        "sum",
        "n_flat",
        "flat_dn_range",
        "read_out_time",
        "flat_base_exptime"
    ],
    "literals": [
        "\"ATGetStdFlatDataset\"",
        "\"Take Flat field sensor characterization data.\"",
        "\"takeImages\"",
        "\"endReadout\"",
        "\"changeFilter\"",
        "\"changeDisperser\"",
        "\"moveLinearStage\"",
        "f\"Number of dark frames must be larger than 0, got {n_dark}\"",
        "f\"Dark exptime must be larger than 0., got {t_dark}\"",
        "f\"Number of bias frames must be larger than 0, got {n_bias}\"",
        "f\"Number of flat field frames must be larger than 0, got {n_flat}\"",
        "f\"Base flat field exposure time must be larger than 0., \"",
        "f\"got {flat_base_exptime}\"",
        "f\"Read out time must be larger than one, got {read_out_time}. \"",
        "f\"Using default value, {self.read_out_time}s.\"",
        "\"setup\"",
        "f\"Configuring ATSpec filter; {self.filter}\"",
        "f\"Configuring ATSpec grating; {self.grating}\"",
        "f\"Configuring ATSpec linear stage; {self.linear_stage}\"",
        "\"done\"",
        "\"Taking dark sequence...\"",
        "f\"dark_{i+1:04d}_{self.n_dark:04d}\"",
        "\"Taking bias sequence...\"",
        "f\"bias_{i+1:04d}_{self.n_bias:04d}\"",
        "\"Taking flat sequence...\"",
        "f\"flat_{i+1:04d}_\"",
        "f\"{len(self.flat_dn_range):04d}_\"",
        "f\"{j+1:04d}_\"",
        "f\"{self.n_flat:04d}\"",
        "f\"Take image {image_seq_name}\""
    ],
    "variables": [
        "__all__",
        "cmd_timeout",
        "read_out_time",
        "n_dark",
        "t_dark",
        "n_bias",
        "n_flat",
        "flat_base_exptime",
        "flat_dn_range",
        "grating",
        "linear_stage",
        "n_dark",
        "t_dark",
        "n_bias",
        "n_flat",
        "flat_base_exptime",
        "flat_dn_range",
        "grating",
        "linear_stage",
        "read_out_time",
        "timeout",
        "end_readout_coro",
        "metadata",
        "duration"
    ],
    "comments": [
        "This file is part of ts_standardscripts",
        "",
        "Developed for the LSST Data Management System.",
        "This product includes software developed by the LSST Project",
        "(https://www.lsst.org).",
        "See the COPYRIGHT file at the top-level directory of this distribution",
        "for details of code ownership.",
        "",
        "This program is free software: you can redistribute it and/or modify",
        "it under the terms of the GNU General Public License as published by",
        "the Free Software Foundation, either version 3 of the License, or",
        "(at your option) any later version.",
        "",
        "This program is distributed in the hope that it will be useful,",
        "but WITHOUT ANY WARRANTY; without even the implied warranty of",
        "MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the",
        "GNU General Public License for more details.",
        "",
        "You should have received a copy of the GNU General Public License",
        "Had to increase this timeout to accommodate some issue with the camera."
    ],
    "docstrings": [
        "\"\"\"Implement script to get sensor characterization data. The definition is spelled out in\n    https://jira.lsstcorp.org/browse/CAP-203 and https://jira.lsstcorp.org/browse/CAP-206.\n\n    Basically, this script will:\n\n    1 - Take a set `nd` (default=10) dark images (shutter closed) with `td` (default=400s) exposure time\n    2 - Take a set of `nb` (default=10) bias\n    3 - Flat field data:\n        - Take a set of pairs of flat fields at a set of approximately logarithmically spaced intensity\n        levels starting at 500 DN and increasing by a factor of 2 (i.e. 500, 1000, 2000, ...).\n        The exact levels are not important, but they must be well known; both the flux level and\n        shutter time must be well measured (if shutter is opened before/closed after the lamp\n        is turned on then the shutter time need not be well measured).\n        - Take a set of `nb` biases after the entire flat sequence is complete\n\n    Parameters\n    ----------\n    index : `int`\n        Index of Script SAL component.\n    \"\"\"",
        "\"\"\"Configure script.\n\n        Parameters\n        ----------\n        n_dark : `int`\n            Number of dark images to be taken (default=10).\n        t_dark : `float`\n            Exposure time for the dark images in seconds (default=400s).\n        n_bias : `int`\n            Number of bias images to be taken (default=10).\n        n_flat : `int`\n            Number of flat field images to take for each exposure time.\n        flat_base_exptime : `float`\n            The exposure time for the first flat field image set (in seconds).\n        flat_dn_range : `list(float)`\n            List of values that multiply the `flat_base_exptime`. For instance, if you want to take\n            two sets of flat with exposure times `flat_base_exptime, 2*flat_base_exptime, 4*flat_dn_range`,\n            `flat_dn_range = [1., 2., 4.]`. Default is [1., 2., 4., 8., 16., 32., 64.].\n        filter_id : `int`\n            Id of the filter to use in the ATSpectrograph. If `None` (default) will ignore the setup step.\n        grating_id : `int`\n            Id of the grating to use in the ATSpectrograph. If `None` (default) will ignore the setup step.\n        linear_stage : `float`\n            Position of the linear stage in the ATSpectrograph. If `None` (default) will ignore the\n            setup step.\n        read_out_time :`float`\n            The read out time of the camera, in seconds. Used to estimate script duration.\n\n        \"\"\"",
        "\"\"\"Run method.\n        \"\"\"",
        "\"\"\"A coroutine to take the intended sequence of darks.\n        \"\"\"",
        "\"\"\"A coroutine to take the intended sequence of bias.\n        \"\"\"",
        "\"\"\"A coroutine to take the intended sequence of flats.\n        \"\"\"",
        "\"\"\"Coroutine to take images.\n\n        Parameters\n        ----------\n        exp_time : `float`\n            The exposure time for the image, in seconds.\n        shutter : `bool`\n            Should activate the shutter? (False for bias and dark)\n        image_seq_name : `str`\n            A string to identify the image.\n\n        Returns\n        -------\n\n        \"\"\""
    ],
    "functions": [
        "configure",
        "run",
        "take_dark_sequence",
        "take_bias_sequence",
        "take_flat_sequence",
        "take_image",
        "set_metadata"
    ],
    "classes": [
        "ATGetStdFlatDataset"
    ]
}