{
    "identifiers": [
        "Interfaces",
        "expect",
        "got",
        "ExecOptions",
        "exec",
        "cpExec",
        "createWriteStream",
        "mkdir",
        "readFile",
        "readdir",
        "rm",
        "tmpdir",
        "join",
        "rsort",
        "makeTestDir",
        "join",
        "tmpdir",
        "rm",
        "tmpDir",
        "mkdir",
        "tmpDir",
        "tmpDir",
        "download",
        "url",
        "location",
        "url",
        "location",
        "got",
        "url",
        "createWriteStream",
        "location",
        "resolve",
        "reject",
        "downloadStream",
        "error",
        "reject",
        "error",
        "fileWriterStream",
        "error",
        "reject",
        "error",
        "resolve",
        "downloadStream",
        "fileWriterStream",
        "exec",
        "command",
        "options",
        "process",
        "options",
        "options",
        "resolve",
        "reject",
        "cpExec",
        "command",
        "opts",
        "error",
        "stdout",
        "stderr",
        "error",
        "error",
        "reject",
        "error",
        "resolve",
        "path",
        "readFile",
        "path",
        "describe",
        "process",
        "channel",
        "platform",
        "before",
        "exec",
        "stdout",
        "result",
        "rsort",
        "result",
        "sortedVersions",
        "distTags",
        "channel",
        "versionToUpdateTo",
        "sortedVersions",
        "channelIndex",
        "stableVersion",
        "distTags",
        "channel",
        "distTags",
        "channel",
        "versionToUpdateTo",
        "stableVersion",
        "testDir",
        "makeTestDir",
        "testDir",
        "dataDir",
        "join",
        "testDir",
        "cacheDir",
        "join",
        "testDir",
        "configDir",
        "join",
        "testDir",
        "mkdir",
        "dataDir",
        "mkdir",
        "cacheDir",
        "mkdir",
        "configDir",
        "process",
        "dataDir",
        "process",
        "cacheDir",
        "process",
        "configDir",
        "dataDir",
        "cacheDir",
        "configDir",
        "join",
        "testDir",
        "tarball",
        "join",
        "testDir",
        "mkdir",
        "extractedLocation",
        "download",
        "tarball",
        "tarLocation",
        "platform",
        "tarLocation",
        "extractedLocation",
        "tarLocation",
        "extractedLocation",
        "tarLocation",
        "extractedLocation",
        "exec",
        "cmd",
        "testDir",
        "extractResult",
        "expect",
        "extractResult",
        "sf",
        "join",
        "extractedLocation",
        "process",
        "sf",
        "platform",
        "sf",
        "sf",
        "exec",
        "sf",
        "versionResult",
        "expect",
        "versionResult",
        "initialVersion",
        "versionResult",
        "exec",
        "sf",
        "process",
        "testDir",
        "exec",
        "sf",
        "testDir",
        "pluginsResults",
        "expect",
        "pluginsResults",
        "pluginsResults",
        "expect",
        "isLinked",
        "it",
        "exec",
        "sf",
        "versionToUpdateTo",
        "expect",
        "code",
        "join",
        "dataDir",
        "readdir",
        "clientDir",
        "expect",
        "items",
        "i",
        "i",
        "versionToUpdateTo",
        "platform",
        "exec",
        "join",
        "clientDir",
        "stdout",
        "expect",
        "version",
        "versionToUpdateTo",
        "expect",
        "version",
        "initialVersion",
        "readJSON",
        "Interfaces",
        "join",
        "dataDir",
        "expect",
        "version",
        "versionToUpdateTo",
        "expect",
        "version",
        "initialVersion",
        "it",
        "exec",
        "sf",
        "expect",
        "code",
        "join",
        "dataDir",
        "readdir",
        "clientDir",
        "expect",
        "items",
        "i",
        "i",
        "stableVersion",
        "platform",
        "exec",
        "join",
        "clientDir",
        "stdout",
        "expect",
        "version",
        "stableVersion",
        "expect",
        "version",
        "initialVersion",
        "readJSON",
        "Interfaces",
        "join",
        "dataDir",
        "expect",
        "version",
        "stableVersion"
    ],
    "literals": [
        "'@oclif/core'",
        "'chai'",
        "'got'",
        "'node:child_process'",
        "'node:fs'",
        "'node:fs/promises'",
        "'node:os'",
        "'node:path'",
        "'semver'",
        "string",
        "'sf-update-test'",
        "string",
        "string",
        "Downloading ${url} to ${location}",
        "'error'",
        "Download failed: ${error.message}",
        "'error'",
        "Could not write file to system: ${error.message}",
        "'finish'",
        "'Success!'",
        "string",
        "string",
        "string",
        "'win32'",
        "'powershell.exe'",
        "'Error!'",
        "string",
        "'utf8'",
        "'sf integration'",
        "string",
        "string",
        "string",
        "string",
        "string",
        "string",
        "string",
        "string",
        "'nightly'",
        "'win32'",
        "'win32'",
        "'linux'",
        "https://developer.salesforce.com/media/salesforce-cli/sf/channels/${channel}/sf-${platform}-x64.tar.gz",
        "'Setting up test environment...'",
        "'npm view @salesforce/cli --json'",
        "'dist-tags'",
        "'Testing with:'",
        "• channel: ${channel} (${distTags[channel]})",
        "• version to update to: ${versionToUpdateTo}",
        "• stable version: ${stableVersion}",
        "Test directory: ${testDir}",
        "'data'",
        "'cache'",
        "'config'",
        "'• data directory:'",
        "'• cache directory:'",
        "'• config directory:'",
        "'/'",
        "'sf.tar.xz'",
        "'sf'",
        "'win32'",
        "tar -xf ${tarLocation} -C ${extractedLocation} --strip-components 1 --exclude node_modules/.bin",
        "tar -xf ${tarLocation} -C ${extractedLocation} --strip-components 1",
        "Extracting ${tarLocation} to ${extractedLocation}",
        "'Success!'",
        "'Testing that installation was successful...'",
        "'bin'",
        "'run.js'",
        "'win32'",
        "cmd /c \"node ${sf}\"",
        "${sf} version --json",
        "'@salesforce/cli/'",
        "''",
        "'Success!'",
        "'Linking plugin-update...'",
        "${sf} plugins link ${process.cwd()} --no-install",
        "${sf} plugins",
        "'Success!'",
        "'Test setup complete.'",
        "'should update sf to a specific version'",
        "${sf} update --version ${versionToUpdateTo}",
        "'client'",
        "'new version to be added to client directory'",
        "'win32'",
        "${join(clientDir, 'bin', 'sf.cmd')} version --json",
        "'bin'",
        "'sf.cmd'",
        "'@salesforce/cli/'",
        "''",
        "'version in SF_DATA_DIR\\\\bin\\\\sf.cmd to be the updated version'",
        "'client'",
        "'current'",
        "'package.json'",
        "'version in SF_DATA_DIR/client/current to be the updated version'",
        "'should update sf to the latest version of a channel'",
        "${sf} update stable",
        "'client'",
        "'new version to be added to client directory'",
        "'win32'",
        "${join(clientDir, 'bin', 'sf.cmd')} version --json",
        "'bin'",
        "'sf.cmd'",
        "'@salesforce/cli/'",
        "''",
        "'version in SF_DATA_DIR\\\\bin\\\\sf.cmd to be the updated version'",
        "'client'",
        "'current'",
        "'package.json'",
        "'version in SF_DATA_DIR/client/current to be the updated version'"
    ],
    "variables": [
        "makeTestDir",
        "tmpDir",
        "download",
        "downloadStream",
        "fileWriterStream",
        "exec",
        "opts",
        "testDir",
        "dataDir",
        "cacheDir",
        "configDir",
        "initialVersion",
        "stableVersion",
        "sf",
        "versionToUpdateTo",
        "channel",
        "platform",
        "tarball",
        "result",
        "distTags",
        "sortedVersions",
        "channelIndex",
        "tarLocation",
        "extractedLocation",
        "cmd",
        "extractResult",
        "versionResult",
        "pluginsResults",
        "isLinked",
        "clientDir",
        "items",
        "version",
        "clientDir",
        "items",
        "version"
    ],
    "comments": [
        "ensure that we are starting with a clean directory",
        "error means that folder doesn't exist which is okay",
        "It's important to use run.js instead of sf - otherwise it will resolve to the global version of sf",
        "set the bin path so that plugin-update thinks this is updatable",
        "This would typically be set by the sf executable that's included in the tarball",
        "but since we're using bin/run.js to avoid the global sf, we need to set it manually",
        "append cmd /c to the command so that it can run on windows"
    ],
    "docstrings": [],
    "functions": [
        "readJSON"
    ],
    "classes": []
}