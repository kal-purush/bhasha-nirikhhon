{
    "identifiers": [
        "NextRequest",
        "supabaseAdmin",
        "sendEmail",
        "DatabaseError",
        "req",
        "req",
        "supabaseAdmin",
        "newsletterId",
        "newsletterError",
        "DatabaseError",
        "newsletterError",
        "newsletter",
        "newsletter",
        "newsletter",
        "newsletter",
        "newsletter",
        "newsletter",
        "newsletter",
        "newsletter",
        "newsletter",
        "section1",
        "section2",
        "section3",
        "company",
        "company",
        "company",
        "newsletter",
        "line",
        "line",
        "section1",
        "section1",
        "section1",
        "section1",
        "section1",
        "section2",
        "section2",
        "section2",
        "section2",
        "section2",
        "section3",
        "section3",
        "section3",
        "section3",
        "section3",
        "sendEmail",
        "company",
        "company",
        "emailHtml",
        "emailResponse",
        "emailResponse",
        "supabaseAdmin",
        "newsletterId",
        "updateError",
        "updateError",
        "Response",
        "company",
        "newsletterId",
        "error",
        "error",
        "Response",
        "error",
        "error",
        "error",
        "error"
    ],
    "literals": [
        "'next/server'",
        "'@/utils/supabase-admin'",
        "'@/utils/email'",
        "'@/utils/errors'",
        "'nodejs'",
        "'force-dynamic'",
        "'newsletters'",
        "*,\n        companies (\n          company_name,\n          industry,\n          target_audience,\n          contact_email\n        )",
        "'id'",
        "Failed to fetch newsletter: ${newsletterError.message}",
        "'Newsletter not found'",
        "'Company data not found'",
        "'Newsletter content not fully generated yet'",
        "<!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset=\"utf-8\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n        <title>${company.company_name} Newsletter Draft</title>\n      </head>\n      <body style=\"font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 800px; margin: 0 auto; padding: 20px;\">\n        <div style=\"text-align: center; padding: 20px 0; border-bottom: 2px solid #eee;\">\n          <h1 style=\"color: #2c5282; margin: 0;\">${company.company_name} Newsletter</h1>\n          <p style=\"color: #666; font-style: italic;\">Industry: ${company.industry}</p>\n        </div>\n\n        <div style=\"margin: 30px 0;\">\n          <h2 style=\"color: #2d3748;\">Industry Summary</h2>\n          <div style=\"background: #f7fafc; padding: 20px; border-radius: 8px;\">\n            ${newsletter.industry_summary.split('\\n').map((line: string) => \n              `<p style=\"margin: 10px 0;\">${line}</p>`\n            ).join('')}\n          </div>\n        </div>\n\n        <!-- Section 1 -->\n        <div style=\"margin: 40px 0; padding: 20px; border: 1px solid #e2e8f0; border-radius: 8px;\">\n          <h2 style=\"color: #2d3748; margin-top: 0;\">${section1.title}</h2>\n          ${section1.imageUrl ? `\n            <div style=\"margin: 20px 0;\">\n              <img src=\"${section1.imageUrl}\" alt=\"${section1.title}\" style=\"max-width: 100%; height: auto; border-radius: 4px;\">\n            </div>\n          ` : ''}\n          <div style=\"white-space: pre-line;\">\n            ${section1.content}\n          </div>\n        </div>\n\n        <!-- Section 2 -->\n        <div style=\"margin: 40px 0; padding: 20px; border: 1px solid #e2e8f0; border-radius: 8px;\">\n          <h2 style=\"color: #2d3748; margin-top: 0;\">${section2.title}</h2>\n          ${section2.imageUrl ? `\n            <div style=\"margin: 20px 0;\">\n              <img src=\"${section2.imageUrl}\" alt=\"${section2.title}\" style=\"max-width: 100%; height: auto; border-radius: 4px;\">\n            </div>\n          ` : ''}\n          <div style=\"white-space: pre-line;\">\n            ${section2.content}\n          </div>\n        </div>\n\n        <!-- Section 3 -->\n        <div style=\"margin: 40px 0; padding: 20px; border: 1px solid #e2e8f0; border-radius: 8px;\">\n          <h2 style=\"color: #2d3748; margin-top: 0;\">${section3.title}</h2>\n          ${section3.imageUrl ? `\n            <div style=\"margin: 20px 0;\">\n              <img src=\"${section3.imageUrl}\" alt=\"${section3.title}\" style=\"max-width: 100%; height: auto; border-radius: 4px;\">\n            </div>\n          ` : ''}\n          <div style=\"white-space: pre-line;\">\n            ${section3.content}\n          </div>\n        </div>\n\n        <div style=\"margin-top: 40px; padding-top: 20px; border-top: 2px solid #eee; text-align: center;\">\n          <p style=\"color: #666;\">\n            This is your newsletter draft. Please review the content and let us know if you'd like any changes.\n          </p>\n        </div>\n      </body>\n      </html>",
        "'\\n'",
        "string",
        "<p style=\"margin: 10px 0;\">${line}</p>",
        "''",
        "<div style=\"margin: 20px 0;\">\n              <img src=\"${section1.imageUrl}\" alt=\"${section1.title}\" style=\"max-width: 100%; height: auto; border-radius: 4px;\">\n            </div>",
        "''",
        "<div style=\"margin: 20px 0;\">\n              <img src=\"${section2.imageUrl}\" alt=\"${section2.title}\" style=\"max-width: 100%; height: auto; border-radius: 4px;\">\n            </div>",
        "''",
        "<div style=\"margin: 20px 0;\">\n              <img src=\"${section3.imageUrl}\" alt=\"${section3.title}\" style=\"max-width: 100%; height: auto; border-radius: 4px;\">\n            </div>",
        "''",
        "Newsletter Draft - ${company.company_name}",
        "Failed to send email: ${emailResponse.error}",
        "'newsletters'",
        "'sent'",
        "'id'",
        "'Failed to update newsletter status:'",
        "'Newsletter sent successfully'",
        "'Failed to send newsletter:'",
        "'Failed to send newsletter'",
        "'Unknown error'"
    ],
    "variables": [
        "runtime",
        "dynamic",
        "newsletter",
        "newsletterError",
        "company",
        "section1",
        "section2",
        "section3",
        "emailHtml",
        "emailResponse",
        "updateError"
    ],
    "comments": [
        "Get newsletter with company data",
        "Parse the sections",
        "Create HTML email content",
        "Send email",
        "Update newsletter status"
    ],
    "docstrings": [],
    "functions": [
        "POST"
    ],
    "classes": []
}