{
    "identifiers": [
        "flask",
        "Blueprint",
        "make_response",
        "portality",
        "util",
        "portality",
        "core",
        "app",
        "json",
        "requests",
        "math",
        "os",
        "time",
        "Blueprint",
        "blueprint",
        "route",
        "util",
        "jsonp",
        "os",
        "statvfs",
        "st",
        "f_files",
        "st",
        "f_ffree",
        "st",
        "f_files",
        "time",
        "time",
        "ts",
        "open",
        "fn",
        "f",
        "write",
        "ts",
        "f",
        "close",
        "os",
        "remove",
        "fn",
        "make_response",
        "json",
        "dumps",
        "res",
        "resp",
        "blueprint",
        "route",
        "util",
        "jsonp",
        "addr",
        "app_addrs",
        "addr",
        "startswith",
        "addr",
        "requests",
        "get",
        "addr",
        "res",
        "r",
        "status_code",
        "r",
        "status_code",
        "r",
        "json",
        "res",
        "addr",
        "get",
        "inodes_high",
        "inodes_high",
        "res",
        "addr",
        "get",
        "not_writable",
        "not_writable",
        "r",
        "status_code",
        "app_unreachable",
        "app_unreachable",
        "res",
        "append",
        "app_note",
        "res",
        "append",
        "inodes_note",
        "res",
        "append",
        "writable_note",
        "eddr",
        "app",
        "config",
        "isinstance",
        "app",
        "config",
        "basestring",
        "app",
        "config",
        "eddr",
        "startswith",
        "eddr",
        "eddr",
        "endswith",
        "eddr",
        "requests",
        "get",
        "eddr",
        "res",
        "r",
        "status_code",
        "r",
        "status_code",
        "r",
        "status_code",
        "es_unreachable",
        "es_unreachable",
        "res",
        "append",
        "es_note",
        "app",
        "config",
        "isinstance",
        "app",
        "config",
        "basestring",
        "app",
        "config",
        "rstrip",
        "es_addr",
        "startswith",
        "es_addr",
        "es_addr",
        "endswith",
        "eddr",
        "requests",
        "get",
        "es_addr",
        "json",
        "es",
        "es",
        "k",
        "v",
        "es",
        "iteritems",
        "res",
        "v",
        "math",
        "ceil",
        "v",
        "requests",
        "get",
        "es_addr",
        "res",
        "ces",
        "json",
        "res",
        "res",
        "res",
        "append",
        "cluster_note",
        "res",
        "time",
        "time",
        "ts",
        "ts",
        "ts",
        "requests",
        "put",
        "es_addr",
        "test_index",
        "test_type",
        "test_id",
        "json",
        "rp",
        "status_code",
        "rp",
        "status_code",
        "requests",
        "get",
        "es_addr",
        "test_index",
        "test_type",
        "test_id",
        "json",
        "rr",
        "requests",
        "es_addr",
        "test_index",
        "rd",
        "status_code",
        "rd",
        "status_code",
        "requests",
        "get",
        "es_addr",
        "test_index",
        "rg",
        "status_code",
        "rg",
        "status_code",
        "res",
        "append",
        "indexable_note",
        "make_response",
        "json",
        "dumps",
        "res",
        "resp"
    ],
    "literals": [
        "'status'",
        "'/stats'",
        "'/'",
        "'inode_used_pc'",
        "'/tmp/status_test_write_'",
        "'.txt'",
        "\"w\"",
        "\"I am a test at \"",
        "\"application/json\"",
        "'/'",
        "'stable'",
        "'ping'",
        "'apps'",
        "'indices'",
        "'notes'",
        "'apps reachable'",
        "'inode use on app machines below 95%'",
        "'app machines can write to disk'",
        "'indexes stable'",
        "'index accepts index/delete operations'",
        "'cluster stable'",
        "'127.0.0.1:3000'",
        "'http'",
        "'http://'",
        "'/status/stats'",
        "'ping'",
        "'apps'",
        "'ping'",
        "'apps'",
        "'inode_used_pc'",
        "'INODE GREATER THAN 95% ON '",
        "' APP MACHINES'",
        "'ping'",
        "'apps'",
        "'writable'",
        "'WRITE FAILURE ON '",
        "' APP MACHINES'",
        "'stable'",
        "' APPS UNREACHABLE'",
        "'notes'",
        "'notes'",
        "'notes'",
        "'ELASTIC_SEARCH_HOST'",
        "'ELASTIC_SEARCH_HOST'",
        "'ELASTIC_SEARCH_HOST'",
        "'http'",
        "'http://'",
        "':9200'",
        "':9200'",
        "'ping'",
        "'indices'",
        "'stable'",
        "'stable'",
        "' INDEXES UNREACHABLE'",
        "'notes'",
        "'ELASTIC_SEARCH_HOST'",
        "'ELASTIC_SEARCH_HOST'",
        "'ELASTIC_SEARCH_HOST'",
        "'/'",
        "'http'",
        "'http://'",
        "':9200'",
        "':9200'",
        "'/_status'",
        "'index'",
        "'cluster'",
        "'shards'",
        "'total'",
        "'_shards'",
        "'total'",
        "'successful'",
        "'_shards'",
        "'successful'",
        "'indices'",
        "'indices'",
        "'index'",
        "'indices'",
        "'docs'",
        "'docs'",
        "'num_docs'",
        "'size'",
        "'index'",
        "'primary_size_in_bytes'",
        "'/_cluster/health'",
        "'index'",
        "'cluster'",
        "'stable'",
        "'index'",
        "'cluster'",
        "'status'",
        "'green'",
        "'index'",
        "'cluster'",
        "'status'",
        "'green'",
        "'CLUSTER UNSTABLE'",
        "'stable'",
        "'CLUSTER UNSTABLE'",
        "'stable'",
        "'CLUSTER UNSTABLE'",
        "'notes'",
        "'stable'",
        "'status_test_writable_'",
        "'test_'",
        "'/'",
        "'/'",
        "'/'",
        "'hello'",
        "'world'",
        "'NEW INDEX WRITE OPERATION FAILED TO WRITE, RETURNED '",
        "'/'",
        "'/'",
        "'/'",
        "'hello'",
        "'world'",
        "'INDEX READ DID NOT FIND EXPECTED VALUE IN NEW WRITTEN RECORD'",
        "'/'",
        "'INDEX DELETE OF TEST INDEX DID NOT RETURNED UNEXPECTED STATUS CODE OF '",
        "'/'",
        "'INDEX READ AFTER DELETE TEST RETURNED UNEXPECTED STATUS CODE OF '",
        "'INDEX DELETE OF TEST INDEX FAILED'",
        "'INDEX READ OF NEW WRITTEN RECORD DID NOT SUCCEED'",
        "'INDEX/DELETE OPERATIONS CAUSED EXCEPTION'",
        "'INDEX/DELETE OPERATIONS NOT TESTED DUE TO SYSTEM ALREADY UNSTABLE'",
        "'notes'",
        "\"application/json\""
    ],
    "variables": [
        "blueprint",
        "res",
        "st",
        "res",
        "ts",
        "fn",
        "f",
        "res",
        "writable",
        "res",
        "writable",
        "resp",
        "resp",
        "mimetype",
        "res",
        "app_note",
        "app_unreachable",
        "inodes_note",
        "inodes_high",
        "writable_note",
        "not_writable",
        "es_note",
        "es_unreachable",
        "indexable_note",
        "cluster_note",
        "app_addrs",
        "addr",
        "r",
        "addr",
        "inodes_note",
        "writable_note",
        "res",
        "app_note",
        "eddr",
        "r",
        "eddr",
        "res",
        "res",
        "es_note",
        "es_addr",
        "es_addr",
        "es",
        "res",
        "k",
        "ces",
        "res",
        "cluster_note",
        "res",
        "cluster_note",
        "res",
        "cluster_note",
        "ts",
        "test_index",
        "test_type",
        "test_id",
        "rp",
        "indexable_note",
        "rr",
        "indexable_note",
        "rd",
        "indexable_note",
        "rg",
        "indexable_note",
        "indexable_note",
        "indexable_note",
        "indexable_note",
        "indexable_note",
        "resp",
        "resp",
        "mimetype"
    ],
    "comments": [
        "could comlete this by installing and using psutil but as disk and memory can currently",
        "be monitored directly by DO, no current need - can change if we move from DO",
        "res['disk_used_pc'] = int((float(st.f_blocks-st.f_bavail)/st.f_blocks)*100)",
        "res['memory_used_pc'] = 0",
        "to get monitoring on this, use uptime robot or similar to check that the status page",
        "contains the 'stable': True string and the following note strings",
        "disk_note = 'disk use on app machines below 95%'",
        "disk_high = 0",
        "memory_note = 'memory use on app machines below 95%'",
        "memory_high = 0",
        "TODO this list should be readable from config file, and should be detailed to port level - ask SE about this",
        "if res['ping']['apps'][addr].get('disk_used_pc',0) >= 95:",
        "disk_high += 1",
        "disk_note = 'DISK USE GREATER THAN 95% ON ' + disk_high + ' APP MACHINES'",
        "if res['ping']['apps'][addr].get('memory_used_pc',0) >= 95:",
        "memory_high += 1",
        "memory_note = 'MEMORY USE GREATER THAN 95% ON ' + memory_high + ' APP MACHINES'",
        "res['notes'].append(disk_note)",
        "res['notes'].append(memory_note)",
        "check that all necessary ES nodes can actually be pinged from this machine",
        "query ES for cluster health and nodes up",
        "remove this False if happy to test write to the index (could be a setting)"
    ],
    "docstrings": [],
    "functions": [
        "stats",
        "status"
    ],
    "classes": []
}