{
    "identifiers": [
        "alembic",
        "op",
        "sqlalchemy",
        "sa",
        "op",
        "execute",
        "enum_name",
        "tmp_name",
        "sa",
        "Enum",
        "name",
        "enum_name",
        "create",
        "op",
        "get_bind",
        "op",
        "execute",
        "enum_name",
        "enum_name",
        "op",
        "execute",
        "enum_name",
        "enum_name",
        "sa",
        "Enum",
        "name",
        "tmp_name",
        "drop",
        "op",
        "get_bind",
        "op",
        "execute",
        "enum_name",
        "tmp_name",
        "sa",
        "Enum",
        "name",
        "enum_name",
        "create",
        "op",
        "get_bind",
        "op",
        "execute",
        "op",
        "execute",
        "enum_name",
        "enum_name",
        "op",
        "execute",
        "op",
        "execute",
        "enum_name",
        "enum_name",
        "sa",
        "Enum",
        "name",
        "tmp_name",
        "drop",
        "op",
        "get_bind"
    ],
    "literals": [
        "\"377cfbfccf75\"",
        "\"b92fe567be5b\"",
        "\"workspaceretentionrulestatus\"",
        "\"workspaceretentionrulestatus_tmp\"",
        "f\"ALTER TYPE {enum_name} RENAME TO {tmp_name};\"",
        "\"created\"",
        "\"active\"",
        "\"inactive\"",
        "\"applied\"",
        "\"pending\"",
        "\"ALTER TABLE __reana.workspace_retention_rule \"",
        "f\"ALTER COLUMN status TYPE {enum_name} \"",
        "f\"USING status::text::{enum_name};\"",
        "\"ALTER TABLE __reana.workspace_retention_audit_log \"",
        "f\"ALTER COLUMN action TYPE {enum_name} \"",
        "f\"USING action::text::{enum_name};\"",
        "f\"ALTER TYPE {enum_name} RENAME TO {tmp_name};\"",
        "\"created\"",
        "\"active\"",
        "\"inactive\"",
        "\"applied\"",
        "\"UPDATE __reana.workspace_retention_rule \"",
        "\"SET status='active' WHERE status='pending';\"",
        "\"ALTER TABLE __reana.workspace_retention_rule \"",
        "f\"ALTER COLUMN status TYPE {enum_name} \"",
        "f\"USING status::text::{enum_name};\"",
        "\"DELETE FROM __reana.workspace_retention_audit_log WHERE action='pending';\"",
        "\"ALTER TABLE __reana.workspace_retention_audit_log \"",
        "f\"ALTER COLUMN action TYPE {enum_name} \"",
        "f\"USING action::text::{enum_name};\""
    ],
    "variables": [
        "revision",
        "down_revision",
        "branch_labels",
        "depends_on",
        "enum_name",
        "tmp_name"
    ],
    "comments": [
        "revision identifiers, used by Alembic.",
        "Name of the status enum type",
        "Rename the old enum type to a temporary name",
        "Create the new enum type adding the `pending` status",
        "Convert the status column in the retention rules table to the new type",
        "Convert the action column in the audit log table to the new type",
        "Delete the old enum type",
        "Change the status of all the pending rules to `active`",
        "Delete all the audit log entries that have `pending` as action"
    ],
    "docstrings": [
        "\"\"\"Retention rules pending status.\n\nRevision ID: 377cfbfccf75\nRevises: b92fe567be5b\nCreate Date: 2022-10-06 11:40:29.912743\n\n\"\"\"",
        "\"\"\"Upgrade to 377cfbfccf75 revision.\"\"\"",
        "\"\"\"Downgrade to b92fe567be5b revision.\"\"\""
    ],
    "functions": [
        "upgrade",
        "downgrade"
    ],
    "classes": []
}