{
    "identifiers": [
        "glob",
        "os",
        "sys",
        "sys",
        "path",
        "append",
        "glob",
        "glob",
        "sys",
        "version_info",
        "major",
        "sys",
        "version_info",
        "minor",
        "os",
        "name",
        "IndexError",
        "carla",
        "datadescriptor",
        "KittiDescriptor",
        "camera_utils",
        "constants",
        "WINDOW_HEIGHT",
        "WINDOW_WIDTH",
        "MAX_RENDER_DEPTH_IN_METERS",
        "MIN_VISIBLE_VERTICES_FOR_RENDER",
        "VISIBLE_VERTEX_COLOR",
        "OCCLUDED_VERTEX_COLOR",
        "MIN_BBOX_AREA_IN_PX",
        "utils",
        "degrees_to_radians",
        "logging",
        "image_converter",
        "depth_to_array",
        "numpy",
        "np",
        "transform",
        "points",
        "points",
        "transpose",
        "np",
        "append",
        "points",
        "np",
        "ones",
        "points",
        "shape",
        "axis",
        "np",
        "mat",
        "transform",
        "get_matrix",
        "points",
        "points",
        "transpose",
        "agent",
        "intrinsic_mat",
        "extrinsic_mat",
        "ext",
        "bbox_transform",
        "agent_transform",
        "rotRP",
        "vertices_from_extension",
        "ext",
        "transform_points",
        "bbox_transform",
        "bbox",
        "transform_points",
        "agent_transform",
        "bbox",
        "vertices_to_2d_coords",
        "bbox",
        "intrinsic_mat",
        "extrinsic_mat",
        "vertices_pos2d",
        "image",
        "vertices_pos2d",
        "depth_map",
        "draw_vertices",
        "y_2d",
        "x_2d",
        "vertex_depth",
        "vertices_pos2d",
        "MAX_RENDER_DEPTH_IN_METERS",
        "vertex_depth",
        "point_in_canvas",
        "y_2d",
        "x_2d",
        "point_is_occluded",
        "y_2d",
        "x_2d",
        "vertex_depth",
        "depth_map",
        "is_occluded",
        "OCCLUDED_VERTEX_COLOR",
        "num_visible_vertices",
        "VISIBLE_VERTEX_COLOR",
        "draw_vertices",
        "draw_rect",
        "image",
        "y_2d",
        "x_2d",
        "vertex_color",
        "num_vertices_outside_camera",
        "num_visible_vertices",
        "num_vertices_outside_camera",
        "agent",
        "intrinsic_mat",
        "extrinsic_mat",
        "image",
        "depth_image",
        "player",
        "rotRP",
        "draw_3D_bbox",
        "transforms_from_agent",
        "agent",
        "obj_type",
        "logging",
        "warning",
        "image",
        "bbox_2d_from_agent",
        "agent",
        "intrinsic_mat",
        "extrinsic_mat",
        "ext",
        "bbox_transform",
        "agent_transform",
        "rotRP",
        "depth_to_array",
        "depth_image",
        "calculate_occlusion_stats",
        "image",
        "vertices_pos2d",
        "depth_map",
        "draw_vertices",
        "draw_3D_bbox",
        "midpoint_from_agent_location",
        "image",
        "location",
        "extrinsic_mat",
        "intrinsic_mat",
        "x",
        "x",
        "midpoint",
        "math",
        "pi",
        "KittiDescriptor",
        "x",
        "x",
        "y",
        "y",
        "datapoint_c",
        "set_bbox",
        "get_relative_rotation_y",
        "agent",
        "player",
        "pi",
        "datapoint_c",
        "set_3d_object_dimensions",
        "ext",
        "datapoint_c",
        "set_type",
        "obj_type",
        "datapoint_c",
        "set_3d_object_location",
        "midpoint",
        "datapoint_c",
        "set_rotation_y",
        "rotation_y",
        "num_visible_vertices",
        "MIN_VISIBLE_VERTICES_FOR_RENDER",
        "num_vertices_outside_camera",
        "calc_projected_2d_bbox",
        "vertices_pos2d",
        "datapoint_c",
        "set_bbox",
        "bbox_2d",
        "num_visible_vertices",
        "MIN_VISIBLE_VERTICES_FOR_RENDER",
        "num_vertices_outside_camera",
        "calc_projected_2d_bbox",
        "vertices_pos2d",
        "calc_bbox2d_area",
        "bbox_2d",
        "area",
        "MIN_BBOX_AREA_IN_PX",
        "logging",
        "info",
        "format",
        "area",
        "image",
        "draw_3D_bbox",
        "draw_3d_bounding_box",
        "image",
        "vertices_pos2d",
        "get_relative_rotation_y",
        "agent",
        "player",
        "pi",
        "KittiDescriptor",
        "datapoint",
        "set_bbox",
        "bbox_2d",
        "datapoint",
        "set_3d_object_dimensions",
        "ext",
        "datapoint",
        "set_type",
        "obj_type",
        "datapoint",
        "set_3d_object_location",
        "midpoint",
        "datapoint",
        "set_rotation_y",
        "rotation_y",
        "num_visible_vertices",
        "MIN_VISIBLE_VERTICES_FOR_RENDER",
        "num_vertices_outside_camera",
        "calc_projected_2d_bbox",
        "vertices_pos2d",
        "calc_bbox2d_area",
        "bbox_2d",
        "area",
        "MIN_BBOX_AREA_IN_PX",
        "logging",
        "info",
        "format",
        "area",
        "image",
        "draw_3D_bbox",
        "draw_3d_invisible_bounding_box",
        "image",
        "vertices_pos2d",
        "flag",
        "image",
        "datapoint_c",
        "datapoint",
        "flag",
        "image",
        "datapoint_c",
        "image",
        "agent",
        "intrinsic_mat",
        "extrinsic_mat",
        "image",
        "depth_image",
        "player",
        "rotRP",
        "draw_3D_bbox",
        "transforms_from_agent",
        "agent",
        "obj_type",
        "logging",
        "warning",
        "image",
        "bbox_2d_from_agent",
        "agent",
        "intrinsic_mat",
        "extrinsic_mat",
        "ext",
        "bbox_transform",
        "agent_transform",
        "rotRP",
        "depth_to_array",
        "depth_image",
        "calculate_occlusion_stats",
        "image",
        "vertices_pos2d",
        "depth_map",
        "draw_vertices",
        "midpoint_from_agent_location",
        "image",
        "location",
        "extrinsic_mat",
        "intrinsic_mat",
        "x",
        "x",
        "midpoint",
        "math",
        "pi",
        "KittiDescriptor",
        "num_visible_vertices",
        "MIN_VISIBLE_VERTICES_FOR_RENDER",
        "num_vertices_outside_camera",
        "calc_projected_2d_bbox",
        "vertices_pos2d",
        "calc_bbox2d_area",
        "bbox_2d",
        "area",
        "MIN_BBOX_AREA_IN_PX",
        "logging",
        "info",
        "format",
        "area",
        "image",
        "draw_3D_bbox",
        "draw_3d_invisible_bounding_box",
        "image",
        "vertices_pos2d",
        "image",
        "agent",
        "intrinsic_mat",
        "extrinsic_mat",
        "image",
        "depth_image",
        "player",
        "rotRP",
        "draw_3D_bbox",
        "transforms_from_agent",
        "agent",
        "obj_type",
        "logging",
        "warning",
        "image",
        "bbox_2d_from_agent",
        "agent",
        "intrinsic_mat",
        "extrinsic_mat",
        "ext",
        "bbox_transform",
        "agent_transform",
        "rotRP",
        "depth_to_array",
        "depth_image",
        "calculate_occlusion_stats",
        "image",
        "vertices_pos2d",
        "depth_map",
        "draw_vertices",
        "draw_3D_bbox",
        "midpoint_from_agent_location",
        "image",
        "location",
        "extrinsic_mat",
        "intrinsic_mat",
        "x",
        "x",
        "midpoint",
        "math",
        "pi",
        "KittiDescriptor",
        "x",
        "x",
        "y",
        "y",
        "datapoint_c",
        "set_bbox",
        "get_relative_rotation_y",
        "agent",
        "player",
        "pi",
        "datapoint_c",
        "set_3d_object_dimensions",
        "ext",
        "datapoint_c",
        "set_type",
        "obj_type",
        "datapoint_c",
        "set_3d_object_location",
        "midpoint",
        "datapoint_c",
        "set_rotation_y",
        "rotation_y",
        "num_visible_vertices",
        "MIN_VISIBLE_VERTICES_FOR_RENDER",
        "num_vertices_outside_camera",
        "calc_projected_2d_bbox",
        "vertices_pos2d",
        "datapoint_c",
        "set_bbox",
        "bbox_2d",
        "num_visible_vertices",
        "MIN_VISIBLE_VERTICES_FOR_RENDER",
        "num_vertices_outside_camera",
        "calc_projected_2d_bbox",
        "vertices_pos2d",
        "calc_bbox2d_area",
        "bbox_2d",
        "area",
        "MIN_BBOX_AREA_IN_PX",
        "logging",
        "info",
        "format",
        "area",
        "image",
        "draw_3D_bbox",
        "draw_3d_bounding_box",
        "image",
        "vertices_pos2d",
        "get_relative_rotation_y",
        "agent",
        "player",
        "pi",
        "KittiDescriptor",
        "datapoint",
        "set_bbox",
        "bbox_2d",
        "datapoint",
        "set_3d_object_dimensions",
        "ext",
        "datapoint",
        "set_type",
        "obj_type",
        "datapoint",
        "set_3d_object_location",
        "midpoint",
        "datapoint",
        "set_rotation_y",
        "rotation_y",
        "flag",
        "image",
        "datapoint_c",
        "datapoint",
        "flag",
        "image",
        "datapoint_c",
        "image",
        "agent",
        "intrinsic_mat",
        "extrinsic_mat",
        "image",
        "depth_image",
        "player",
        "rotRP",
        "draw_3D_bbox",
        "transforms_from_agent",
        "agent",
        "obj_type",
        "logging",
        "warning",
        "image",
        "bbox_2d_from_agent",
        "agent",
        "intrinsic_mat",
        "extrinsic_mat",
        "ext",
        "bbox_transform",
        "agent_transform",
        "rotRP",
        "depth_to_array",
        "depth_image",
        "calculate_occlusion_stats",
        "image",
        "vertices_pos2d",
        "depth_map",
        "draw_vertices",
        "draw_3D_bbox",
        "midpoint_from_agent_location",
        "image",
        "location",
        "extrinsic_mat",
        "intrinsic_mat",
        "math",
        "pi",
        "num_visible_vertices",
        "MIN_VISIBLE_VERTICES_FOR_RENDER",
        "num_vertices_outside_camera",
        "calc_projected_2d_bbox",
        "vertices_pos2d",
        "calc_bbox2d_area",
        "bbox_2d",
        "area",
        "MIN_BBOX_AREA_IN_PX",
        "logging",
        "info",
        "format",
        "area",
        "image",
        "draw_3D_bbox",
        "draw_3d_bounding_box",
        "image",
        "vertices_pos2d",
        "get_relative_rotation_y",
        "agent",
        "player",
        "pi",
        "KittiDescriptor",
        "datapoint",
        "set_bbox",
        "bbox_2d",
        "datapoint",
        "set_3d_object_dimensions",
        "ext",
        "datapoint",
        "set_type",
        "obj_type",
        "datapoint",
        "set_3d_object_location",
        "midpoint",
        "datapoint",
        "set_rotation_y",
        "rotation_y",
        "image",
        "datapoint",
        "image",
        "agent",
        "intrinsic_mat",
        "extrinsic_mat",
        "image",
        "depth_image",
        "player",
        "rotRP",
        "draw_3D_bbox",
        "transforms_from_agent",
        "agent",
        "obj_type",
        "logging",
        "warning",
        "image",
        "bbox_2d_from_agent",
        "agent",
        "intrinsic_mat",
        "extrinsic_mat",
        "ext",
        "bbox_transform",
        "agent_transform",
        "rotRP",
        "depth_to_array",
        "depth_image",
        "calculate_occlusion_stats",
        "image",
        "vertices_pos2d",
        "depth_map",
        "draw_vertices",
        "draw_3D_bbox",
        "midpoint_from_agent_location",
        "image",
        "location",
        "extrinsic_mat",
        "intrinsic_mat",
        "x",
        "x",
        "midpoint",
        "x",
        "x",
        "y",
        "y",
        "KittiDescriptor",
        "datapoint",
        "set_bbox",
        "num_visible_vertices",
        "MIN_VISIBLE_VERTICES_FOR_RENDER",
        "num_vertices_outside_camera",
        "calc_projected_2d_bbox",
        "vertices_pos2d",
        "calc_bbox2d_area",
        "bbox_2d",
        "area",
        "MIN_BBOX_AREA_IN_PX",
        "logging",
        "info",
        "format",
        "area",
        "datapoint",
        "set_bbox",
        "bbox_2d",
        "math",
        "pi",
        "get_relative_rotation_y",
        "agent",
        "player",
        "pi",
        "datapoint",
        "set_3d_object_dimensions",
        "ext",
        "datapoint",
        "set_type",
        "obj_type",
        "datapoint",
        "set_3d_object_location",
        "midpoint",
        "datapoint",
        "set_rotation_y",
        "rotation_y",
        "datapoint",
        "agent",
        "player",
        "agent",
        "get_transform",
        "agent",
        "get_transform",
        "rotation",
        "yaw",
        "player",
        "get_transform",
        "rotation",
        "yaw",
        "degrees_to_radians",
        "rot_agent",
        "rot_car",
        "bbox",
        "intrinsic_mat",
        "extrinsic_mat",
        "vertex",
        "bbox",
        "vertex_to_world_vector",
        "vertex",
        "proj_to_camera",
        "pos_vector",
        "extrinsic_mat",
        "proj_to_2d",
        "transformed_3d_pos",
        "intrinsic_mat",
        "pos2d",
        "pos2d",
        "pos2d",
        "vertices_pos2d",
        "append",
        "y_2d",
        "x_2d",
        "vertex_depth",
        "vertices_pos2d",
        "vertex",
        "np",
        "array",
        "vertex",
        "vertex",
        "vertex",
        "ext",
        "np",
        "array",
        "ext",
        "x",
        "ext",
        "y",
        "ext",
        "z",
        "ext",
        "x",
        "ext",
        "y",
        "ext",
        "z",
        "ext",
        "x",
        "ext",
        "y",
        "ext",
        "z",
        "ext",
        "x",
        "ext",
        "y",
        "ext",
        "z",
        "ext",
        "x",
        "ext",
        "y",
        "ext",
        "z",
        "ext",
        "x",
        "ext",
        "y",
        "ext",
        "z",
        "ext",
        "x",
        "ext",
        "y",
        "ext",
        "z",
        "ext",
        "x",
        "ext",
        "y",
        "ext",
        "z",
        "agent",
        "agent",
        "type_id",
        "find",
        "agent",
        "get_transform",
        "carla",
        "Transform",
        "agent",
        "bounding_box",
        "location",
        "agent",
        "bounding_box",
        "rotation",
        "agent",
        "bounding_box",
        "extent",
        "agent_transform",
        "location",
        "z",
        "ext",
        "z",
        "bbox_transform",
        "location",
        "z",
        "ext",
        "z",
        "agent",
        "get_transform",
        "location",
        "location",
        "z",
        "ext",
        "z",
        "agent",
        "type_id",
        "find",
        "agent",
        "get_transform",
        "carla",
        "Transform",
        "agent",
        "bounding_box",
        "location",
        "agent",
        "bounding_box",
        "rotation",
        "agent",
        "bounding_box",
        "extent",
        "agent",
        "get_transform",
        "location",
        "obj_type",
        "agent_transform",
        "bbox_transform",
        "ext",
        "location",
        "bbox_2d",
        "bbox_2d",
        "ymax",
        "ymin",
        "xmax",
        "xmin"
    ],
    "literals": [
        "'../carla/dist/carla-*%d.%d-%s.egg'",
        "'win-amd64'",
        "'nt'",
        "'linux-x86_64'",
        "\"Could not get bounding box for agent. Object type is None\"",
        "\"Filtered out bbox with too low area {}\"",
        "\"Filtered out bbox with too low area {}\"",
        "\"Could not get bounding box for agent. Object type is None\"",
        "\"Filtered out bbox with too low area {}\"",
        "\"Could not get bounding box for agent. Object type is None\"",
        "\"Filtered out bbox with too low area {}\"",
        "\"Could not get bounding box for agent. Object type is None\"",
        "\"Filtered out bbox with too low area {}\"",
        "\"Could not get bounding box for agent. Object type is None\"",
        "\"Filtered out bbox with too low area {}\"",
        "'walker'",
        "'Pedestrian'",
        "'vehicle'",
        "'Car'"
    ],
    "variables": [
        "points",
        "points",
        "points",
        "bbox",
        "bbox",
        "bbox",
        "vertices_pos2d",
        "num_visible_vertices",
        "num_vertices_outside_camera",
        "is_occluded",
        "vertex_color",
        "vertex_color",
        "obj_type",
        "agent_transform",
        "bbox_transform",
        "ext",
        "location",
        "vertices_pos2d",
        "depth_map",
        "num_visible_vertices",
        "num_vertices_outside_camera",
        "midpoint",
        "x",
        "y",
        "z",
        "flag",
        "datapoint_c",
        "flag",
        "rotation_y",
        "bbox_2d",
        "flag",
        "bbox_2d",
        "area",
        "rotation_y",
        "datapoint",
        "bbox_2d",
        "area",
        "obj_type",
        "agent_transform",
        "bbox_transform",
        "ext",
        "location",
        "vertices_pos2d",
        "depth_map",
        "num_visible_vertices",
        "num_vertices_outside_camera",
        "midpoint",
        "x",
        "y",
        "z",
        "flag",
        "datapoint_c",
        "bbox_2d",
        "area",
        "obj_type",
        "agent_transform",
        "bbox_transform",
        "ext",
        "location",
        "vertices_pos2d",
        "depth_map",
        "num_visible_vertices",
        "num_vertices_outside_camera",
        "midpoint",
        "x",
        "y",
        "z",
        "flag",
        "datapoint_c",
        "flag",
        "rotation_y",
        "bbox_2d",
        "flag",
        "bbox_2d",
        "area",
        "rotation_y",
        "datapoint",
        "obj_type",
        "agent_transform",
        "bbox_transform",
        "ext",
        "location",
        "vertices_pos2d",
        "depth_map",
        "num_visible_vertices",
        "num_vertices_outside_camera",
        "midpoint",
        "bbox_2d",
        "area",
        "rotation_y",
        "datapoint",
        "obj_type",
        "agent_transform",
        "bbox_transform",
        "ext",
        "location",
        "vertices_pos2d",
        "depth_map",
        "num_visible_vertices",
        "num_vertices_outside_camera",
        "midpoint",
        "x",
        "y",
        "z",
        "datapoint",
        "bbox_2d",
        "area",
        "rotation_y",
        "rot_agent",
        "rot_car",
        "vertices_pos2d",
        "pos_vector",
        "transformed_3d_pos",
        "pos2d",
        "vertex_depth",
        "x_2d",
        "y_2d",
        "obj_type",
        "agent_transform",
        "bbox_transform",
        "ext",
        "location",
        "obj_type",
        "agent_transform",
        "bbox_transform",
        "ext",
        "location",
        "xmin",
        "ymin",
        "xmax",
        "ymax"
    ],
    "comments": [
        "Needed foramt: [[X0,..Xn],[Z0,..Zn],[Z0,..Zn]]. So let's transpose",
        "the point matrix.",
        "Add 0s row: [[X0..,Xn],[Y0..,Yn],[Z0..,Zn],[0,..0]]",
        "Point transformation",
        "Return all but last row",
        "rotRP expects point to be in Kitti lidar format",
        "transform the vertices respect to the bounding box transform",
        "the bounding box transform is respect to the agents transform",
        "so let's transform the points relative to it's transform",
        "agents's transform is relative to the world, so now,",
        "bbox contains the 3D bounding box vertices relative to the world",
        "Additionally, you can logging.info these vertices to check that is working",
        "Store each vertex 2d points for drawing bounding boxes later",
        "if the point is in front of the camera but not too far away",
        "取余数",
        "At least N vertices has to be visible in order to draw bbox",
        "取余数",
        "取余数",
        "At least N vertices has to be visible in order to draw bbox",
        "取余数",
        "x, y, z = [float(x) for x in midpoint][0:3]",
        "At least N vertices has to be visible in order to draw bbox",
        "取余数",
        "At least N vertices has to be visible in order to draw bbox",
        "xiu gai",
        "取余数",
        "We only car about the rotation for the classes we do detection on",
        "Camera coordinates",
        "2d pixel coordinates",
        "The actual rendered depth (may be wall or other object instead of vertex)",
        "x_2d, y_2d = WINDOW_WIDTH - pos2d[0],  WINDOW_HEIGHT - pos2d[1]",
        "[[X,",
        "Y,",
        "Z,",
        "1.0]]",
        "Top left front",
        "Top left back",
        "Top right front",
        "Top right back",
        "Bottom left front",
        "Bottom left back",
        "Bottom right front",
        "Bottom right back",
        "print(\"walker\")",
        "print(bbox_transform)",
        "print(\"car\")",
        "print(bbox_transform)"
    ],
    "docstrings": [
        "\"\"\"\n    Given a 4x4 transformation matrix, transform an array of 3D points.\n    Expected point foramt: [[X0,Y0,Z0],..[Xn,Yn,Zn]]\n    \"\"\"",
        "\"\"\" Creates bounding boxes for a given agent and camera/world calibration matrices.\n        Returns the modified image that contains the screen rendering with drawn on vertices from the agent \"\"\"",
        "\"\"\" Draws each vertex in vertices_pos2d if it is in front of the camera \n        The color is based on whether the object is occluded or not.\n        Returns the number of visible vertices and the number of vertices outside the camera.\n    \"\"\"",
        "\"\"\" Calculates the bounding box of the given agent, and returns a KittiDescriptor which describes the object to\n    be labeled \"\"\"",
        "\"\"\" Calculates the bounding box of the given agent, and returns a KittiDescriptor which describes the object to\n    be labeled \"\"\"",
        "\"\"\" Calculates the bounding box of the given agent, and returns a KittiDescriptor which describes the object to\n    be labeled \"\"\"",
        "\"\"\" Calculates the bounding box of the given agent, and returns a KittiDescriptor which describes the object to\n    be labeled \"\"\"",
        "\"\"\" Calculates the bounding box of the given agent, and returns a KittiDescriptor which describes the object to\n    be labeled \"\"\"",
        "\"\"\" Returns the relative rotation of the agent to the camera in yaw\n    The relative rotation is the difference between the camera rotation (on car) and the agent rotation\"\"\"",
        "\"\"\" Accepts a bbox which is a list of 3d world coordinates and returns a list \n        of the 2d pixel coordinates of each vertex. \n        This is represented as a tuple (y, x, d) where y and x are the 2d pixel coordinates\n        while d is the depth. The depth can be used for filtering visible vertices.\n    \"\"\"",
        "\"\"\" Returns the coordinates of the vector in correct carla world format (X,Y,Z,1) \"\"\"",
        "\"\"\" Extraxts the 8 bounding box vertices relative to (0,0,0)\n    https://github.com/carla-simulator/carla/commits/master/Docs/img/vehicle_bounding_box.png \n    8 bounding box vertices relative to (0,0,0)\n    \"\"\"",
        "\"\"\" Returns the KITTI object type and transforms, locations and extension of the given agent \"\"\"",
        "\"\"\" Calculate the area of the given 2d bbox\n    Input is assumed to be xmin, ymin, xmax, ymax tuple \n    \"\"\""
    ],
    "functions": [
        "transform_points",
        "bbox_2d_from_agent",
        "calculate_occlusion_stats",
        "create_kitti_datapoint_ego",
        "create_kitti_datapoint_ego_invi",
        "create_kitti_datapoint",
        "create_kitti_datapoint_ori",
        "create_kitti_datapoint_cloud",
        "get_relative_rotation_y",
        "vertices_to_2d_coords",
        "vertex_to_world_vector",
        "vertices_from_extension",
        "transforms_from_agent",
        "calc_bbox2d_area"
    ],
    "classes": []
}