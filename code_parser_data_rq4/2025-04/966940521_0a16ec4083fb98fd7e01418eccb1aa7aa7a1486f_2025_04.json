{
    "identifiers": [
        "Microsoft",
        "EntityFrameworkCore",
        "ShishaBuilder",
        "Core",
        "DB",
        "ShishaBuilder",
        "Core",
        "Models",
        "ShishaBuilder",
        "Core",
        "Repositories",
        "OrderRepositories",
        "ShishaBuilder",
        "Business",
        "Repositories",
        "OrderRepositories",
        "IOrderRepository",
        "AppDbContext",
        "context",
        "context",
        "context",
        "Order",
        "Order",
        "order",
        "context",
        "Database",
        "BeginTransactionAsync",
        "context",
        "Orders",
        "AddAsync",
        "order",
        "context",
        "SaveChangesAsync",
        "tobacco",
        "order",
        "OrderTobaccos",
        "tobacco",
        "OrderId",
        "order",
        "Id",
        "context",
        "OrderTobaccos",
        "AddAsync",
        "tobacco",
        "context",
        "SaveChangesAsync",
        "transaction",
        "CommitAsync",
        "order",
        "ex",
        "transaction",
        "RollbackAsync",
        "ex",
        "Message",
        "ex",
        "Order",
        "context",
        "Orders",
        "Include",
        "o",
        "OrderTobaccos",
        "ToListAsync",
        "Order",
        "id",
        "context",
        "Orders",
        "Include",
        "o",
        "OrderTobaccos",
        "FirstOrDefaultAsync",
        "o",
        "Id",
        "id",
        "Order",
        "order",
        "context",
        "Orders",
        "Include",
        "o",
        "OrderTobaccos",
        "FirstOrDefaultAsync",
        "o",
        "Id",
        "order",
        "Id",
        "existingOrder",
        "context",
        "Entry",
        "existingOrder",
        "CurrentValues",
        "SetValues",
        "order",
        "UpdateOrderTobaccos",
        "existingOrder",
        "order",
        "OrderTobaccos",
        "context",
        "SaveChangesAsync",
        "Order",
        "existingOrder",
        "ICollection",
        "OrderTobacco",
        "newTobaccos",
        "existing",
        "existingOrder",
        "OrderTobaccos",
        "ToList",
        "newTobaccos",
        "Any",
        "ot",
        "TobaccoId",
        "existing",
        "TobaccoId",
        "context",
        "OrderTobaccos",
        "Remove",
        "existing",
        "newTobacco",
        "newTobaccos",
        "existingOrder",
        "OrderTobaccos",
        "FirstOrDefault",
        "ot",
        "TobaccoId",
        "newTobacco",
        "TobaccoId",
        "existing",
        "context",
        "Entry",
        "existing",
        "CurrentValues",
        "SetValues",
        "newTobacco",
        "existingOrder",
        "OrderTobaccos",
        "Add",
        "OrderTobacco",
        "TobaccoId",
        "newTobacco",
        "TobaccoId",
        "Percentage",
        "newTobacco",
        "Percentage"
    ],
    "literals": [
        "\"Order not found\""
    ],
    "variables": [
        "AppDbContext",
        "context",
        "transaction",
        "existingOrder",
        "existing"
    ],
    "comments": [
        "1. Сохраняем Order (чтобы получить ID)",
        "2. Устанавливаем OrderId для всех OrderTobacco и сохраняем их",
        "Устанавливаем связь",
        "Сохраняем табаки",
        "Добавляем загрузку табаков",
        "Загружаем существующий заказ с табаками",
        "Обновляем основные поля",
        "Обновляем коллекцию табаков",
        "Удаляем отсутствующие",
        "Добавляем/обновляем",
        "Обновляем существующий",
        "Добавляем новый"
    ],
    "docstrings": [],
    "functions": [
        "OrderRepository",
        "AddOrderAsync",
        "GetAllOrdersAsync",
        "GetOrderByIdAsync",
        "UpdateOrderAsync",
        "UpdateOrderTobaccos"
    ],
    "classes": [
        "OrderRepository"
    ]
}