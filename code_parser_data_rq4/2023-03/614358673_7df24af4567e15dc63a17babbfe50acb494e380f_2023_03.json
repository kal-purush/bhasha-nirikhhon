{
    "identifiers": [
        "random",
        "instana",
        "os",
        "sys",
        "time",
        "logging",
        "uuid",
        "json",
        "requests",
        "traceback",
        "flask",
        "Flask",
        "flask",
        "Response",
        "flask",
        "request",
        "flask",
        "jsonify",
        "rabbitmq",
        "Publisher",
        "prometheus_client",
        "prometheus_client",
        "Counter",
        "Histogram",
        "Flask",
        "app",
        "logger",
        "setLevel",
        "logging",
        "INFO",
        "os",
        "getenv",
        "os",
        "getenv",
        "os",
        "getenv",
        "Counter",
        "Histogram",
        "buckets",
        "Histogram",
        "buckets",
        "app",
        "errorhandler",
        "err",
        "app",
        "logger",
        "error",
        "err",
        "err",
        "app",
        "route",
        "methods",
        "app",
        "route",
        "methods",
        "m",
        "PromMetrics",
        "values",
        "res",
        "append",
        "prometheus_client",
        "generate_latest",
        "m",
        "Response",
        "res",
        "mimetype",
        "app",
        "route",
        "methods",
        "id",
        "app",
        "logger",
        "info",
        "format",
        "id",
        "request",
        "get_json",
        "app",
        "logger",
        "info",
        "cart",
        "requests",
        "get",
        "format",
        "user",
        "USER",
        "id",
        "id",
        "requests",
        "exceptions",
        "RequestException",
        "err",
        "app",
        "logger",
        "error",
        "err",
        "err",
        "req",
        "status_code",
        "item",
        "cart",
        "get",
        "item",
        "get",
        "cart",
        "get",
        "has_shipping",
        "app",
        "logger",
        "warn",
        "requests",
        "get",
        "PAYMENT_GATEWAY",
        "app",
        "logger",
        "info",
        "format",
        "PAYMENT_GATEWAY",
        "req",
        "status_code",
        "requests",
        "exceptions",
        "RequestException",
        "err",
        "app",
        "logger",
        "error",
        "err",
        "err",
        "req",
        "status_code",
        "req",
        "status_code",
        "countItems",
        "cart",
        "get",
        "PromMetrics",
        "inc",
        "item_count",
        "PromMetrics",
        "observe",
        "item_count",
        "PromMetrics",
        "observe",
        "cart",
        "get",
        "uuid",
        "uuid4",
        "queueOrder",
        "orderid",
        "id",
        "cart",
        "anonymous_user",
        "requests",
        "post",
        "format",
        "user",
        "USER",
        "id",
        "id",
        "data",
        "json",
        "dumps",
        "orderid",
        "cart",
        "headers",
        "app",
        "logger",
        "info",
        "format",
        "req",
        "status_code",
        "requests",
        "exceptions",
        "RequestException",
        "err",
        "app",
        "logger",
        "error",
        "err",
        "err",
        "requests",
        "format",
        "cart",
        "CART",
        "id",
        "id",
        "app",
        "logger",
        "info",
        "format",
        "req",
        "status_code",
        "requests",
        "exceptions",
        "RequestException",
        "err",
        "app",
        "logger",
        "error",
        "err",
        "err",
        "req",
        "status_code",
        "req",
        "status_code",
        "jsonify",
        "orderid",
        "order",
        "app",
        "logger",
        "info",
        "os",
        "getenv",
        "time",
        "sleep",
        "delay",
        "publisher",
        "publish",
        "order",
        "headers",
        "items",
        "item",
        "items",
        "item",
        "get",
        "count",
        "item",
        "get",
        "count",
        "Publisher",
        "app",
        "logger",
        "logging",
        "StreamHandler",
        "sys",
        "stdout",
        "sh",
        "setLevel",
        "logging",
        "INFO",
        "logging",
        "Formatter",
        "app",
        "logger",
        "info",
        "format",
        "PAYMENT_GATEWAY",
        "os",
        "getenv",
        "app",
        "logger",
        "info",
        "format",
        "port",
        "app",
        "run",
        "host",
        "port",
        "port"
    ],
    "literals": [
        "'CART_HOST'",
        "'cart'",
        "'USER_HOST'",
        "'user'",
        "'PAYMENT_GATEWAY'",
        "'https://paypal.com/'",
        "'SOLD_COUNTER'",
        "'sold_count'",
        "'Running count of items sold'",
        "'AUS'",
        "'units_sold'",
        "'Avergae Unit Sale'",
        "'AVS'",
        "'cart_value'",
        "'Avergae Value Sale'",
        "'/health'",
        "'GET'",
        "'OK'",
        "'/metrics'",
        "'GET'",
        "'text/plain'",
        "'/pay/<id>'",
        "'POST'",
        "'payment for {}'",
        "'http://{user}:8080/check/{id}'",
        "'items'",
        "'sku'",
        "'SHIP'",
        "'total'",
        "'cart not valid'",
        "'cart not valid'",
        "'{} returned {}'",
        "'payment error'",
        "'items'",
        "'SOLD_COUNTER'",
        "'AUS'",
        "'AVS'",
        "'total'",
        "'orderid'",
        "'user'",
        "'cart'",
        "'http://{user}:8080/order/{id}'",
        "'orderid'",
        "'cart'",
        "'Content-Type'",
        "'application/json'",
        "'order history returned {}'",
        "'http://{cart}:8080/cart/{id}'",
        "'cart delete returned {}'",
        "'order history update error'",
        "'orderid'",
        "'queue order'",
        "'PAYMENT_DELAY_MS'",
        "'sku'",
        "'SHIP'",
        "'qty'",
        "\"__main__\"",
        "'%(asctime)s - %(name)s - %(levelname)s - %(message)s'",
        "'Payment gateway {}'",
        "\"SHOP_PAYMENT_PORT\"",
        "\"8080\"",
        "'Starting on port {}'",
        "'0.0.0.0'"
    ],
    "variables": [
        "app",
        "CART",
        "USER",
        "PAYMENT_GATEWAY",
        "PromMetrics",
        "PromMetrics",
        "PromMetrics",
        "PromMetrics",
        "res",
        "cart",
        "anonymous_user",
        "req",
        "anonymous_user",
        "has_shipping",
        "has_shipping",
        "req",
        "item_count",
        "orderid",
        "req",
        "req",
        "delay",
        "headers",
        "count",
        "publisher",
        "sh",
        "fmt",
        "port"
    ],
    "comments": [
        "Prometheus",
        "Prometheus",
        "Prometheus",
        "check user exists",
        "check that the cart is valid",
        "this will blow up if the cart is not valid",
        "dummy call to payment gateway, hope they dont object",
        "Prometheus",
        "items purchased",
        "Generate order id",
        "add to order history",
        "delete cart",
        "For screenshot demo requirements optionally add in a bit of delay",
        "RabbitMQ"
    ],
    "docstrings": [],
    "functions": [
        "exception_handler",
        "health",
        "metrics",
        "pay",
        "queueOrder",
        "countItems"
    ],
    "classes": []
}