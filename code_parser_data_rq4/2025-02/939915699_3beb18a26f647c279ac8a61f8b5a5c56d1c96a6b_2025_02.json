{
    "identifiers": [
        "requests",
        "json",
        "os",
        "sys",
        "base64",
        "re",
        "typing",
        "Dict",
        "Any",
        "Optional",
        "Generator",
        "api_key",
        "base_url",
        "api_key",
        "os",
        "getenv",
        "api_key",
        "ValueError",
        "base_url",
        "model",
        "messages",
        "Dict",
        "Any",
        "modalities",
        "stream",
        "stream_options",
        "Dict",
        "Any",
        "Generator",
        "base_url",
        "api_key",
        "model",
        "messages",
        "modalities",
        "stream",
        "stream_options",
        "requests",
        "post",
        "url",
        "headers",
        "headers",
        "json",
        "data",
        "stream",
        "stream",
        "response",
        "status_code",
        "response",
        "status_code",
        "response",
        "text",
        "stream",
        "_process_stream",
        "response",
        "response",
        "json",
        "response",
        "line",
        "response",
        "iter_lines",
        "line",
        "line",
        "strip",
        "line",
        "startswith",
        "line",
        "decode",
        "json",
        "loads",
        "json_str",
        "chunk",
        "json",
        "JSONDecodeError",
        "e",
        "e",
        "image_path",
        "Optional",
        "image_path",
        "startswith",
        "image_path",
        "os",
        "path",
        "normpath",
        "image_path",
        "os",
        "path",
        "exists",
        "normalized_path",
        "normalized_path",
        "open",
        "normalized_path",
        "image_file",
        "base64",
        "b64encode",
        "image_file",
        "read",
        "decode",
        "e",
        "e",
        "text",
        "Dict",
        "Any",
        "re",
        "finditer",
        "image_pattern",
        "text",
        "match",
        "image_matches",
        "match",
        "start",
        "last_end",
        "text",
        "last_end",
        "match",
        "start",
        "strip",
        "text_before",
        "content",
        "append",
        "text_before",
        "match",
        "group",
        "strip",
        "encode_image_to_base64",
        "image_path",
        "image_url",
        "content",
        "append",
        "image_url",
        "content",
        "append",
        "image_path",
        "match",
        "end",
        "last_end",
        "len",
        "text",
        "text",
        "last_end",
        "strip",
        "remaining_text",
        "content",
        "append",
        "remaining_text",
        "content",
        "content",
        "append",
        "text",
        "content",
        "DashscopeClient",
        "sys",
        "stdin",
        "readline",
        "rstrip",
        "line",
        "user_input_lines",
        "append",
        "line",
        "KeyboardInterrupt",
        "join",
        "user_input_lines",
        "user_input",
        "strip",
        "process_user_input",
        "user_input",
        "messages",
        "append",
        "user_content",
        "client",
        "chat_completions_create",
        "model",
        "messages",
        "messages",
        "modalities",
        "stream",
        "stream_options",
        "chunk",
        "completion",
        "chunk",
        "chunk",
        "chunk",
        "delta",
        "delta",
        "delta",
        "content",
        "end",
        "flush",
        "full_response",
        "content",
        "chunk",
        "chunk",
        "full_response",
        "messages",
        "append",
        "full_response",
        "e",
        "e",
        "main"
    ],
    "literals": [
        "\"https://dashscope.aliyuncs.com/compatible-mode/v1\"",
        "\"DASHSCOPE_API_KEY\"",
        "\"API key is required. Set it directly or via DASHSCOPE_API_KEY environment variable.\"",
        "\"text\"",
        "\"include_usage\"",
        "f\"{self.base_url}/chat/completions\"",
        "\"Content-Type\"",
        "\"application/json\"",
        "\"Authorization\"",
        "f\"Bearer {self.api_key}\"",
        "\"model\"",
        "\"messages\"",
        "\"modalities\"",
        "\"stream\"",
        "\"stream_options\"",
        "f\"Request failed with status code: {response.status_code}\\n{response.text}\"",
        "b'data: [DONE]'",
        "b'data: '",
        "'utf-8'",
        "f\"Error decoding JSON: {e}\"",
        "'http://'",
        "'https://'",
        "f\"Warning: Image file not found: {normalized_path}\"",
        "\"rb\"",
        "f\"data:image/jpeg;base64,{base64.b64encode(image_file.read()).decode('utf-8')}\"",
        "'utf-8'",
        "f\"Error encoding image: {e}\"",
        "r\"!\\[\\]\\((.+?)\\)\"",
        "\"type\"",
        "\"text\"",
        "\"text\"",
        "\"type\"",
        "\"image_url\"",
        "\"image_url\"",
        "\"url\"",
        "\"type\"",
        "\"text\"",
        "\"text\"",
        "f\"[Image processing failed for: {image_path}]\"",
        "\"type\"",
        "\"text\"",
        "\"text\"",
        "\"type\"",
        "\"text\"",
        "\"text\"",
        "\"role\"",
        "\"system\"",
        "\"content\"",
        "\"type\"",
        "\"text\"",
        "\"text\"",
        "\"You are a helpful assistant.\"",
        "\"Type your message and end with '</end>' on a new line.\"",
        "\"To include images, use the syntax: ![](path_or_url_to_image)\"",
        "\"-\"",
        "\"\\nUser: (end with '</end>' on a new line)\"",
        "\"\\n\"",
        "\"</end>\"",
        "\"\\nExiting program...\"",
        "\"\\n\"",
        "\"role\"",
        "\"user\"",
        "\"content\"",
        "\"\\nAssistant: \"",
        "\"\"",
        "\"qwen-omni-turbo\"",
        "\"text\"",
        "\"include_usage\"",
        "\"choices\"",
        "\"choices\"",
        "\"choices\"",
        "\"delta\"",
        "\"content\"",
        "\"content\"",
        "\"content\"",
        "\"\"",
        "\"usage\"",
        "\"\\n\\nUsage:\"",
        "\"usage\"",
        "\"role\"",
        "\"assistant\"",
        "\"content\"",
        "\"type\"",
        "\"text\"",
        "\"text\"",
        "f\"\\nError: {str(e)}\"",
        "\"__main__\""
    ],
    "variables": [
        "api_key",
        "base_url",
        "url",
        "headers",
        "data",
        "response",
        "json_str",
        "chunk",
        "normalized_path",
        "content",
        "image_pattern",
        "image_matches",
        "last_end",
        "text_before",
        "image_path",
        "image_url",
        "last_end",
        "remaining_text",
        "client",
        "messages",
        "user_input_lines",
        "line",
        "user_input",
        "user_content",
        "full_response",
        "completion",
        "delta",
        "content"
    ],
    "comments": [
        "Return the URL directly for remote images",
        "Normalize path (convert backslashes to forward slashes)",
        "Use regex to find image markdown syntax",
        "Find all image references",
        "Keep track of the last position processed",
        "Add text before this image if there is any",
        "Process the image",
        "Image successfully processed",
        "If image processing failed, add a note about it",
        "Add any remaining text after the last image",
        "If there were no images found, just return the text",
        "Initialize the client",
        "Start with a system message",
        "Read multi-line input until </end> is encountered",
        "Process input to create content with text and images",
        "Add to messages",
        "Call the API with streaming response",
        "Check for None",
        "Add the assistant's response to the conversation history",
        "Only add if we got a response"
    ],
    "docstrings": [
        "\"\"\"Initialize the Dashscope client\"\"\"",
        "\"\"\"Create a chat completion with streaming support\"\"\"",
        "\"\"\"Process streaming response\"\"\"",
        "\"\"\"Convert image to base64 encoding\"\"\"",
        "\"\"\"Process user input text to handle images and text\"\"\""
    ],
    "functions": [
        "chat_completions_create",
        "_process_stream",
        "encode_image_to_base64",
        "process_user_input",
        "main"
    ],
    "classes": [
        "DashscopeClient"
    ]
}