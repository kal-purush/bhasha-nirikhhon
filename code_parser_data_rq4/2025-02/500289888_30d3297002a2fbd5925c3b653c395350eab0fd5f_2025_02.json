{
    "identifiers": [
        "Prisma",
        "MigrationScript",
        "tx",
        "automaticActionsResult",
        "automaticActions",
        "action",
        "automaticActions",
        "tx",
        "action",
        "parseInt",
        "surveyTriggersResult",
        "triggerCount",
        "actionsToUpdate",
        "action",
        "actionsToDelete",
        "action",
        "i",
        "actionsToUpdate",
        "i",
        "batchSize",
        "actionsToUpdate",
        "i",
        "i",
        "batchSize",
        "tx",
        "Prisma",
        "batch",
        "updatedActions",
        "i",
        "actionsToDelete",
        "i",
        "batchSize",
        "actionsToDelete",
        "i",
        "i",
        "batchSize",
        "tx",
        "Prisma",
        "batch",
        "deletedActions"
    ],
    "literals": [
        "\"@prisma/client\"",
        "\"../../src/scripts/migration-runner\"",
        "\"data\"",
        "\"dnh52k9vepinuhwuur8fclqf\"",
        "\"20250211050118_removed_new_session_event\"",
        "SELECT id, name \n      FROM \"ActionClass\" \n      WHERE type = 'automatic'",
        "string",
        "string",
        "Found ${automaticActions.length.toString()} new session actions",
        "string",
        "SELECT COUNT(*)::integer as \"count\"\n        FROM \"SurveyTrigger\"\n        WHERE \"actionClassId\" = ${action.id}",
        "UPDATE \"ActionClass\"\n        SET type = 'noCode',\n            \"noCodeConfig\" = '{\"type\":\"pageView\",\"urlFilters\":[]}'::jsonb\n        WHERE id IN (${Prisma.join(batch)})",
        "Updated ${updatedActions.toString()} actions",
        "DELETE FROM \"ActionClass\" WHERE id IN (${Prisma.join(batch)})",
        "Deleted ${deletedActions.toString()} actions"
    ],
    "variables": [
        "removedNewSessionEvent",
        "automaticActionsResult",
        "automaticActions",
        "actionsToUpdate",
        "actionsToDelete",
        "surveyTriggersResult",
        "triggerCount",
        "batchSize",
        "i",
        "batch",
        "updatedActions",
        "i",
        "batch",
        "deletedActions"
    ],
    "comments": [
        "Find all automatic actions - these are all the \"New Session\" actions",
        "Check for survey triggers using this action",
        "Parse the count (PostgreSQL may return count as a string)",
        "batches:"
    ],
    "docstrings": [],
    "functions": [],
    "classes": []
}