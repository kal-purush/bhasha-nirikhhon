{
    "identifiers": [
        "MediatR",
        "Microsoft",
        "AspNetCore",
        "Mvc",
        "Microsoft",
        "AspNetCore",
        "Mvc",
        "ApiExplorer",
        "Microsoft",
        "AspNetCore",
        "Mvc",
        "Formatters",
        "EventRegistrar",
        "Backend",
        "Infrastructure",
        "Mediator",
        "ICollection",
        "ApiResponseType",
        "ApiDescription",
        "action",
        "Type",
        "requestType",
        "requestType",
        "GetInterface",
        "IRequest",
        "Name",
        "request",
        "GetGenericArguments",
        "GetRuntimeReturnType",
        "declaredReturnType",
        "action",
        "Properties",
        "TryGetValue",
        "ProducesErrorResponseTypeAttribute",
        "result",
        "defaultErrorType",
        "ProducesErrorResponseTypeAttribute",
        "result",
        "Type",
        "GetApiResponseTypes",
        "runtimeReturnType",
        "defaultErrorType",
        "apiResponseTypes",
        "ICollection",
        "ApiResponseType",
        "IReadOnlyList",
        "IApiResponseMetadataProvider",
        "responseMetadataAttributes",
        "Type",
        "Type",
        "defaultErrorType",
        "ApiResponseType",
        "MediaTypeCollection",
        "responseMetadataAttributes",
        "metadataAttribute",
        "responseMetadataAttributes",
        "metadataAttribute",
        "SetContentTypes",
        "contentTypes",
        "metadataAttribute",
        "StatusCode",
        "ApiResponseType",
        "Type",
        "metadataAttribute",
        "Type",
        "StatusCode",
        "statusCode",
        "IsDefaultResponse",
        "metadataAttribute",
        "IApiDefaultResponseMetadataProvider",
        "apiResponseType",
        "Type",
        "statusCode",
        "StatusCodes",
        "Status200OK",
        "statusCode",
        "StatusCodes",
        "Status201Created",
        "apiResponseType",
        "Type",
        "IsClientError",
        "statusCode",
        "apiResponseType",
        "IsDefaultResponse",
        "apiResponseType",
        "Type",
        "defaultErrorType",
        "apiResponseType",
        "Type",
        "results",
        "apiResponseType",
        "StatusCode",
        "apiResponseType",
        "results",
        "Count",
        "results",
        "StatusCodes",
        "Status200OK",
        "ApiResponseType",
        "StatusCode",
        "StatusCodes",
        "Status200OK",
        "Type",
        "contentTypes",
        "Count",
        "contentTypes",
        "Add",
        "results",
        "Values",
        "CalculateResponseFormats",
        "responseTypes",
        "contentTypes",
        "responseTypes",
        "ICollection",
        "ApiResponseType",
        "responseTypes",
        "MediaTypeCollection",
        "declaredContentTypes",
        "apiResponse",
        "responseTypes",
        "apiResponse",
        "Type",
        "responseType",
        "responseType",
        "contentType",
        "declaredContentTypes",
        "apiResponse",
        "ApiResponseFormats",
        "Add",
        "ApiResponseFormat",
        "MediaType",
        "isSupportedContentType",
        "contentType",
        "apiResponse",
        "ApiResponseFormats",
        "Add",
        "ApiResponseFormat",
        "MediaType",
        "contentType",
        "Type",
        "declaredReturnType",
        "declaredReturnType",
        "declaredReturnType",
        "statusCode",
        "statusCode",
        "statusCode",
        "IReadOnlyList",
        "IApiResponseMetadataProvider",
        "providers",
        "i",
        "providers",
        "Count",
        "i",
        "providers",
        "i",
        "provider",
        "ProducesAttribute",
        "producesAttribute",
        "producesAttribute",
        "Type"
    ],
    "literals": [
        "\"application/json\""
    ],
    "variables": [
        "request",
        "responseType",
        "declaredReturnType",
        "responseType",
        "runtimeReturnType",
        "defaultErrorType",
        "apiResponseTypes",
        "results",
        "contentTypes",
        "statusCode",
        "apiResponseType",
        "responseTypes",
        "responseType",
        "isSupportedContentType",
        "i",
        "provider"
    ],
    "comments": [
        "var responseMetadataAttributes = GetResponseMetadataAttributes(action);",
        "if (!HasSignificantMetadataProvider(responseMetadataAttributes) &&",
        "action.Properties.TryGetValue(typeof(ApiConventionResult), out var result))",
        "{",
        "// Action does not have any conventions. Use conventions on it if present.",
        "var apiConventionResult = (ApiConventionResult)result;",
        "responseMetadataAttributes.AddRange(apiConventionResult.ResponseMetadataProviders);",
        "}",
        "private static List<IApiResponseMetadataProvider> GetResponseMetadataAttributes(ApiDescription action)",
        "{",
        "if (action.FilterDescriptors == null)",
        "{",
        "return new List<IApiResponseMetadataProvider>();",
        "}",
        "// This technique for enumerating filters will intentionally ignore any filter that is an IFilterFactory",
        "// while searching for a filter that implements IApiResponseMetadataProvider.",
        "//",
        "// The workaround for that is to implement the metadata interface on the IFilterFactory.",
        "return action.FilterDescriptors",
        ".Select(fd => fd.Filter)",
        ".OfType<IApiResponseMetadataProvider>()",
        ".ToList();",
        "}",
        "Get the content type that the action explicitly set to support.",
        "Walk through all 'filter' attributes in order, and allow each one to see or override",
        "the results of the previous ones. This is similar to the execution path for content-negotiation.",
        "ProducesResponseTypeAttribute's constructor defaults to setting \"Type\" to void when no value is specified.",
        "In this event, use the action's return type for 200 or 201 status codes. This lets you decorate an action with a",
        "[ProducesResponseType(201)] instead of [ProducesResponseType(201, typeof(Person)] when typeof(Person) can be inferred",
        "from the return type.",
        "Use the default error type for \"default\" responses or 4xx client errors if no response type is specified.",
        "Set the default status only when no status has already been set explicitly",
        "None of the IApiResponseMetadataProvider specified a content type. This is common for actions that",
        "specify one or more ProducesResponseType but no ProducesAttribute. In this case, formatters will participate in conneg",
        "and respond to the incoming request.",
        "Querying IApiResponseTypeMetadataProvider.GetSupportedContentTypes with \"null\" should retrieve all supported",
        "content types that each formatter may respond in.",
        "apiResponse.ModelMetadata = _modelMetadataProvider.GetMetadataForType(responseType);",
        "No output formatter was found that supports this content type. Add the user specified content type as-is to the result.",
        "If we get here, then a filter didn't give us an answer, so we need to figure out if we",
        "want to use the declared return type.",
        "",
        "We've already excluded Task, void, and IActionResult at this point.",
        "",
        "If the action might return any object, then assume we don't know anything about it.",
        "ProducesAttribute that does not specify type is considered not significant.",
        "Any other IApiResponseMetadataProvider is considered significant"
    ],
    "docstrings": [],
    "functions": [
        "GetApiResponseTypes",
        "GetApiResponseTypes",
        "CalculateResponseFormats",
        "Type",
        "GetRuntimeReturnType",
        "IsClientError",
        "HasSignificantMetadataProvider"
    ],
    "classes": [
        "ApiResponseTypeProvider"
    ]
}