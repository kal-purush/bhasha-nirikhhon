{
    "identifiers": [
        "sys",
        "logging",
        "click",
        "numpy",
        "np",
        "scipy",
        "sp",
        "audiofile",
        "af",
        "tkinter",
        "tk",
        "pydub",
        "AudioSegment",
        "librosa",
        "load",
        "librosa",
        "core",
        "resample",
        "librosa",
        "effects",
        "time_stretch",
        "librosa",
        "util",
        "normalize",
        "sys",
        "path",
        "sys",
        "path",
        "append",
        "logging",
        "INFO",
        "logging",
        "DEBUG",
        "logging",
        "WARNING",
        "logging",
        "ERROR",
        "logging",
        "CRITICAL",
        "quantize_bits",
        "log",
        "log",
        "info",
        "quantize_bits",
        "quantize_bits",
        "u",
        "quantization_levels",
        "u",
        "delta_s",
        "np",
        "arange",
        "quantization_levels",
        "delta_s",
        "u",
        "np",
        "arange",
        "quantization_levels",
        "delta_s",
        "log",
        "info",
        "s_midrise",
        "s_midtread",
        "x",
        "st",
        "skip_time_stretch",
        "log",
        "log",
        "info",
        "st",
        "st",
        "NEGATIVE_TUNING_RATIOS",
        "st",
        "st",
        "POSITIVE_TUNING_RATIO",
        "st",
        "st",
        "x",
        "sp",
        "interpolate",
        "interp1d",
        "NEGATIVE_TUNING_RATIOS",
        "keys",
        "NEGATIVE_TUNING_RATIOS",
        "values",
        "fill_value",
        "f",
        "st",
        "np",
        "round",
        "len",
        "x",
        "t",
        "np",
        "linspace",
        "len",
        "x",
        "n",
        "round",
        "astype",
        "np",
        "int32",
        "x",
        "r",
        "e",
        "e",
        "n",
        "np",
        "array",
        "pitched",
        "log",
        "info",
        "pitched",
        "x",
        "log",
        "log",
        "info",
        "sp",
        "signal",
        "ellip",
        "analog",
        "output",
        "sp",
        "signal",
        "sosfilt",
        "f",
        "x",
        "log",
        "info",
        "y",
        "x",
        "log",
        "log",
        "info",
        "np",
        "array",
        "np",
        "array",
        "np",
        "power",
        "att",
        "sp",
        "signal",
        "firwin2",
        "freq",
        "gain",
        "fs",
        "OUTPUT_SR",
        "antisymmetric",
        "sp",
        "signal",
        "tf2sos",
        "f",
        "sp",
        "signal",
        "sosfilt",
        "sos",
        "x",
        "log",
        "info",
        "y",
        "y",
        "input_sr",
        "target_sr",
        "factor",
        "log",
        "log",
        "info",
        "target_sr",
        "factor",
        "len",
        "y",
        "input_sr",
        "seconds",
        "target_sr",
        "factor",
        "sp",
        "signal",
        "resample",
        "y",
        "target_samples",
        "log",
        "info",
        "log",
        "info",
        "target_sr",
        "sp",
        "signal",
        "decimate",
        "resampled",
        "factor",
        "log",
        "info",
        "log",
        "info",
        "decimated",
        "y",
        "zoh_multiplier",
        "log",
        "log",
        "info",
        "zoh_multiplier",
        "np",
        "repeat",
        "y",
        "zoh_multiplier",
        "astype",
        "np",
        "float32",
        "log",
        "info",
        "zoh_applied",
        "x",
        "y",
        "np",
        "asarray",
        "x",
        "y",
        "sp",
        "spatial",
        "cKDTree",
        "y",
        "tree",
        "query",
        "x",
        "ordered_neighbors",
        "x",
        "S",
        "bits",
        "log",
        "log",
        "info",
        "bits",
        "nearest_values",
        "x",
        "S",
        "S",
        "flat",
        "y",
        "reshape",
        "x",
        "shape",
        "log",
        "info",
        "quantized",
        "f",
        "x",
        "sr",
        "normalized",
        "file_type",
        "x",
        "ndim",
        "x",
        "shape",
        "normalized",
        "np",
        "int16",
        "x",
        "np",
        "int16",
        "x",
        "AudioSegment",
        "y",
        "tobytes",
        "frame_rate",
        "sr",
        "sample_width",
        "channels",
        "channels",
        "song",
        "f",
        "format",
        "file_type",
        "bitrate",
        "song",
        "st",
        "input_file",
        "output_file",
        "log_level",
        "quantize_bits",
        "skip_normalize",
        "skip_quantize",
        "skip_input_filter",
        "skip_output_filter",
        "skip_time_stretch",
        "custom_time_stretch",
        "logging",
        "getLogger",
        "logging",
        "StreamHandler",
        "sh",
        "setFormatter",
        "logging",
        "Formatter",
        "log",
        "addHandler",
        "sh",
        "log_levels",
        "keys",
        "log_level",
        "log_level",
        "upper",
        "valid_levels",
        "log",
        "warn",
        "log_level",
        "valid_levels",
        "log_levels",
        "log_level",
        "log",
        "setLevel",
        "log_level",
        "log",
        "info",
        "input_file",
        "INPUT_SR",
        "load",
        "input_file",
        "sr",
        "INPUT_SR",
        "log",
        "info",
        "calc_quantize_function",
        "quantize_bits",
        "log",
        "skip_input_filter",
        "log",
        "info",
        "filter_input",
        "y",
        "log",
        "scipy_resample",
        "y",
        "INPUT_SR",
        "TARGET_SR",
        "RESAMPLE_MULTIPLIER",
        "log",
        "skip_quantize",
        "log",
        "info",
        "quantize",
        "resampled",
        "midtread",
        "quantize_bits",
        "log",
        "adjust_pitch",
        "resampled",
        "st",
        "skip_time_stretch",
        "log",
        "skip_time_stretch",
        "len",
        "pitched",
        "len",
        "resampled",
        "log",
        "info",
        "time_stretch",
        "pitched",
        "ratio",
        "normalize",
        "pitched",
        "custom_time_stretch",
        "log",
        "info",
        "custom_time_stretch",
        "time_stretch",
        "pitched",
        "custom_time_stretch",
        "normalize",
        "pitched",
        "zero_order_hold",
        "pitched",
        "ZOH_MULTIPLIER",
        "log",
        "resample",
        "np",
        "asfortranarray",
        "post_zero_order_hold",
        "TARGET_SR",
        "ZOH_MULTIPLIER",
        "OUTPUT_SR",
        "skip_output_filter",
        "log",
        "info",
        "filter_output",
        "output",
        "log",
        "log",
        "info",
        "output_file",
        "OUTPUT_SR",
        "skip_normalize",
        "output_file",
        "write_audio_segment",
        "output_file",
        "output",
        "OUTPUT_SR",
        "skip_normalize",
        "output_file",
        "write_audio_segment",
        "output_file",
        "output",
        "OUTPUT_SR",
        "skip_normalize",
        "output_file",
        "af",
        "write",
        "output_file",
        "output",
        "OUTPUT_SR",
        "skip_normalize",
        "log",
        "info",
        "output_file",
        "tk",
        "Tk",
        "geometry",
        "resizable",
        "title",
        "columnconfigure",
        "weight",
        "columnconfigure",
        "weight",
        "tk",
        "DoubleVar",
        "format",
        "current_value",
        "get",
        "value_label",
        "configure",
        "text",
        "get_current_value",
        "tk",
        "Scale",
        "from_",
        "to",
        "orient",
        "tickinterval",
        "command",
        "slider_changed",
        "variable",
        "current_value",
        "st_slider",
        "grid",
        "column",
        "row",
        "sticky",
        "tk",
        "Label",
        "text",
        "slider_label",
        "grid",
        "column",
        "row",
        "sticky",
        "tk",
        "Label",
        "text",
        "get_current_value",
        "value_label",
        "grid",
        "column",
        "row",
        "sticky",
        "tk",
        "Entry",
        "width",
        "input_entry",
        "grid",
        "column",
        "row",
        "sticky",
        "tk",
        "Entry",
        "width",
        "output_entry",
        "grid",
        "column",
        "row",
        "sticky",
        "tkinter",
        "filedialog",
        "filedialog",
        "askopenfilename",
        "filetypes",
        "parent",
        "title",
        "input_entry",
        "tk",
        "END",
        "input_entry",
        "insert",
        "input_file",
        "filedialog",
        "askopenfilename",
        "filetypes",
        "parent",
        "title",
        "output_entry",
        "tk",
        "END",
        "output_entry",
        "insert",
        "output_file",
        "tk",
        "Button",
        "text",
        "command",
        "askopeninputfilename",
        "input_browse_button",
        "grid",
        "column",
        "padx",
        "row",
        "sticky",
        "tk",
        "Button",
        "text",
        "command",
        "askopenoutputfilename",
        "output_browse_button",
        "grid",
        "column",
        "padx",
        "row",
        "sticky",
        "tk",
        "Button",
        "text",
        "command",
        "pitch",
        "get_current_value",
        "input_entry",
        "get",
        "output_entry",
        "get",
        "run_button",
        "grid",
        "column",
        "padx",
        "row",
        "sticky",
        "mainloop"
    ],
    "literals": [
        "'ffmpeg'",
        "'/usr/local/bin/ffmpeg'",
        "'/usr/local/bin/ffmpeg'",
        "'INFO'",
        "'DEBUG'",
        "'WARNING'",
        "'ERROR'",
        "'CRITICAL'",
        "f'calculating quantize fn with {quantize_bits} quantize bits'",
        "'done calculating quantize fn'",
        "f'adjusting audio pitch by {st} semitones'",
        "'extrapolate'",
        "'done pitching audio'",
        "'applying anti aliasing filter'",
        "'sos'",
        "'done applying anti aliasing filter'",
        "'applying output eq filter'",
        "'done applying output eq filter'",
        "f'resampling audio to sample rate of {target_sr * factor}'",
        "'done resample 1/2'",
        "f'resampling audio to sample rate of {target_sr}'",
        "'done resample 2/2'",
        "'done resampling audio'",
        "f'applying zero order hold of {zoh_multiplier}'",
        "'done applying zero order hold'",
        "f'quantizing audio @ {bits} bits'",
        "'done quantizing'",
        "'mp3'",
        "\"320k\"",
        "'INFO'",
        "'%(levelname)-8s %(message)s'",
        "f'Invalid log-level: \"{log_level}\", log-level set to \"INFO\", '",
        "f'valid log levels are {valid_levels}'",
        "'INFO'",
        "f'loading: \"{input_file}\" at oversampled rate: {INPUT_SR}'",
        "'done loading'",
        "'skipping input anti aliasing filter'",
        "'skipping quantize'",
        "'\\\"skipping\\\" time stretch: stretching back to original length...'",
        "f'running custom time stretch of ratio: {custom_time_stretch}'",
        "'skipping output eq filter'",
        "f'writing {output_file}, at sample rate {OUTPUT_SR} '",
        "f'with skip_normalize set to {skip_normalize}'",
        "'.mp3'",
        "'mp3'",
        "'.wav'",
        "'wav'",
        "'16bit'",
        "f'done! output_file at: {output_file}'",
        "'__main__'",
        "'600x200'",
        "'P I T C H E R'",
        "'{: .2f}'",
        "'vertical'",
        "'we'",
        "'Semitones:'",
        "'w'",
        "'n'",
        "'w'",
        "'w'",
        "\"audio files\"",
        "\"*.mp3 *.wav *.flac\"",
        "'Choose a file'",
        "\"audio files\"",
        "\"*.mp3 *.wav *.flac\"",
        "'Choose a file'",
        "'Input File'",
        "'w'",
        "'Output File'",
        "'w'",
        "'Pitch'",
        "'w'"
    ],
    "variables": [
        "AudioSegment",
        "converter",
        "ZOH_MULTIPLIER",
        "RESAMPLE_MULTIPLIER",
        "INPUT_SR",
        "OUTPUT_SR",
        "TARGET_SR",
        "POSITIVE_TUNING_RATIO",
        "NEGATIVE_TUNING_RATIOS",
        "log_levels",
        "u",
        "quantization_levels",
        "delta_s",
        "s_midrise",
        "s_midtread",
        "t",
        "t",
        "t",
        "f",
        "t",
        "n",
        "r",
        "pitched",
        "pitched",
        "f",
        "y",
        "freq",
        "att",
        "gain",
        "f",
        "sos",
        "y",
        "seconds",
        "target_samples",
        "resampled",
        "decimated",
        "zoh_applied",
        "x",
        "y",
        "tree",
        "ordered_neighbors",
        "y",
        "quantized",
        "channels",
        "y",
        "y",
        "song",
        "log",
        "sh",
        "valid_levels",
        "log_level",
        "log_level",
        "y",
        "s",
        "midrise",
        "midtread",
        "y",
        "resampled",
        "resampled",
        "pitched",
        "ratio",
        "pitched",
        "pitched",
        "pitched",
        "pitched",
        "post_zero_order_hold",
        "output",
        "output",
        "output_file",
        "current_value",
        "st_slider",
        "slider_label",
        "value_label",
        "input_entry",
        "output_entry",
        "input_file",
        "output_file",
        "input_browse_button",
        "output_browse_button",
        "run_button"
    ],
    "comments": [
        "! /usr/bin/env python3",
        "Pitcher v 0.1",
        "Copyright (C) 2020 Morgan Mitchell",
        "Based on: Physical and Behavioral Circuit Modeling of the SP-12, DT Yeh, 2007",
        "https://ccrma.stanford.edu/~dtyeh/sp12/yeh2007icmcsp12slides.pdf",
        "https://dspillustrations.com/pages/posts/misc/quantization-and-quantization-noise.html",
        "max amplitude to quantize",
        "level distance",
        "no change",
        "-8 > st: extrapolate, seems to lose a few points of precision?",
        "could yield instead",
        "approximating the anti aliasing filter, don't think this needs to be",
        "perfect since at fs/2=13.02kHz only -10dB attenuation, might be able to",
        "improve accuracy in the 15 -> 20kHz range with firwin?",
        "could use sosfiltfilt for zero phase filtering, but it doubles filter order",
        "intentionally oversample by repeating each sample 4 times",
        "could also try a freq aliased sinc filter",
        "no audible difference after audacity invert test @ 12 bits",
        "however, when plotted the scaled amplitude of quantized audio is",
        "noticeably higher than the original, leaving for now",
        "https://stackoverflow.com/questions/53633177/how-to-read-a-mp3-audio-file-into-a-numpy-array-save-a-numpy-array-to-mp3",
        "normalized array - each item should be a float in [-1, 1)",
        "@click.command()",
        "@click.option('--st', default=0, help='number of semitones to shift')",
        "@click.option('--log-level', default='INFO')",
        "@click.option('--input-file', required=True)",
        "@click.option('--output-file', required=True)",
        "@click.option('--quantize-bits', default=12, help='bit rate of quantized output')",
        "@click.option('--skip-quantize', is_flag=True, default=False)",
        "@click.option('--skip-normalize', is_flag=True, default=False)",
        "@click.option('--skip-input-filter', is_flag=True, default=False)",
        "@click.option('--skip-output-filter', is_flag=True, default=False)",
        "@click.option('--skip-time-stretch', is_flag=True, default=False)",
        "@click.option('--custom-time-stretch', default=0, type=float)",
        "simulate analog -> digital conversion",
        "TODO: midtread/midrise option?",
        "oversample again (default factor of 4) to simulate ZOH",
        "TODO: retest output against freq aliased sinc fn",
        "TODO: try using scipy resample here?",
        "eq filter"
    ],
    "docstrings": [
        "''' resample from input_sr to target_sr_multiple/factor'''",
        "\"\"\"numpy array to MP3\"\"\""
    ],
    "functions": [
        "calc_quantize_function",
        "adjust_pitch",
        "filter_input",
        "filter_output",
        "scipy_resample",
        "zero_order_hold",
        "nearest_values",
        "quantize",
        "write_audio_segment",
        "pitch",
        "get_current_value",
        "slider_changed",
        "askopeninputfilename",
        "askopenoutputfilename"
    ],
    "classes": []
}