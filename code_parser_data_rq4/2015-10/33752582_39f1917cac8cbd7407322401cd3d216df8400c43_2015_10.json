{
    "identifiers": [
        "JobPrepRelease",
        "Collections",
        "Generic",
        "Linq",
        "Text",
        "Threading",
        "Tasks",
        "Microsoft",
        "Azure",
        "Batch",
        "Microsoft",
        "Azure",
        "Batch",
        "Auth",
        "Microsoft",
        "Azure",
        "Batch",
        "Samples",
        "Common",
        "Microsoft",
        "Azure",
        "Batch",
        "Common",
        "args",
        "MainAsync",
        "args",
        "Wait",
        "AggregateException",
        "ae",
        "WriteLine",
        "WriteLine",
        "WriteLine",
        "SampleHelpers",
        "PrintAggregateException",
        "ae",
        "Flatten",
        "WriteLine",
        "WriteLine",
        "ReadLine",
        "args",
        "taskOutputFile",
        "taskOutputFile",
        "taskOutputFile",
        "BatchSharedKeyCredentials",
        "AccountSettings",
        "Default",
        "BatchServiceUrl",
        "AccountSettings",
        "Default",
        "BatchAccountName",
        "AccountSettings",
        "Default",
        "BatchAccountKey",
        "BatchClient",
        "OpenAsync",
        "cred",
        "ArticleHelpers",
        "CreatePoolAsync",
        "batchClient",
        "poolId",
        "SampleHelpers",
        "GetJobIfExistAsync",
        "batchClient",
        "jobId",
        "job",
        "WriteLine",
        "jobId",
        "batchClient",
        "JobOperations",
        "CreateJob",
        "jobId",
        "PoolInformation",
        "PoolId",
        "poolId",
        "JobPreparationTask",
        "prepTask",
        "CommandLine",
        "jobPrepCmdLine",
        "unboundJob",
        "JobPreparationTask",
        "prepTask",
        "JobReleaseTask",
        "releaseTask",
        "CommandLine",
        "jobReleaseCmdLine",
        "unboundJob",
        "JobReleaseTask",
        "releaseTask",
        "unboundJob",
        "CommitAsync",
        "job",
        "batchClient",
        "JobOperations",
        "GetJobAsync",
        "jobId",
        "CloudTask",
        "CloudTask",
        "i",
        "i",
        "i",
        "ToString",
        "PadLeft",
        "CloudTask",
        "taskId",
        "taskCommandLine",
        "tasks",
        "Add",
        "task",
        "WriteLine",
        "batchClient",
        "JobOperations",
        "AddTask",
        "job",
        "Id",
        "tasks",
        "batchClient",
        "Utilities",
        "CreateTaskStateMonitor",
        "WaitAllAsync",
        "job",
        "ListTasks",
        "TaskState",
        "Completed",
        "TimeSpan",
        "FromMinutes",
        "WriteLine",
        "TaskState",
        "Completed",
        "WriteLine",
        "WriteLine",
        "ODATADetailLevel",
        "selectClause",
        "IPagedEnumerable",
        "ComputeNode",
        "batchClient",
        "PoolOperations",
        "ListComputeNodes",
        "pool",
        "Id",
        "nodeDetail",
        "nodes",
        "ForEachAsync",
        "node",
        "node",
        "GetNodeFileAsync",
        "WriteLine",
        "sharedTextFile",
        "Name",
        "node",
        "Id",
        "WriteLine",
        "WriteLine",
        "sharedTextFile",
        "ReadAsStringAsync",
        "batchClient",
        "JobOperations",
        "TerminateJobAsync",
        "job",
        "Id",
        "ArticleHelpers",
        "WaitForJobToReachStateAsync",
        "batchClient",
        "job",
        "Id",
        "JobState",
        "Completed",
        "TimeSpan",
        "FromMinutes",
        "JobPreparationAndReleaseTaskExecutionInformation",
        "batchClient",
        "JobOperations",
        "ListJobPreparationAndReleaseTaskStatus",
        "job",
        "Id",
        "ToListAsync",
        "JobPreparationAndReleaseTaskExecutionInformation",
        "info",
        "prepReleaseInfo",
        "WriteLine",
        "WriteLine",
        "info",
        "ComputeNodeId",
        "info",
        "JobPreparationTaskExecutionInformation",
        "WriteLine",
        "info",
        "JobPreparationTaskExecutionInformation",
        "ExitCode",
        "info",
        "JobReleaseTaskExecutionInformation",
        "WriteLine",
        "info",
        "JobReleaseTaskExecutionInformation",
        "ExitCode",
        "WriteLine",
        "WriteLine",
        "ReadLine",
        "ToLower",
        "response",
        "response",
        "batchClient",
        "JobOperations",
        "DeleteJobAsync",
        "job",
        "Id",
        "WriteLine",
        "response",
        "ReadLine",
        "response",
        "response",
        "batchClient",
        "PoolOperations",
        "DeletePoolAsync",
        "pool",
        "Id"
    ],
    "literals": [
        "\"One or more exceptions occurred.\"",
        "\"Sample complete, hit ENTER to exit...\"",
        "\"poolPrepRelease\"",
        "\"jobPrepRelease\"",
        "\"%AZ_BATCH_NODE_SHARED_DIR%\\\\job_prep_and_release.txt\"",
        "\"cmd /c echo %AZ_BATCH_NODE_ID% tasks: >\"",
        "\"cmd /c echo   %AZ_BATCH_TASK_ID% >> \"",
        "\"cmd /c del \"",
        "\"small\"",
        "\"Job {0} not found, creating...\"",
        "\"task\"",
        "\"Submitting tasks and awaiting completion...\"",
        "\"Operation timed out while waiting for submitted tasks to reach state {0}\"",
        "\"All tasks completed.\"",
        "\"id\"",
        "\"shared\\\\job_prep_and_release.txt\"",
        "\"Contents of {0} on {1}:\"",
        "\"-------------------------------------------\"",
        "\"{0}: \"",
        "\"  Prep task exit code:    {0}\"",
        "\"  Release task exit code: {0}\"",
        "\"Delete job? [yes] no\"",
        "\"n\"",
        "\"no\"",
        "\"Delete pool? [yes] no\"",
        "\"n\"",
        "\"no\""
    ],
    "variables": [
        "poolId",
        "jobId",
        "taskOutputFile",
        "jobPrepCmdLine",
        "taskCmdLine",
        "jobReleaseCmdLine",
        "BatchSharedKeyCredentials",
        "cred",
        "BatchClient",
        "batchClient",
        "CloudPool",
        "pool",
        "CloudJob",
        "job",
        "CloudJob",
        "unboundJob",
        "JobPreparationTask",
        "prepTask",
        "JobReleaseTask",
        "releaseTask",
        "tasks",
        "i",
        "taskId",
        "taskCommandLine",
        "taskCmdLine",
        "CloudTask",
        "task",
        "ODATADetailLevel",
        "nodeDetail",
        "nodes",
        "NodeFile",
        "sharedTextFile",
        "prepReleaseInfo",
        "response"
    ],
    "comments": [
        "Copyright (c) Microsoft Corporation",
        "",
        "Companion project to the following article:",
        "https://azure.microsoft.com/documentation/articles/batch-job-prep-release/",
        "Call the asynchronous version of the Main() method. This is done so that we can await various",
        "calls to async methods within the \"Main\" method of this console application.",
        "Location of the file that the job tasks will work with, a text file in the",
        "node's \"shared\" directory.",
        "The job prep task will write the node ID to the text file in the shared directory",
        "Each task then echoes its ID to the same text file",
        "The job release task will then delete the text file from the shared directory",
        "Configure your AccountSettings in the Microsoft.Azure.Batch.Samples.Common project within this solution",
        "Initialize the BatchClient for access to your Batch account",
        "Create a CloudPool (or obtain an existing pool with the specified ID)",
        "Create a CloudJob (or obtain an existing job with the specified ID)",
        "Configure and assign the job preparation task",
        "Configure and assign the job release task",
        "Get the bound version of the job with all of its properties populated",
        "Create the tasks that the job will execute",
        "Add the tasks in one API call as opposed to a separate AddTask call for each. Bulk task",
        "submission helps to ensure efficient underlying API calls to the Batch service.",
        "Wait for the tasks to complete before proceeding. The long timeout here is to allow time",
        "for the nodes within the pool to be created and started if the pool had not yet been created.",
        "Print the contents of the shared text file modified by the job preparation and other tasks.",
        "Terminate the job to mark it as Completed; this will initiate the Job Release Task on any node",
        "that executed job tasks. Note that the Job Release Task is also executed when a job is deleted,",
        "thus you need not call Terminate if you typically delete your jobs upon task completion.",
        "Wait for the job to reach state \"Completed.\" Note that this wait is not typically necessary in",
        "production code, but is done here to enable the checking of the release tasks exit code below.",
        "Print the exit codes of the prep and release tasks by obtaining their execution info",
        "If no tasks were scheduled to run on the node, the JobPreparationTaskExecutionInformation will be null",
        "If no tasks were scheduled to run on the node, the JobReleaseTaskExecutionInformation will be null",
        "Clean up the resources we've created in the Batch account",
        "Note that deleting the job will execute the job release task if the job was not previously terminated"
    ],
    "docstrings": [],
    "functions": [
        "Main",
        "MainAsync"
    ],
    "classes": [
        "Program"
    ]
}