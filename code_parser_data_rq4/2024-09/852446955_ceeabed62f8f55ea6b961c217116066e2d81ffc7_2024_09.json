{
    "identifiers": [
        "os",
        "sys",
        "subprocess",
        "pymediainfo",
        "file",
        "ids_list",
        "num_a_tracks",
        "stderr",
        "comm",
        "file",
        "comm",
        "id_tuple",
        "ids_list",
        "id_tuple",
        "id_tuple",
        "channel_layout",
        "channel_layout",
        "channel_layout",
        "channel_layout",
        "comm",
        "id",
        "c",
        "c",
        "channel_layout",
        "filters",
        "keys",
        "filters",
        "channel_layout",
        "comm",
        "id",
        "id",
        "pan",
        "c",
        "c",
        "channel_layout",
        "i",
        "num_a_tracks",
        "comm",
        "i",
        "c",
        "c",
        "comm",
        "comm",
        "file",
        "comm",
        "subprocess",
        "call",
        "comm",
        "stdout",
        "subprocess",
        "PIPE",
        "stderr",
        "open",
        "proc",
        "open",
        "outfile",
        "outfile",
        "write",
        "comm",
        "subprocess",
        "call",
        "comm",
        "stdout",
        "subprocess",
        "PIPE",
        "stderr",
        "stderr",
        "proc",
        "mkvinfo",
        "id",
        "path",
        "counter",
        "id",
        "iter",
        "mkvinfo",
        "split",
        "found",
        "next",
        "lines",
        "path",
        "id",
        "current",
        "current",
        "startswith",
        "next",
        "lines",
        "current",
        "current",
        "endswith",
        "current",
        "endswith",
        "file",
        "subprocess",
        "Popen",
        "file",
        "stdout",
        "subprocess",
        "PIPE",
        "proc",
        "stdout",
        "read",
        "decode",
        "file",
        "stderr",
        "pymediainfo",
        "MediaInfo",
        "parse",
        "file",
        "audio_tracks",
        "len",
        "a_tracks",
        "track",
        "a_tracks",
        "track",
        "track_id",
        "track",
        "codec_id",
        "track",
        "channellayout_original",
        "track",
        "channellayout_original",
        "track",
        "channel_layout",
        "track",
        "channel_s__original",
        "track",
        "channel_s__original",
        "track",
        "channel_s",
        "layout",
        "layout",
        "split",
        "chans",
        "chans",
        "chans",
        "chans",
        "is_commentary",
        "run_mkvinfo",
        "file",
        "id",
        "file",
        "commentary_check",
        "chans",
        "commentary_check",
        "possible_tracks",
        "append",
        "id",
        "chans",
        "commentary_check",
        "codec",
        "codec",
        "codec",
        "codec",
        "possible_tracks",
        "append",
        "id",
        "chans",
        "elem",
        "elem",
        "possible_tracks",
        "layouts",
        "elem",
        "possible_tracks",
        "elem",
        "convert_to_stereo",
        "file",
        "elem",
        "elem",
        "num_a_tracks",
        "stderr",
        "proc",
        "proc",
        "possible_tracks",
        "file",
        "possible_tracks",
        "convert_to_stereo",
        "file",
        "chosen",
        "chosen",
        "num_a_tracks",
        "stderr",
        "proc",
        "proc",
        "file",
        "file",
        "split",
        "os",
        "path",
        "isfile",
        "path_4k",
        "filename",
        "convert_4k",
        "file",
        "stderr",
        "open",
        "convert",
        "file",
        "stderr",
        "open",
        "sys",
        "argv",
        "add_stereo",
        "file",
        "main"
    ],
    "literals": [
        "'5.1'",
        "'pan=stereo|FL<FL+0.707*FC+0.707*BL+0.5*LFE|FR<FR+0.707*FC+0.707*BR+0.5*LFE'",
        "'7.1'",
        "'pan=stereo|FL = 0.274804*FC + 0.388631*FL + 0.336565*SL + 0.194316*SR + 0.336565*BL + 0.194316*BR + 0.274804*LFE | FR = 0.274804*FC + 0.388631*FR + 0.336565*SR + 0.194316*SL + 0.336565*BR + 0.194316*BL + 0.274804*LFE'",
        "'6.1'",
        "'pan=stereo|FL = 0.321953*FC + 0.455310*FL + 0.394310*SL + 0.227655*SR + 278819*BC + 0.321953*LFE | FR = 0.321953*FC + 0.455310*FR + 0.394310*SR + 0.227655*SL + 278819*BC + 0.321953*LFE'",
        "'5.0'",
        "'pan=stereo|FL = 0.460186*FC + 0.650802*FL + 0.563611*BL + 0.325401*BR | FR = 0.460186*FC + 0.650802*FR + 0.563611*BR + 0.325401*BL'",
        "'/usr/local/bin/ffmpeg'",
        "'-y'",
        "'-i'",
        "'file:'",
        "'-map'",
        "'0:0'",
        "'-c:0'",
        "'copy'",
        "'1'",
        "'2'",
        "'3'",
        "'Object Based'",
        "'-map'",
        "'0:'",
        "'-c:'",
        "'libfdk_aac'",
        "'-ac'",
        "'2'",
        "'-map'",
        "'0:'",
        "'-filter:'",
        "'-c:'",
        "'libfdk_aac'",
        "\"Unexcpected channel layout:\"",
        "'-map'",
        "'0:'",
        "'-c:'",
        "'copy'",
        "'-map'",
        "'0:s?'",
        "'-c:s'",
        "'copy'",
        "'-map_metadata'",
        "'0'",
        "'-strict'",
        "'2'",
        "'file:'",
        "'-new.mkv'",
        "'-nostats'",
        "\"log.txt\"",
        "\"a\"",
        "\"log.txt\"",
        "\"a\"",
        "'Error detected, repeating with -ss flag.'",
        "'/usr/local/bin/ffmpeg'",
        "'-fflags'",
        "'+genpts'",
        "'\\n'",
        "\"Metadata are illegible in\"",
        "'metadata_issue'",
        "\"Track number: \"",
        "\"|  \"",
        "'\"Commentary\" flag: 1'",
        "'is_commentary'",
        "\"+ Track\"",
        "\"+ Chapters\"",
        "'not_commentary'",
        "\"/usr/local/bin/mkvinfo\"",
        "'LFE'",
        "'.1'",
        "'5'",
        "'.0'",
        "'6'",
        "'5.1'",
        "'metadata_issue'",
        "'.1'",
        "'not_commentary'",
        "'is_commentary'",
        "'AAC'",
        "'AC3'",
        "'E-AC-3'",
        "'MPEG/L3'",
        "'7.1'",
        "'7.1'",
        "\"Found 7.1 track, converting it to stereo...\"",
        "\"No tracks to convert in\"",
        "'leave as is'",
        "\"No 7.1 in file, choosing the first audio track that must be converted.\"",
        "\"/Volumes/Almazen/filmsammlung/4K\"",
        "'/'",
        "\"/\"",
        "\"log.txt\"",
        "\"a\"",
        "\"log.txt\"",
        "\"a\"",
        "\"__main__\""
    ],
    "variables": [
        "filters",
        "c",
        "comm",
        "comm",
        "comm",
        "id",
        "channel_layout",
        "comm",
        "pan",
        "comm",
        "comm",
        "comm",
        "comm",
        "comm",
        "proc",
        "comm",
        "proc",
        "id",
        "lines",
        "found",
        "current",
        "found",
        "end",
        "current",
        "end",
        "proc",
        "possible_tracks",
        "a_tracks",
        "num_a_tracks",
        "id",
        "codec",
        "layout",
        "layout",
        "chans",
        "chans",
        "chans",
        "chans",
        "chans",
        "commentary_check",
        "layouts",
        "proc",
        "chosen",
        "proc",
        "path_4k",
        "filename",
        "file"
    ],
    "comments": [
        "!/usr/local/bin/python3",
        "print(' '.join(comm))",
        "This could probably be changed to a system where it asks the user which track to convert",
        "Sometimes there are two equal audio tracks that are simply different languages => both should be converted",
        "def convert(file, stderr=open(\"log.txt\", \"a\")):",
        "a_tracks = pymediainfo.MediaInfo.parse(file).audio_tracks",
        "num_a_tracks = len(a_tracks)",
        "convert_tracks = list()",
        "for track in a_tracks:",
        "id = track.track_id",
        "codec = track.codec_id",
        "",
        "if track.channellayout_original:",
        "layout = track.channellayout_original",
        "else:",
        "layout = track.channel_layout",
        "",
        "if track.channel_s__original:",
        "chans = str(track.channel_s__original)",
        "else:",
        "chans = str(track.channel_s)",
        "",
        "if layout != None:",
        "if 'LFE' in layout.split():",
        "chans = str(int(chans)-1) + '.1'",
        "if chans == '5':",
        "chans = chans + '.0'",
        "elif chans == '6':",
        "chans = chans + '.0'",
        "else:",
        "if chans == '6':",
        "chans = '5.1'",
        "commentary_check = is_commentary(run_mkvinfo(file), id, file)",
        "if commentary_check == 'metadata_issue':",
        "return None",
        "elif '.' in chans:",
        "convert_tracks.append((id, chans))",
        "elif 'AAC' not in codec and 'AC3' not in codec and 'E-AC-3' not in codec and 'MPEG/L3' not in codec:",
        "convert_tracks.append((id, chans))",
        "layouts = [elem[1] for elem in convert_tracks]",
        "if len(convert_tracks) > 0:",
        "proc = convert_to_stereo(file, convert_tracks, num_a_tracks, stderr)",
        "else:",
        "proc = 0",
        "if proc != 0:",
        "print(\"Process failed for\", file)",
        "return None # not relevant here but for uses in other scripts",
        "else:",
        "return True",
        "4K-Files to be handled differently"
    ],
    "docstrings": [],
    "functions": [
        "convert_to_stereo",
        "is_commentary",
        "run_mkvinfo",
        "convert",
        "add_stereo",
        "main"
    ],
    "classes": []
}