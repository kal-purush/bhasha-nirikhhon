{
    "identifiers": [
        "datetime",
        "timedelta",
        "django",
        "core",
        "management",
        "BaseCommand",
        "django",
        "db",
        "models",
        "django",
        "db",
        "models",
        "Avg",
        "Min",
        "Count",
        "solotodo",
        "models",
        "Entity",
        "EntityHistory",
        "EsEntity",
        "Lead",
        "solotodo",
        "tasks",
        "entity_save",
        "models",
        "expressions",
        "Func",
        "models",
        "FloatField",
        "models",
        "expressions",
        "Func",
        "models",
        "DateTimeField",
        "BaseCommand",
        "args",
        "options",
        "Entity",
        "objects",
        "get_available",
        "product__isnull",
        "active_registry__cell_monthly_payment__isnull",
        "select_related",
        "es",
        "aggregate",
        "avg_timestamp",
        "DateTimeFromFloat",
        "Avg",
        "Epoch",
        "EntityHistory",
        "objects",
        "entity__in",
        "es",
        "timestamp__gte",
        "timestamp",
        "timedelta",
        "hours",
        "timestamp__lte",
        "timestamp",
        "timedelta",
        "hours",
        "order_by",
        "values",
        "annotate",
        "min_normal_price",
        "Min",
        "min_offer_price",
        "Min",
        "x",
        "x",
        "x",
        "x",
        "reference_prices",
        "Lead",
        "objects",
        "entity_history__entity__in",
        "es",
        "timestamp__gte",
        "timestamp",
        "timedelta",
        "hours",
        "order_by",
        "values",
        "annotate",
        "c",
        "Count",
        "x",
        "x",
        "x",
        "leads",
        "es",
        "count",
        "idx",
        "e",
        "es",
        "format",
        "idx",
        "es_count",
        "e",
        "id",
        "EsEntity",
        "from_entity",
        "e",
        "prices_dict",
        "leads_dict"
    ],
    "literals": [
        "'EXTRACT(epoch FROM %(expressions)s)::FLOAT'",
        "'To_TIMESTAMP(%(expressions)s)::TIMESTAMP at time zone \\'UTC\\''",
        "'active_registry'",
        "'currency'",
        "'bundle'",
        "'product__brand'",
        "'store__country'",
        "'category'",
        "'active_registry__timestamp'",
        "'avg_timestamp'",
        "'entity'",
        "'entity'",
        "'normal_price'",
        "'offer_price'",
        "'entity'",
        "'min_normal_price'",
        "'min_offer_price'",
        "'entity_history__entity'",
        "'entity_history__entity'",
        "'*'",
        "'entity_history__entity'",
        "'c'",
        "'{} / {}: {}'"
    ],
    "variables": [
        "template",
        "output_field",
        "template",
        "output_field",
        "es",
        "timestamp",
        "reference_prices",
        "prices_dict",
        "leads",
        "leads_dict",
        "es_count"
    ],
    "comments": [
        "If you need to delete the previous indexed entities run the",
        "following query from Kibana",
        "POST /product_entities/_delete_by_query",
        "{\"query\": {\"bool\": {\"filter\": [{\"term\":",
        "{\"product_relationships\": \"entity\"}}]}}}",
        "Ideally each entity should calculate its reference price and leads",
        "with individual timestamps, but since \"most\" of them will have more",
        "or less the same one (as prices update daily at the same hour) we",
        "can use the average of them to have some good initial data and allow",
        "batch processing."
    ],
    "docstrings": [],
    "functions": [
        "handle"
    ],
    "classes": [
        "Epoch",
        "DateTimeFromFloat",
        "Command"
    ]
}