{
    "identifiers": [
        "elasticsearch5",
        "Elasticsearch",
        "Elasticsearch5",
        "TransportError",
        "TransportError5",
        "elasticsearch6",
        "Elasticsearch",
        "Elasticsearch6",
        "TransportError",
        "TransportError6",
        "elasticsearch6",
        "helpers",
        "bulk",
        "datetime",
        "datetime",
        "os",
        "os",
        "getenv",
        "os",
        "getenv",
        "Elasticsearch5",
        "ES5_HOST_PORT",
        "Elasticsearch6",
        "ES6_TARGET_PORT",
        "docs",
        "doc",
        "docs",
        "doc",
        "doc",
        "documents",
        "bulk",
        "es_client6",
        "_prepare_docs_for_bulk_insert",
        "documents",
        "index",
        "INDEX",
        "doc_type",
        "GENERIC_DOC_TYPE",
        "chunk_size",
        "TransportError6",
        "e",
        "e",
        "from_",
        "page_size",
        "scroll_id",
        "scroll_id",
        "es_client5",
        "search",
        "INDEX",
        "GENERIC_DOC_TYPE",
        "from_",
        "from_",
        "size",
        "page_size",
        "scroll",
        "results",
        "es_client5",
        "scroll",
        "scroll_id",
        "scroll_id",
        "scroll",
        "results",
        "scroll_id",
        "docs",
        "TransportError5",
        "e",
        "e",
        "e",
        "e",
        "status_code",
        "datetime",
        "now",
        "es_client5",
        "count",
        "index",
        "INDEX",
        "doc_type",
        "GENERIC_DOC_TYPE",
        "format",
        "dcount",
        "offset",
        "dcount",
        "fetch_documents",
        "from_",
        "offset",
        "page_size",
        "page_size",
        "scroll_id",
        "scroll_id",
        "format",
        "offset",
        "offset",
        "page_size",
        "bulk_index_documents_to_es6",
        "docs",
        "offset",
        "page_size",
        "format",
        "datetime",
        "now",
        "start"
    ],
    "literals": [
        "'metasearch'",
        "'generic-document'",
        "'ES5_ORIGIN_HOST'",
        "'http://elasticsearch5:80'",
        "'ES6_TARGET_HOST'",
        "'http://elasticsearch6:80'",
        "\"_id\"",
        "'_id'",
        "\"_source\"",
        "'_source'",
        "\"Failed to index documents: %s\"",
        "'2m'",
        "'_scroll_id'",
        "'2m'",
        "'hits'",
        "'hits'",
        "\"Failed to fetch documents: %s\"",
        "'__main__'",
        "'count'",
        "'Preparing to index {} document(s) from ES5'",
        "'Indexing documents {} to {} into ES6'",
        "'Finished in {} seconds'"
    ],
    "variables": [
        "INDEX",
        "GENERIC_DOC_TYPE",
        "ES5_HOST_PORT",
        "ES6_TARGET_PORT",
        "es_client5",
        "es_client6",
        "results",
        "scroll_id",
        "results",
        "docs",
        "start",
        "dcount",
        "offset",
        "page_size",
        "scroll_id",
        "scroll_id",
        "docs"
    ],
    "comments": [
        "!/usr/bin/env python",
        "Using the example indices and doc types from GOV.UK's search API",
        "https://github.com/alphagov/rummager/tree/master/config/schema/indexes"
    ],
    "docstrings": [
        "\"\"\"\nA one-off script to migrate documents from the ES5 metasearch index to ES6.\n\nThis is necessary because trying to republish all best bets from search-admin frequently fails due to transient network issues.\n\nRequires two Elasticsearch clients: client5 and client6. These use different versions of the python client.\n\nclient5 fetches a page of docs from the old index, and client6 POSTs them to the new index. Simple!\n\"\"\""
    ],
    "functions": [
        "_prepare_docs_for_bulk_insert",
        "bulk_index_documents_to_es6",
        "fetch_documents"
    ],
    "classes": []
}