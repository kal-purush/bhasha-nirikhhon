{
    "identifiers": [
        "iped",
        "engine",
        "task",
        "transcript",
        "java",
        "io",
        "BufferedOutputStream",
        "java",
        "io",
        "BufferedReader",
        "java",
        "io",
        "DataOutputStream",
        "java",
        "io",
        "File",
        "java",
        "io",
        "java",
        "io",
        "InputStream",
        "java",
        "io",
        "InputStreamReader",
        "java",
        "io",
        "OutputStreamWriter",
        "java",
        "io",
        "PrintWriter",
        "java",
        "net",
        "ConnectException",
        "java",
        "net",
        "Socket",
        "java",
        "net",
        "SocketException",
        "java",
        "net",
        "SocketTimeoutException",
        "java",
        "nio",
        "charset",
        "StandardCharsets",
        "java",
        "nio",
        "file",
        "Files",
        "java",
        "nio",
        "file",
        "Path",
        "java",
        "text",
        "DecimalFormat",
        "java",
        "util",
        "java",
        "util",
        "java",
        "util",
        "concurrent",
        "atomic",
        "AtomicBoolean",
        "java",
        "util",
        "concurrent",
        "atomic",
        "AtomicInteger",
        "java",
        "util",
        "concurrent",
        "atomic",
        "AtomicLong",
        "org",
        "apache",
        "logging",
        "log4j",
        "LogManager",
        "org",
        "apache",
        "logging",
        "log4j",
        "Logger",
        "org",
        "apache",
        "tika",
        "io",
        "TemporaryResources",
        "iped",
        "configuration",
        "IConfigurationDirectory",
        "iped",
        "data",
        "IItem",
        "iped",
        "engine",
        "config",
        "AudioTranscriptConfig",
        "iped",
        "engine",
        "config",
        "ConfigurationManager",
        "iped",
        "engine",
        "core",
        "Manager",
        "iped",
        "engine",
        "io",
        "TimeoutException",
        "iped",
        "engine",
        "task",
        "transcript",
        "RemoteWav2Vec2Service",
        "MESSAGES",
        "iped",
        "exception",
        "IPEDException",
        "logger",
        "LogManager",
        "getLogger",
        "MAX_CONNECT_ERRORS",
        "UPDATE_SERVERS_INTERVAL_MILLIS",
        "servers",
        "currentServer",
        "numConnectErrors",
        "audioSendingTime",
        "transcriptReceiveTime",
        "statsPrinted",
        "lastUpdateServersTime",
        "ip",
        "port",
        "ip",
        "port",
        "Manager",
        "getInstance",
        "getNumWorkers",
        "Override",
        "configurationManager",
        "init",
        "configurationManager",
        "isEnabled",
        "servers",
        "isEmpty",
        "disable",
        "transcriptConfig",
        "getRemoteService",
        "ipedRoot",
        "getProperty",
        "IConfigurationDirectory",
        "IPED_ROOT",
        "ipedRoot",
        "path",
        "ipedRoot",
        "AudioTranscriptConfig",
        "CONF_FILE",
        "toPath",
        "configurationManager",
        "getConfigurationDirectory",
        "addPath",
        "path",
        "configurationManager",
        "addObject",
        "transcriptConfig",
        "configurationManager",
        "loadConfig",
        "transcriptConfig",
        "transcriptConfig",
        "getRemoteService",
        "disable",
        "transcriptConfig",
        "setEnabled",
        "transcriptConfig",
        "setClassName",
        "getClass",
        "getName",
        "disable",
        "disable",
        "transcriptConfig",
        "setEnabled",
        "logger",
        "warn",
        "requestServers",
        "task",
        "now",
        "now",
        "currentTimeMillis",
        "lastUpdateServersTime",
        "UPDATE_SERVERS_INTERVAL_MILLIS",
        "ipAndPort",
        "task",
        "transcriptConfig",
        "getRemoteService",
        "split",
        "ip",
        "ipAndPort",
        "port",
        "parseInt",
        "ipAndPort",
        "client",
        "ip",
        "port",
        "client",
        "getInputStream",
        "reader",
        "StandardCharsets",
        "UTF_8",
        "writer",
        "client",
        "getOutputStream",
        "StandardCharsets",
        "UTF_8",
        "client",
        "setSoTimeout",
        "writer",
        "MESSAGES",
        "DISCOVER",
        "numServers",
        "parseInt",
        "reader",
        "readLine",
        "servers",
        "i",
        "i",
        "numServers",
        "i",
        "ipPort",
        "reader",
        "readLine",
        "split",
        "server",
        "server",
        "ip",
        "ipPort",
        "server",
        "port",
        "parseInt",
        "ipPort",
        "servers",
        "add",
        "server",
        "logger",
        "info",
        "server",
        "ip",
        "server",
        "port",
        "RemoteAudioTranscriptTask",
        "servers",
        "servers",
        "lastUpdateServersTime",
        "currentTimeMillis",
        "e",
        "msg",
        "e",
        "toString",
        "servers",
        "isEmpty",
        "msg",
        "logger",
        "warn",
        "msg",
        "now",
        "requestServers",
        "now",
        "Override",
        "finish",
        "statsPrinted",
        "getAndSet",
        "numWorkers",
        "worker",
        "manager",
        "getNumWorkers",
        "df",
        "logger",
        "info",
        "df",
        "format",
        "audioSendingTime",
        "get",
        "numWorkers",
        "logger",
        "info",
        "df",
        "format",
        "transcriptReceiveTime",
        "get",
        "numWorkers",
        "servers",
        "isEmpty",
        "currentServer",
        "currentServer",
        "servers",
        "size",
        "currentServer",
        "servers",
        "get",
        "currentServer",
        "Override",
        "evidence",
        "tmp",
        "evidence",
        "getTempFile",
        "Override",
        "tmpFile",
        "requestServers",
        "server",
        "getServer",
        "requestTime",
        "currentTimeMillis",
        "serverSocket",
        "server",
        "ip",
        "server",
        "port",
        "serverSocket",
        "getInputStream",
        "reader",
        "StandardCharsets",
        "UTF_8",
        "bos",
        "serverSocket",
        "getOutputStream",
        "numConnectErrors",
        "timeoutSecs",
        "MIN_TIMEOUT",
        "TIMEOUT_PER_MB",
        "tmpFile",
        "length",
        "serverSocket",
        "setSoTimeout",
        "timeoutSecs",
        "response",
        "reader",
        "readLine",
        "response",
        "MESSAGES",
        "BUSY",
        "toString",
        "equals",
        "response",
        "logger",
        "debug",
        "server",
        "sleepBeforeRetry",
        "requestTime",
        "MESSAGES",
        "ACCEPTED",
        "toString",
        "equals",
        "response",
        "logger",
        "error",
        "server",
        "logger",
        "debug",
        "server",
        "t0",
        "currentTimeMillis",
        "bos",
        "write",
        "MESSAGES",
        "VERSION_1_2",
        "toString",
        "getBytes",
        "bos",
        "write",
        "MESSAGES",
        "AUDIO_SIZE",
        "toString",
        "getBytes",
        "dos",
        "bos",
        "dos",
        "writeLong",
        "tmpFile",
        "length",
        "dos",
        "flush",
        "Files",
        "copy",
        "tmpFile",
        "toPath",
        "bos",
        "bos",
        "flush",
        "t1",
        "currentTimeMillis",
        "response",
        "reader",
        "readLine",
        "MESSAGES",
        "PING",
        "toString",
        "equals",
        "response",
        "logger",
        "debug",
        "response",
        "response",
        "reader",
        "readLine",
        "MESSAGES",
        "WARN",
        "toString",
        "equals",
        "response",
        "warn",
        "reader",
        "readLine",
        "tryAgain",
        "warn",
        "contains",
        "getName",
        "evidence",
        "setTimeOut",
        "stats",
        "incTimeouts",
        "warn",
        "contains",
        "getName",
        "warn",
        "contains",
        "getName",
        "tryAgain",
        "logger",
        "warn",
        "server",
        "evidence",
        "getPath",
        "warn",
        "tryAgain",
        "tryAgain",
        "MESSAGES",
        "ERROR",
        "toString",
        "equals",
        "response",
        "response",
        "error",
        "response",
        "reader",
        "readLine",
        "logger",
        "error",
        "server",
        "error",
        "error",
        "textAndScore",
        "textAndScore",
        "score",
        "parseDouble",
        "response",
        "textAndScore",
        "text",
        "reader",
        "readLine",
        "t2",
        "currentTimeMillis",
        "MESSAGES",
        "DONE",
        "toString",
        "equals",
        "reader",
        "readLine",
        "logger",
        "error",
        "server",
        "audioSendingTime",
        "addAndGet",
        "t1",
        "t0",
        "transcriptReceiveTime",
        "addAndGet",
        "t2",
        "t1",
        "textAndScore",
        "e",
        "e",
        "numConnectErrors",
        "incrementAndGet",
        "numConnectErrors",
        "get",
        "worker",
        "manager",
        "getNumWorkers",
        "MAX_CONNECT_ERRORS",
        "sleepBeforeRetry",
        "requestTime",
        "requestServers",
        "logger",
        "warn",
        "server",
        "evidence",
        "getPath",
        "e",
        "lastRequestTime",
        "sleep",
        "getRetryIntervalMillis",
        "currentTimeMillis",
        "lastRequestTime",
        "sleep",
        "sleep",
        "sleep",
        "e",
        "e",
        "printStackTrace"
    ],
    "literals": [
        "\":\"",
        "\"conf/\"",
        "\"Remote transcription module disabled, service address not configured.\"",
        "\":\"",
        "\":\"",
        "\"Transcription server discovered: {}:{}\"",
        "\"Central transcription node refused connection, is it online? \"",
        "\"Time spent to send audios: {}s\"",
        "\"Time spent to receive transcriptions: {}s\"",
        "\"No transcription server available!\"",
        "\"Transcription server {} busy, trying another one.\"",
        "\"Error 0 in communication with {}. The audio will be retried.\"",
        "\"Transcription server {} accepted connection\"",
        "\"ping {}\"",
        "\"Fail to transcribe on server: {} audio: {} error: {}.{}\"",
        "\" The audio will be retried.\"",
        "\"\"",
        "\"Remote server process crashed or node was turned off!\"",
        "\"Error 1 in communication with {}: {}. The audio will be retried.\"",
        "\"Error 2 in communication with {}. The audio will be retried.\"",
        "\"Error receiving transcription.\"",
        "\"Network error communicating to server: \"",
        "\", retrying audio: \""
    ],
    "variables": [
        "ip",
        "port"
    ],
    "comments": [
        "See https://github.com/sepinf-inc/IPED/issues/1576",
        "This depends on how much time worker nodes need to consume their queue.",
        "Of course audios duration, nodes queue size and performance affect this.",
        "This tries to be fair with clients independent of their number of threads.",
        "maybe user changed installation configs",
        "bos.write(\"\\n\".getBytes());",
        "Must use long see #1833",
        "Timeout converting audio to wav, possibly it's corrupted"
    ],
    "docstrings": [
        "* Returns a transcription server between the discovered ones using a simple\n     * circular approach.\n     * \n     * @return Server instance to use",
        "* Don't convert to WAV on client side, return the audio as is."
    ],
    "functions": [
        "toString",
        "getRetryIntervalMillis",
        "init",
        "requestServers",
        "requestServers",
        "finish",
        "Server",
        "getServer",
        "File",
        "getTempFileToTranscript",
        "TextAndScore",
        "transcribeAudio",
        "sleepBeforeRetry"
    ],
    "classes": [
        "RemoteAudioTranscriptTask",
        "Server"
    ]
}