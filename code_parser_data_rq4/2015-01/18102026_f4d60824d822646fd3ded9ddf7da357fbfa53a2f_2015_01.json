{
    "identifiers": [
        "_Global",
        "_Base",
        "_BaseUtils",
        "_ElementUtilities",
        "_Events",
        "_OptionsParser",
        "key",
        "_ElementUtilities",
        "_ElementUtilities",
        "_ElementUtilities",
        "_ElementUtilities",
        "findNextFocusElement",
        "direction",
        "options",
        "findNextFocusElement",
        "direction",
        "options",
        "findNextFocusElement",
        "direction",
        "options",
        "findNextFocusElement",
        "direction",
        "options",
        "findNextFocusElement",
        "direction",
        "options",
        "direction",
        "options",
        "_findNextFocusElementInternal",
        "direction",
        "options",
        "result",
        "result",
        "moveFocus",
        "direction",
        "options",
        "moveFocus",
        "direction",
        "options",
        "moveFocus",
        "direction",
        "options",
        "moveFocus",
        "direction",
        "options",
        "moveFocus",
        "direction",
        "options",
        "direction",
        "options",
        "findNextFocusElement",
        "direction",
        "options",
        "result",
        "_Global",
        "_trySetFocus",
        "result",
        "eventSrc",
        "EventNames",
        "previousFocusElement",
        "result",
        "_xyFocusEnabled",
        "_Global",
        "_handleKeyEvent",
        "_xyFocusEnabled",
        "_xyFocusEnabled",
        "_Global",
        "_handleKeyEvent",
        "_xyFocusEnabled",
        "direction",
        "keyCode",
        "referenceRect",
        "referenceRect",
        "_Global",
        "_lastTarget",
        "_historyRect",
        "_lastTarget",
        "_cachedLastTargetRect",
        "_lastTarget",
        "_cachedLastTargetRect",
        "_toIRect",
        "_lastTarget",
        "lastTargetRect",
        "_cachedLastTargetRect",
        "lastTargetRect",
        "_cachedLastTargetRect",
        "_historyRect",
        "_lastTarget",
        "_cachedLastTargetRect",
        "_Global",
        "_findNextFocusElementInternal",
        "direction",
        "focusRoot",
        "_historyRect",
        "_lastTarget",
        "referenceRect",
        "result",
        "_trySetFocus",
        "result",
        "keyCode",
        "result",
        "_historyRect",
        "updateHistoryRect",
        "direction",
        "result",
        "_lastTarget",
        "result",
        "_cachedLastTargetRect",
        "result",
        "result",
        "_afEnabledFrames",
        "result",
        "index",
        "_toIRect",
        "result",
        "result",
        "result",
        "result",
        "result",
        "result",
        "message",
        "CrossDomainMessageConstants",
        "CrossDomainMessageConstants",
        "direction",
        "refRect",
        "result",
        "message",
        "eventSrc",
        "EventNames",
        "activeElement",
        "keyCode",
        "top",
        "refRect",
        "refRect",
        "_Global",
        "_toIRect",
        "_Global",
        "_defaultRect",
        "message",
        "CrossDomainMessageConstants",
        "CrossDomainMessageConstants",
        "direction",
        "refRect",
        "_Global",
        "message",
        "direction",
        "result",
        "_defaultRect",
        "direction",
        "DirectionNames",
        "direction",
        "DirectionNames",
        "newHistoryRect",
        "_Global",
        "result",
        "result",
        "_historyRect",
        "_historyRect",
        "newHistoryRect",
        "_Global",
        "result",
        "result",
        "_historyRect",
        "_historyRect",
        "newHistoryRect",
        "newHistoryRect",
        "newHistoryRect",
        "result",
        "newHistoryRect",
        "result",
        "newHistoryRect",
        "newHistoryRect",
        "newHistoryRect",
        "newHistoryRect",
        "newHistoryRect",
        "newHistoryRect",
        "newHistoryRect",
        "_Global",
        "result",
        "result",
        "_historyRect",
        "_historyRect",
        "newHistoryRect",
        "_Global",
        "result",
        "result",
        "_historyRect",
        "_historyRect",
        "newHistoryRect",
        "newHistoryRect",
        "newHistoryRect",
        "result",
        "newHistoryRect",
        "result",
        "newHistoryRect",
        "newHistoryRect",
        "newHistoryRect",
        "newHistoryRect",
        "newHistoryRect",
        "newHistoryRect",
        "_historyRect",
        "newHistoryRect",
        "direction",
        "options",
        "options",
        "options",
        "options",
        "options",
        "focusRoot",
        "_Global",
        "options",
        "options",
        "_defaultRect",
        "_Global",
        "_Global",
        "_Global",
        "getReferenceObject",
        "options",
        "options",
        "refObj",
        "refObj",
        "AttributeNames",
        "refObj",
        "AttributeNames",
        "manualOverrideOptions",
        "_OptionsParser",
        "manualOverrideOptions",
        "parsedOptions",
        "direction",
        "parsedOptions",
        "direction",
        "direction",
        "selector",
        "refObj",
        "target",
        "element",
        "target",
        "element",
        "selector",
        "element",
        "element",
        "target",
        "target",
        "_Global",
        "target",
        "_toIRect",
        "target",
        "options",
        "allElements",
        "i",
        "length",
        "i",
        "allElements",
        "i",
        "refObj",
        "potentialElement",
        "isFocusable",
        "potentialElement",
        "_toIRect",
        "potentialElement",
        "potentialRect",
        "potentialRect",
        "calculateScore",
        "direction",
        "maxDistance",
        "options",
        "refObj",
        "potentialRect",
        "score",
        "bestPotential",
        "bestPotential",
        "potentialElement",
        "bestPotential",
        "potentialRect",
        "bestPotential",
        "score",
        "bestPotential",
        "bestPotential",
        "bestPotential",
        "refObj",
        "minReferenceCoord",
        "maxReferenceCoord",
        "minPotentialCoord",
        "maxPotentialCoord",
        "minReferenceCoord",
        "maxPotentialCoord",
        "maxReferenceCoord",
        "minPotentialCoord",
        "_Global",
        "maxReferenceCoord",
        "maxPotentialCoord",
        "_Global",
        "minReferenceCoord",
        "minPotentialCoord",
        "maxReferenceCoord",
        "minReferenceCoord",
        "pixelOverlapWithTheReferenceShadow",
        "referenceEdgeLength",
        "direction",
        "maxDistance",
        "historyRect",
        "referenceRect",
        "potentialRect",
        "direction",
        "DirectionNames",
        "potentialRect",
        "referenceRect",
        "percentInShadow",
        "calculatePercentInShadow",
        "referenceRect",
        "referenceRect",
        "potentialRect",
        "potentialRect",
        "primaryAxisDistance",
        "referenceRect",
        "potentialRect",
        "percentInShadow",
        "percentInHistoryShadow",
        "calculatePercentInShadow",
        "historyRect",
        "historyRect",
        "potentialRect",
        "potentialRect",
        "secondaryAxisDistance",
        "referenceRect",
        "potentialRect",
        "potentialRect",
        "referenceRect",
        "referenceRect",
        "potentialRect",
        "DirectionNames",
        "potentialRect",
        "referenceRect",
        "percentInShadow",
        "calculatePercentInShadow",
        "referenceRect",
        "referenceRect",
        "potentialRect",
        "potentialRect",
        "primaryAxisDistance",
        "potentialRect",
        "referenceRect",
        "percentInShadow",
        "percentInHistoryShadow",
        "calculatePercentInShadow",
        "historyRect",
        "historyRect",
        "potentialRect",
        "potentialRect",
        "secondaryAxisDistance",
        "referenceRect",
        "potentialRect",
        "potentialRect",
        "referenceRect",
        "referenceRect",
        "potentialRect",
        "DirectionNames",
        "potentialRect",
        "referenceRect",
        "percentInShadow",
        "calculatePercentInShadow",
        "referenceRect",
        "referenceRect",
        "potentialRect",
        "potentialRect",
        "primaryAxisDistance",
        "referenceRect",
        "potentialRect",
        "percentInShadow",
        "percentInHistoryShadow",
        "calculatePercentInShadow",
        "historyRect",
        "historyRect",
        "potentialRect",
        "potentialRect",
        "secondaryAxisDistance",
        "referenceRect",
        "potentialRect",
        "potentialRect",
        "referenceRect",
        "referenceRect",
        "potentialRect",
        "DirectionNames",
        "potentialRect",
        "referenceRect",
        "percentInShadow",
        "calculatePercentInShadow",
        "referenceRect",
        "referenceRect",
        "potentialRect",
        "potentialRect",
        "primaryAxisDistance",
        "potentialRect",
        "referenceRect",
        "percentInShadow",
        "percentInHistoryShadow",
        "calculatePercentInShadow",
        "historyRect",
        "historyRect",
        "potentialRect",
        "potentialRect",
        "secondaryAxisDistance",
        "referenceRect",
        "potentialRect",
        "potentialRect",
        "referenceRect",
        "referenceRect",
        "potentialRect",
        "primaryAxisDistance",
        "primaryAxisDistance",
        "maxDistance",
        "primaryAxisDistance",
        "secondaryAxisDistance",
        "maxDistance",
        "secondaryAxisDistance",
        "primaryAxisDistance",
        "secondaryAxisDistance",
        "primaryAxisDistance",
        "primaryAxisDistance",
        "percentInShadow",
        "score",
        "primaryAxisDistance",
        "ScoringConstants",
        "secondaryAxisDistance",
        "ScoringConstants",
        "percentInHistoryShadow",
        "ScoringConstants",
        "score",
        "referenceElement",
        "referenceRect",
        "referenceElement",
        "referenceRect",
        "referenceElement",
        "referenceElement",
        "_Global",
        "_Global",
        "referenceElement",
        "_Global",
        "referenceElement",
        "refElement",
        "referenceElement",
        "refRect",
        "_toIRect",
        "refElement",
        "referenceRect",
        "refRect",
        "_toIRect",
        "referenceRect",
        "refRect",
        "_defaultRect",
        "refElement",
        "refRect",
        "element",
        "element",
        "element",
        "FocusableTagNames",
        "elementTagName",
        "_ElementUtilities",
        "element",
        "ClassNames",
        "elementTagName",
        "_afEnabledFrames",
        "element",
        "elementTagName",
        "element",
        "element",
        "getComputedStyle",
        "element",
        "element",
        "style",
        "style",
        "element",
        "rect",
        "_Global",
        "rect",
        "_Global",
        "rect",
        "rect",
        "_Global",
        "rect",
        "rect",
        "_Global",
        "rect",
        "_Global",
        "rect",
        "_Global",
        "rect",
        "element",
        "keyCode",
        "eventSrc",
        "EventNames",
        "element",
        "keyCode",
        "canceled",
        "element",
        "_Global",
        "element",
        "win",
        "_Global",
        "iframes",
        "x",
        "x",
        "win",
        "found",
        "found",
        "e",
        "e",
        "keyCodeMap",
        "i",
        "keys",
        "i",
        "keys",
        "i",
        "keyCodeMap",
        "key",
        "keyMappings",
        "e",
        "_xyFocus",
        "key",
        "e",
        "e",
        "_Global",
        "e",
        "e",
        "e",
        "CrossDomainMessageConstants",
        "e",
        "CrossDomainMessageConstants",
        "data",
        "CrossDomainMessageConstants",
        "_afEnabledFrames",
        "e",
        "CrossDomainMessageConstants",
        "_afEnabledFrames",
        "e",
        "index",
        "_afEnabledFrames",
        "index",
        "CrossDomainMessageConstants",
        "enableXYFocus",
        "_xyFocus",
        "data",
        "data",
        "CrossDomainMessageConstants",
        "_getIFrameFromWindow",
        "e",
        "_Global",
        "iframe",
        "data",
        "refRect",
        "iframe",
        "refRect",
        "iframe",
        "_xyFocus",
        "data",
        "refRect",
        "_Global",
        "_ElementUtilities",
        "_Global",
        "_Global",
        "enableXYFocus",
        "_Global",
        "_Global",
        "message",
        "CrossDomainMessageConstants",
        "CrossDomainMessageConstants",
        "_Global",
        "message",
        "keyCodeMap",
        "focusRoot",
        "value",
        "focusRoot",
        "value",
        "enableXYFocus",
        "disableXYFocus",
        "findNextFocusElement",
        "moveFocus",
        "_xyFocus",
        "toPublish",
        "_BaseUtils",
        "toPublish",
        "_Events",
        "toPublish",
        "_Events",
        "toPublish",
        "_Base",
        "toPublish"
    ],
    "literals": [
        "\"./Core/_Global\"",
        "\"./Core/_Base\"",
        "\"./Core/_BaseUtils\"",
        "\"./Utilities/_ElementUtilities\"",
        "\"./Core/_Events\"",
        "\"./ControlProcessor/_OptionsParser\"",
        "\"use strict\"",
        "\"data-win-xyfocus\"",
        "\"data-win-focus\"",
        "\"win-focusable\"",
        "\"msWinJSXYFocusControlMessage\"",
        "\"register\"",
        "\"unregister\"",
        "\"dFocusEnter\"",
        "\"dFocusExit\"",
        "\"left\"",
        "\"right\"",
        "\"up\"",
        "\"down\"",
        "\"focuschanging\"",
        "\"focuschanged\"",
        "\"A\"",
        "\"BUTTON\"",
        "\"IFRAME\"",
        "\"INPUT\"",
        "\"SELECT\"",
        "\"TEXTAREA\"",
        "string",
        "string",
        "string",
        "string",
        "\"left\"",
        "\"right\"",
        "\"up\"",
        "\"down\"",
        "string",
        "string",
        "\"left\"",
        "\"right\"",
        "\"up\"",
        "\"down\"",
        "string",
        "\"keydown\"",
        "\"keydown\"",
        "string",
        "\"IFRAME\"",
        "\"*\"",
        "\"*\"",
        "string",
        "string",
        "string",
        "\"*\"",
        "string",
        "\"tabindex\"",
        "\"IFRAME\"",
        "\"DIV\"",
        "\"winControl\"",
        "\"winControl\"",
        "\"tabIndex\"",
        "\"-1\"",
        "\"none\"",
        "\"hidden\"",
        "\"IFRAME\"",
        "\"message\"",
        "\"DOMContentLoaded\"",
        "\"Windows\"",
        "\"Windows\"",
        "\"Xbox\"",
        "\"*\"",
        "\"_listeners\"",
        "\"WinJS.UI.XYFocus\""
    ],
    "variables": [
        "AttributeNames",
        "ClassNames",
        "CrossDomainMessageConstants",
        "DirectionNames",
        "EventNames",
        "FocusableTagNames",
        "ScoringConstants",
        "keyCodeMap",
        "focusRoot",
        "result",
        "result",
        "previousFocusElement",
        "_xyFocusEnabled",
        "_lastTarget",
        "_cachedLastTargetRect",
        "_historyRect",
        "_afEnabledFrames",
        "lastTargetRect",
        "activeElement",
        "lastTarget",
        "_lastTarget",
        "result",
        "index",
        "refRect",
        "message",
        "refRect",
        "referenceRect",
        "message",
        "newHistoryRect",
        "maxDistance",
        "refObj",
        "manualOverrideOptions",
        "parsedOptions",
        "selector",
        "target",
        "element",
        "bestPotential",
        "allElements",
        "i",
        "length",
        "potentialElement",
        "potentialRect",
        "score",
        "pixelOverlapWithTheReferenceShadow",
        "referenceEdgeLength",
        "score",
        "percentInShadow",
        "primaryAxisDistance",
        "secondaryAxisDistance",
        "percentInHistoryShadow",
        "refElement",
        "refRect",
        "elementTagName",
        "style",
        "canceled",
        "iframes",
        "found",
        "keys",
        "i",
        "key",
        "keyMappings",
        "data",
        "index",
        "iframe",
        "refRect",
        "message",
        "toPublish",
        "eventSrc"
    ],
    "comments": [
        "Copyright (c) Microsoft Open Technologies, Inc.  All Rights Reserved. Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.",
        "These factors can be tweaked to adjust which elements are favored by the focus algorithm",
        "Privates",
        "If focus has moved since the last XYFocus movement, scrolling occured, or an explicit",
        "reference rectangle was given to us, then we invalidate the history rectangle.",
        "A focus target was found",
        "Reset history since the override target could be anywhere",
        "If we successfully moved focus and the new focused item is an IFRAME, then we need to notify it",
        "Note on coordinates: When signaling enter, DO transform the coordinates into the child frame's coordinate system.",
        "No focus target was found; if we are inside an IFRAME, notify the parent that focus is exiting this IFRAME",
        "Note on coordinates: When signaling exit, do NOT transform the coordinates into the parent's coordinate system.",
        "Nested Helpers",
        "It's possible to get into a situation where the target element has no overlap with the reference edge.",
        "",
        "..╔══════════════╗..........................",
        "..║   reference  ║..........................",
        "..╚══════════════╝..........................",
        ".....................╔═══════════════════╗..",
        ".....................║                   ║..",
        ".....................║       target      ║..",
        ".....................║                   ║..",
        ".....................╚═══════════════════╝..",
        "",
        "If that is the case, we need to reset the coordinates to the edge of the target element.",
        "Handle override",
        "The left-hand side can be cased as either \"left\" or \"Left\".",
        "Calculate scores for each element in the root",
        "Skip elements that have either a width of zero or a height of zero",
        "Nested Helpers",
        "Calculates the percentage of the potential element that is in the shadow of the reference element.",
        "Make sure we don't evaluate any potential elements to the right of the reference element",
        "If the potential element is not in the shadow, then we calculate secondary axis distance",
        "Make sure we don't evaluate any potential elements to the left of the reference element",
        "If the potential element is not in the shadow, then we calculate secondary axis distance",
        "Make sure we don't evaluate any potential elements below the reference element",
        "If the potential element is not in the shadow, then we calculate secondary axis distance",
        "Make sure we don't evaluate any potential elements above the reference element",
        "If the potential element is not in the shadow, then we calculate secondary axis distance",
        "The score needs to be a positive number so we make these distances positive numbers",
        "Potential elements in the shadow get a multiplier to their final score",
        "Note: We need to check to make sure 'parentNode' is not null otherwise there is a case",
        "where _lastTarget is defined, but calling getBoundingClientRect will throw a native exception.",
        "This case happens if the innerHTML of the parent of the _lastTarget is set to \"\".",
        "If no valid reference is supplied, we'll use _Global.document.activeElement unless it's the body",
        "If the current potential element is not one of the tags we consider to be focusable, then exit",
        "Skip IFRAMEs without compatible XYFocus implementation",
        "Skip disabled WinJS controls",
        "Skip elements that are hidden",
        "Note: We don't check for opacity === 0, because the browser cannot tell us this value accurately.",
        "We set the top, left, bottom and right properties of the referenceBoundingRectangle to '-1'",
        "(as opposed to '0') because we want to make sure that even elements that are up to the edge",
        "of the screen can receive focus.",
        "We raise an event on the focusRoot before focus changes to give listeners",
        "a chance to prevent the next focus target from receiving focus if they want.",
        "Note: key is 'left', 'right', 'up', or 'down'",
        "The coordinates stored in data.refRect are already in this frame's coordinate system.",
        "When we get this message we will force-enable XYFocus to support scenarios where",
        "websites running WinJS are put into an IFRAME and the parent frame has XYFocus enabled.",
        "Since postMessage is async, by the time we get this message, the user may have",
        "manually moved the focus elsewhere, if so, ignore this message.",
        "The coordinates stored in data.refRect are in the IFRAME's coordinate system,",
        "so we must first transform them into this frame's coordinate system.",
        "If we are running within an iframe, we send a registration message to the parent window",
        "Publish to WinJS namespace"
    ],
    "docstrings": [
        "* The focus scope, only children of this element are considered in the calculation.\n    *",
        "* A rectangle indicating where focus came from before the current state.\n    *",
        "* The element from which to calculate the next focusable element; if specified, referenceRect is ignored.\n    *",
        "* The rectangle from which to calculate next focusable element; ignored if referenceElement is also specified.\n    *",
        "* Gets the mapping object that maps keycodes to XYFocus actions.\n*",
        "* Gets or sets the focus root when invoking XYFocus APIs.\n*",
        "* Returns the next focusable element from the current active element (or reference, if supplied) towards the specified direction.\n * @param direction The direction to search.\n * @param options An options object configuring the search.\n*",
        "* Moves focus to the next focusable element from the current active element (or reference, if supplied) towards the specific direction.\n * @param direction The direction to move.\n * @param options An options object configuring the focus move.\n*"
    ],
    "functions": [
        "findNextFocusElement",
        "moveFocus",
        "enableXYFocus",
        "disableXYFocus",
        "_xyFocus",
        "updateHistoryRect",
        "_findNextFocusElementInternal",
        "calculatePercentInShadow",
        "calculateScore",
        "getReferenceObject",
        "isFocusable",
        "_defaultRect",
        "_toIRect",
        "_trySetFocus",
        "_getIFrameFromWindow",
        "_handleKeyEvent"
    ],
    "classes": []
}