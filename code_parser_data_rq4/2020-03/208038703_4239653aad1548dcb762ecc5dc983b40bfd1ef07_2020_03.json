{
    "identifiers": [
        "argparse",
        "json",
        "sys",
        "datetime",
        "datetime",
        "google",
        "cloud",
        "bigquery",
        "google",
        "api_core",
        "exceptions",
        "BadRequest",
        "kcidb",
        "db",
        "schema",
        "kcidb",
        "io",
        "dataset_name",
        "isinstance",
        "dataset_name",
        "bigquery",
        "Client",
        "client",
        "dataset",
        "dataset_name",
        "table_name",
        "table_schema",
        "schema",
        "TABLE_MAP",
        "items",
        "dataset_ref",
        "table",
        "table_name",
        "bigquery",
        "table",
        "Table",
        "table_ref",
        "schema",
        "table_schema",
        "client",
        "create_table",
        "table",
        "table_name",
        "_",
        "schema",
        "TABLE_MAP",
        "items",
        "dataset_ref",
        "table",
        "table_name",
        "client",
        "delete_table",
        "table_ref",
        "staticmethod",
        "node",
        "isinstance",
        "node",
        "Decimal",
        "node",
        "isinstance",
        "node",
        "datetime",
        "node",
        "isoformat",
        "isinstance",
        "node",
        "index",
        "value",
        "node",
        "Client",
        "_unpack_node",
        "value",
        "isinstance",
        "node",
        "key",
        "value",
        "node",
        "items",
        "value",
        "node",
        "key",
        "key",
        "json",
        "loads",
        "value",
        "Client",
        "_unpack_node",
        "value",
        "node",
        "version",
        "major",
        "io",
        "schema",
        "JSON_VERSION_MAJOR",
        "minor",
        "io",
        "schema",
        "JSON_VERSION_MINOR",
        "obj_list_name",
        "schema",
        "TABLE_MAP",
        "bigquery",
        "job",
        "QueryJobConfig",
        "default_dataset",
        "dataset_ref",
        "client",
        "query",
        "obj_list_name",
        "job_config",
        "job_config",
        "Client",
        "_unpack_node",
        "row",
        "items",
        "row",
        "query_job",
        "io",
        "schema",
        "validate",
        "data",
        "data",
        "staticmethod",
        "node",
        "isinstance",
        "node",
        "node",
        "copy",
        "index",
        "value",
        "node",
        "Client",
        "_pack_node",
        "value",
        "isinstance",
        "node",
        "node",
        "copy",
        "key",
        "value",
        "node",
        "items",
        "key",
        "json",
        "dumps",
        "value",
        "Client",
        "_pack_node",
        "value",
        "node",
        "data",
        "io",
        "schema",
        "validate",
        "data",
        "obj_list_name",
        "schema",
        "TABLE_MAP",
        "obj_list_name",
        "data",
        "Client",
        "_pack_node",
        "data",
        "obj_list_name",
        "bigquery",
        "job",
        "LoadJobConfig",
        "autodetect",
        "schema",
        "schema",
        "TABLE_MAP",
        "obj_list_name",
        "client",
        "load_table_from_json",
        "obj_list",
        "dataset_ref",
        "table",
        "obj_list_name",
        "job_config",
        "job_config",
        "job",
        "result",
        "BadRequest",
        "join",
        "error",
        "error",
        "job",
        "errors",
        "staticmethod",
        "data",
        "obj_list_name",
        "io",
        "schema",
        "validate",
        "data",
        "isinstance",
        "obj_list_name",
        "obj_list_name",
        "endswith",
        "obj_list_name",
        "child_list_name",
        "schema",
        "TABLE_CHILDREN_MAP",
        "obj_list_name",
        "Client",
        "_get_ids_query",
        "data",
        "child_list_name",
        "child_query_string",
        "child_query_params",
        "child_query_string",
        "query_string",
        "query_string",
        "query_string",
        "obj_name",
        "obj_name",
        "child_list_name",
        "child_query_string",
        "query_params",
        "child_query_params",
        "data",
        "get",
        "obj_list_name",
        "query_string",
        "query_string",
        "query_string",
        "query_params",
        "bigquery",
        "ArrayQueryParameter",
        "bigquery",
        "StructQueryParameter",
        "bigquery",
        "ScalarQueryParameter",
        "obj",
        "bigquery",
        "ScalarQueryParameter",
        "obj",
        "obj",
        "data",
        "get",
        "obj_list_name",
        "query_string",
        "query_params",
        "query_string",
        "query_params",
        "data",
        "obj_list_name",
        "join_string",
        "join_params",
        "io",
        "schema",
        "validate",
        "data",
        "isinstance",
        "obj_list_name",
        "obj_list_name",
        "endswith",
        "isinstance",
        "join_string",
        "isinstance",
        "join_params",
        "obj_list_name",
        "obj_list_name",
        "obj_list_name",
        "join_string",
        "bigquery",
        "job",
        "QueryJobConfig",
        "query_parameters",
        "join_params",
        "default_dataset",
        "dataset_ref",
        "client",
        "query",
        "query_string",
        "job_config",
        "job_config",
        "Client",
        "_unpack_node",
        "row",
        "items",
        "row",
        "query_job",
        "child_list_name",
        "schema",
        "TABLE_CHILDREN_MAP",
        "obj_list_name",
        "obj_list_name",
        "child_list_name",
        "obj_name",
        "obj_list_name",
        "child_list_name",
        "obj_name",
        "obj_list_name",
        "join_string",
        "_query_tree",
        "data",
        "child_list_name",
        "child_join_string",
        "join_params",
        "io",
        "schema",
        "validate",
        "data",
        "data",
        "io",
        "schema",
        "validate",
        "data",
        "version",
        "major",
        "io",
        "schema",
        "JSON_VERSION_MAJOR",
        "minor",
        "io",
        "schema",
        "JSON_VERSION_MINOR",
        "obj_list_name",
        "schema",
        "TABLE_CHILDREN_MAP",
        "Client",
        "_get_ids_query",
        "data",
        "obj_list_name",
        "query_string",
        "query_params",
        "query_string",
        "bigquery",
        "job",
        "QueryJobConfig",
        "query_parameters",
        "query_params",
        "default_dataset",
        "dataset_ref",
        "client",
        "query",
        "query_string",
        "job_config",
        "job_config",
        "query_job",
        "result",
        "result",
        "total_rows",
        "obj_list_name",
        "obj_list_name",
        "bigquery",
        "ArrayQueryParameter",
        "bigquery",
        "StructQueryParameter",
        "bigquery",
        "ScalarQueryParameter",
        "row",
        "origin",
        "bigquery",
        "ScalarQueryParameter",
        "row",
        "origin_id",
        "row",
        "result",
        "_query_tree",
        "complement",
        "obj_list_name",
        "join_string",
        "join_params",
        "complement",
        "argparse",
        "ArgumentParser",
        "description",
        "description",
        "parser",
        "add_argument",
        "help",
        "required",
        "parser",
        "parse_args",
        "json",
        "load",
        "sys",
        "stdin",
        "io",
        "schema",
        "validate",
        "data",
        "Client",
        "args",
        "dataset",
        "json",
        "dump",
        "client",
        "complement",
        "data",
        "sys",
        "stdout",
        "indent",
        "sort_keys",
        "argparse",
        "ArgumentParser",
        "description",
        "description",
        "parser",
        "add_argument",
        "help",
        "required",
        "parser",
        "parse_args",
        "Client",
        "args",
        "dataset",
        "json",
        "dump",
        "client",
        "query",
        "sys",
        "stdout",
        "indent",
        "sort_keys",
        "argparse",
        "ArgumentParser",
        "description",
        "description",
        "parser",
        "add_argument",
        "help",
        "required",
        "parser",
        "parse_args",
        "json",
        "load",
        "sys",
        "stdin",
        "io",
        "schema",
        "validate",
        "data",
        "Client",
        "args",
        "dataset",
        "client",
        "load",
        "data",
        "argparse",
        "ArgumentParser",
        "description",
        "description",
        "parser",
        "add_argument",
        "help",
        "required",
        "parser",
        "parse_args",
        "Client",
        "args",
        "dataset",
        "client",
        "init",
        "argparse",
        "ArgumentParser",
        "description",
        "description",
        "parser",
        "add_argument",
        "help",
        "required",
        "parser",
        "parse_args",
        "Client",
        "args",
        "dataset",
        "client",
        "cleanup"
    ],
    "literals": [
        "\"misc\"",
        "f\"SELECT * FROM `{obj_list_name}`\"",
        "\"misc\"",
        "\"\"",
        "f\"ERROR: {error['message']}\\n\"",
        "'message'",
        "\"s\"",
        "\"\"",
        "\"UNION DISTINCT\\n\"",
        "f\"SELECT \"",
        "f\"table.{obj_name}_origin as origin, \"",
        "f\"table.{obj_name}_origin_id as origin_id \"",
        "f\"FROM {child_list_name} as table \"",
        "f\"INNER JOIN ({child_query_string}) as ids \"",
        "f\"ON table.origin = ids.origin AND \"",
        "f\"   table.origin_id = ids.origin_id\\n\"",
        "\"UNION DISTINCT\\n\"",
        "\"SELECT * FROM UNNEST(?)\\n\"",
        "\"STRUCT\"",
        "\"origin\"",
        "\"STRING\"",
        "\"origin\"",
        "\"origin_id\"",
        "\"STRING\"",
        "\"origin_id\"",
        "\"s\"",
        "f\"SELECT {obj_list_name}.* FROM {obj_list_name}\\n{join_string}\"",
        "f\"INNER JOIN {obj_list_name} \"",
        "f\"ON {child_list_name}.{obj_name}_origin = \"",
        "f\"   {obj_list_name}.origin AND \"",
        "f\"   {child_list_name}.{obj_name}_origin_id = \"",
        "f\"   {obj_list_name}.origin_id\\n\"",
        "f\"{join_string}\"",
        "\"\"",
        "f\"INNER JOIN UNNEST(?) as ids \"",
        "f\"ON {obj_list_name}.origin = ids.origin AND \"",
        "f\"   {obj_list_name}.origin_id = ids.origin_id\\n\"",
        "\"STRUCT\"",
        "\"origin\"",
        "\"STRING\"",
        "\"origin_id\"",
        "\"STRING\"",
        "'kcidb-db-complement - Complement reports from database'",
        "'-d'",
        "'--dataset'",
        "'Dataset name'",
        "'kcidb-db-query - Query reports from Kernel CI report database'",
        "'-d'",
        "'--dataset'",
        "'Dataset name'",
        "'kcidb-db-load - Load reports into Kernel CI report database'",
        "'-d'",
        "'--dataset'",
        "'Dataset name'",
        "'kcidb-db-init - Initialize a Kernel CI report database'",
        "'-d'",
        "'--dataset'",
        "'Dataset name'",
        "'kcidb-db-cleanup - Cleanup a Kernel CI report database'",
        "'-d'",
        "'--dataset'",
        "'Dataset name'"
    ],
    "variables": [
        "client",
        "dataset_ref",
        "table_ref",
        "table",
        "table_ref",
        "node",
        "node",
        "node",
        "index",
        "node",
        "key",
        "node",
        "key",
        "data",
        "job_config",
        "query_job",
        "data",
        "obj_list_name",
        "node",
        "node",
        "index",
        "node",
        "node",
        "key",
        "node",
        "key",
        "obj_list",
        "job_config",
        "job",
        "obj_name",
        "query_string",
        "query_params",
        "child_query_string",
        "child_query_params",
        "obj_name",
        "query_string",
        "job_config",
        "query_job",
        "data",
        "obj_list_name",
        "child_join_string",
        "complement",
        "query_string",
        "query_params",
        "job_config",
        "query_job",
        "result",
        "join_string",
        "join_params",
        "description",
        "parser",
        "args",
        "data",
        "client",
        "description",
        "parser",
        "args",
        "client",
        "description",
        "parser",
        "args",
        "data",
        "client",
        "description",
        "parser",
        "args",
        "client",
        "description",
        "parser",
        "args",
        "client"
    ],
    "comments": [
        "Flatten the \"misc\" fields",
        "Workaround client library choking on empty array parameters",
        "For each top-level table",
        "Get complement IDs",
        "Workaround client library choking on empty array parameters",
        "Get object tree starting with complement IDs"
    ],
    "docstrings": [
        "\"\"\"Kernel CI report database\"\"\"",
        "\"\"\"Kernel CI report database client\"\"\"",
        "\"\"\"\n        Initialize a Kernel CI report database client.\n\n        Args:\n            dataset_name:   The name of the Kernel CI dataset. The dataset\n                            should be located within the Google Cloud project\n                            specified in the credentials file pointed to by\n                            GOOGLE_APPLICATION_CREDENTIALS environment\n                            variable.\n        \"\"\"",
        "\"\"\"\n        Initialize the database. The database must be empty.\n        \"\"\"",
        "\"\"\"\n        Cleanup (empty) the database, removing all data.\n        \"\"\"",
        "\"\"\"\n        Unpack a retrieved data node (and all its children) to\n        the JSON-compatible and schema-complying representation.\n\n        Args:\n            node:   The node to unpack.\n\n        Returns:\n            The unpacked node.\n        \"\"\"",
        "\"\"\"\n        Query data from the database.\n\n        Returns:\n            The JSON data from the database adhering to the I/O schema\n            (kcidb.io.schema.JSON).\n        \"\"\"",
        "\"\"\"\n        Pack a loaded data node (and all its children) to\n        the BigQuery storage-compatible representation.\n\n        Args:\n            node:   The node to pack.\n\n        Returns:\n            The packed node.\n        \"\"\"",
        "\"\"\"\n        Load data into the database.\n\n        Args:\n            data:   The JSON data to load into the database.\n                    Must adhere to the I/O schema (kcidb.io.schema.JSON).\n        \"\"\"",
        "\"\"\"\n        Generate a query string and parameters retrieving IDs of specific\n        objects referenced by the supplied data, both directly and as parents.\n\n        Args:\n            data:           The data to get objects from.\n            obj_list_name:  Plural name of the object type (table name) to\n                            query IDs for.\n\n        Returns:\n            The query string and a list of (positional) parameters for it, or\n            an empty string and an empty list if there were no object IDs\n            referenced in the data.\n            If the query string is returned, the query would produce two\n            columns: \"origin\" and \"origin_id\".\n        \"\"\"",
        "\"\"\"\n        Retrieve objects of particular type selected by the specified JOIN\n        clause string and parameters, as well as their children.\n\n        Args:\n            data:           The I/O-schema data to put retrieved objects\n                            into.\n            obj_list_name:  Plural name of the type of object (table name)\n                            to retrieve\n            join_string:    The JOIN clause string to limit the query with.\n            join_params:    The parameters for the JOIN clause.\n        \"\"\"",
        "\"\"\"\n        Given I/O data, return its complement. I.e. the same data, but with\n        all objects from the database it references. E.g. for each revision\n        load all its builds, for each build load all its tests. And vice\n        versa: for each test load its build, and for each build load its\n        revision.\n\n        Args:\n            data:   The JSON data to complement from the database.\n                    Must adhere to the I/O schema (kcidb.io.schema.JSON).\n                    Will not be modified.\n\n        Returns:\n            The complemented JSON data from the database adhering to the I/O\n            schema (kcidb.io.schema.JSON).\n        \"\"\"",
        "\"\"\"Execute the kcidb-db-complement command-line tool\"\"\"",
        "\"\"\"Execute the kcidb-db-query command-line tool\"\"\"",
        "\"\"\"Execute the kcidb-db-load command-line tool\"\"\"",
        "\"\"\"Execute the kcidb-db-init command-line tool\"\"\"",
        "\"\"\"Execute the kcidb-db-cleanup command-line tool\"\"\""
    ],
    "functions": [
        "init",
        "cleanup",
        "_unpack_node",
        "query",
        "_pack_node",
        "load",
        "_get_ids_query",
        "_query_tree",
        "complement",
        "complement_main",
        "query_main",
        "load_main",
        "init_main",
        "cleanup_main"
    ],
    "classes": [
        "Client"
    ]
}