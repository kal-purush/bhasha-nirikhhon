{
    "identifiers": [
        "require",
        "search_term",
        "timestamp",
        "fs",
        "csv_filename",
        "Convert2DArrayToCSV",
        "csv_fields",
        "require",
        "casper",
        "message",
        "message",
        "objArray",
        "objArray",
        "objArray",
        "objArray",
        "i",
        "array",
        "i",
        "index",
        "array",
        "i",
        "line",
        "line",
        "delimiter_escaped_value",
        "array",
        "i",
        "index",
        "line",
        "delimiter_escaped_value",
        "line",
        "destination",
        "destination",
        "destination",
        "destination",
        "destination",
        "casper",
        "destination",
        "casper",
        "factory_urls",
        "factory_links",
        "index",
        "index",
        "factory_links",
        "index",
        "index",
        "host_url",
        "factory_links",
        "index",
        "factory_urls",
        "host_url",
        "factory_links",
        "index",
        "casper",
        "host_url",
        "factory_links",
        "index",
        "casper",
        "nodes",
        "tr",
        "tr",
        "tr",
        "tr",
        "tr",
        "tr",
        "tr",
        "processed_table_rows",
        "tr_data",
        "tr_data",
        "tr_data",
        "Convert2DArrayToCSV",
        "jsonObject",
        "csv_rows",
        "fs",
        "csv_filename",
        "csv_rows",
        "casper",
        "current_url",
        "pathArray",
        "pathArray",
        "host_url",
        "protocol",
        "host",
        "host_url",
        "search_term",
        "casper",
        "host_url",
        "casper",
        "pager_links",
        "pager_links",
        "pager_links",
        "pager_links",
        "pager_links",
        "last_page_id",
        "last_page_id",
        "index",
        "index",
        "last_page_id",
        "index",
        "index",
        "pager_links",
        "index",
        "catalog_urls",
        "host_url",
        "pager_links",
        "index",
        "parseCatalogPage",
        "index",
        "index",
        "catalog_urls",
        "index",
        "parseCatalogPage",
        "catalog_urls",
        "index",
        "casper"
    ],
    "literals": [
        "'日月光'",
        "''",
        "\"fs\"",
        "'申報時段'",
        "'廢棄物名稱'",
        "'廢棄物清理方式'",
        "'產出申報量'",
        "'單位'",
        "'申報狀態'",
        "\"/tmp/scrape_file_\"",
        "'_'",
        "\".csv\"",
        "'w'",
        "\"casper\"",
        "'Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/29.0.1547.2 Safari/537.36'",
        "\"remote.message\"",
        "\"remote console.log: \"",
        "'object'",
        "''",
        "''",
        "''",
        "','",
        "'\"\"'",
        "'\"'",
        "'\"'",
        "'\\r\\n'",
        "'undefined'",
        "''",
        "''",
        "'Opened location: '",
        "'.data_td a'",
        "'href'",
        "\"Number of factory pages: \"",
        "'Factory Page '",
        "': '",
        "'\\n'",
        "'#divNavibar_Data a'",
        "'/tmp/factory_'",
        "'.png'",
        "'#divLatestReport div.wasHead.textCenter.polHead + table > tbody > tr'",
        "'a'",
        "\"http://prtr.epa.gov.tw/FacilityInfo/Data?search=False\"",
        "'/'",
        "'//'",
        "'input#txtKeyword'",
        "'button#btnSearch'",
        "\"#divNote\"",
        "'HOST URL '",
        "'/tmp/custom-capture_'",
        "'.png'",
        "\"Search failed\"",
        "'.pager .pagination a'",
        "'href'",
        "\"Last Page ID: \"",
        "\"Number of additional catalog pages: \"",
        "'Catalog Page '",
        "': '"
    ],
    "variables": [
        "search_term",
        "catalog_urls",
        "factory_urls",
        "host_url",
        "fs",
        "csv_fields",
        "timestamp",
        "csv_filename",
        "casper",
        "array",
        "i",
        "line",
        "factory_links",
        "tr_data",
        "nodes",
        "processed_table_rows",
        "jsonObject",
        "csv_rows",
        "current_url",
        "pathArray",
        "protocol",
        "host",
        "pager_links",
        "last_page_id",
        "last_page_id",
        "last_page_id"
    ],
    "comments": [
        "---------------------- Script Var Setup -----------------",
        "---------------------- Functions to be referenced -----------------",
        "clear links",
        "Get list of \"factory\" links to relevant pages.",
        "Open each \"factory\" link",
        "open that link",
        "display the title of page",
        "Click button to display the portion with the table we need (probably not necessary)",
        "Save data to spreadsheet",
        "var sample = this.getElementsAttribute('#divLatestReport > div:nth-child(3) > table > tbody > tr', 'cells');",
        "this.echo(' !-! ' + JSON.stringify(sample));",
        "Get table rows",
        "var nodes = document.querySelectorAll('#divLatestReport > div:nth-child(3) > table > tbody > tr');",
        "if (tr.children.length != 6) {",
        "return null; // skip",
        "}",
        "Parse all table rows for text and save",
        "make sure tr_data object isnt null",
        "Remove the first row, it contains the legend, which should be already in the csv file.",
        "Convert rows to csv format",
        "Write CSV rows to file",
        "break; // enable for testing so that we only sample one factory page per catalog page",
        "---------------------- Start of Script -----------------",
        "get base url of current page -- needs to be added to links as links on pages are relative-pathed.",
        "fill the search \"form\" and submit it",
        "Wait until the ndivNote div appears, this only appears if results have been retrieved.",
        "Results didnt load within time limit - currently 60,000 ms",
        "Get count of catalog pages",
        "Get second to last link",
        "Will this ever happen?",
        "Parse initial catalog page for factory page links, open them, then parse them.",
        "Do the same for any additional catalog pages"
    ],
    "docstrings": [
        "*  Script to retrieve pollution data on factories in Taiwan.\n *"
    ],
    "functions": [
        "Convert2DArrayToCSV",
        "parseCatalogPage"
    ],
    "classes": []
}