{
    "identifiers": [
        "sqlalchemy",
        "sa",
        "alembic",
        "op",
        "op",
        "create_index",
        "sa",
        "text",
        "unique",
        "if_not_exists",
        "op",
        "drop_index",
        "table_name",
        "op",
        "drop_index",
        "table_name",
        "op",
        "create_index",
        "sa",
        "text",
        "unique"
    ],
    "literals": [
        "\"fd04e56b249e\"",
        "\"3689b813fe22\"",
        "\"idx_email_primary_unique_email_lower\"",
        "\"emails\"",
        "\"lower(primary_email)\"",
        "\"idx_email_primary_email_lower\"",
        "\"emails\"",
        "\"idx_email_primary_unique_email_lower\"",
        "\"emails\"",
        "\"idx_email_primary_email_lower\"",
        "\"emails\"",
        "\"lower(primary_email::text)\""
    ],
    "variables": [
        "revision",
        "down_revision",
        "branch_labels",
        "depends_on"
    ],
    "comments": [
        "pylint: disable=no-member invalid-name",
        "no-member is triggered by alembic.op, which has dynamically added functions",
        "invalid-name is triggered by migration file names with a date prefix",
        "invalid-name is triggered by top-level alembic constants like revision instead of REVISION",
        "revision identifiers, used by Alembic.",
        "pragma: allowlist secret",
        "pragma: allowlist secret",
        "In STAGE/PROD we have both the indexes `idx_email_primary_email_lower` and",
        "`idx_email_primary_unique_email_lower`.",
        "The goal of this migration is to align the code base with STAGE/PROD.",
        "We only keep `idx_email_primary_unique_email_lower`.",
        "This migration will:",
        "- create it if not exist (DEV)",
        "- drop the `idx_email_primary_email_lower` (without uniqueness)",
        "### commands auto generated by Alembic - please adjust! ###",
        "### end Alembic commands ###"
    ],
    "docstrings": [
        "\"\"\"Add uniqueness to index\n\nRevision ID: fd04e56b249e\nRevises: 3689b813fe22\nCreate Date: 2024-10-08 12:30:13.902342\n\n\"\"\""
    ],
    "functions": [
        "upgrade",
        "downgrade"
    ],
    "classes": []
}