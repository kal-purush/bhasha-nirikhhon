{
    "identifiers": [
        "os",
        "matplotlib",
        "pyplot",
        "plt",
        "matplotlib",
        "gridspec",
        "GridSpec",
        "numpy",
        "np",
        "scipy",
        "signal",
        "ss",
        "scipy",
        "stats",
        "st",
        "h5py",
        "mpi4py",
        "MPI",
        "neuron",
        "LFPy",
        "NetworkCell",
        "Network",
        "Synapse",
        "RecExtElectrode",
        "CurrentDipoleMoment",
        "MPI",
        "COMM_WORLD",
        "COMM",
        "Get_size",
        "COMM",
        "Get_rank",
        "np",
        "random",
        "seed",
        "GLOBALSEED",
        "RANK",
        "ax",
        "lines",
        "loc",
        "spine",
        "ax",
        "spines",
        "items",
        "loc",
        "lines",
        "spine",
        "set_color",
        "ax",
        "xaxis",
        "set_ticks_position",
        "ax",
        "yaxis",
        "set_ticks_position",
        "ax",
        "data",
        "dt",
        "T",
        "scaling_factor",
        "vlimround",
        "label",
        "scalebar",
        "unit",
        "ylabels",
        "color",
        "ztransform",
        "filter_data",
        "filterargs",
        "N",
        "Wn",
        "btype",
        "np",
        "arange",
        "data",
        "shape",
        "dt",
        "tvec",
        "T",
        "tvec",
        "T",
        "filter_data",
        "ss",
        "butter",
        "filterargs",
        "ss",
        "filtfilt",
        "b",
        "a",
        "data",
        "axis",
        "ztransform",
        "data",
        "T",
        "data",
        "mean",
        "axis",
        "dataT",
        "T",
        "np",
        "arange",
        "data",
        "shape",
        "abs",
        "data",
        "tinds",
        "max",
        "vlimround",
        "np",
        "round",
        "np",
        "log2",
        "vlim",
        "scaling_factor",
        "i",
        "z",
        "zvec",
        "i",
        "ax",
        "plot",
        "tvec",
        "tinds",
        "data",
        "i",
        "tinds",
        "vlimround",
        "z",
        "lw",
        "rasterized",
        "label",
        "label",
        "clip_on",
        "color",
        "color",
        "ax",
        "plot",
        "tvec",
        "tinds",
        "data",
        "i",
        "tinds",
        "vlimround",
        "z",
        "lw",
        "rasterized",
        "clip_on",
        "color",
        "color",
        "yticklabels",
        "append",
        "i",
        "yticks",
        "append",
        "z",
        "scalebar",
        "ax",
        "plot",
        "tvec",
        "tvec",
        "lw",
        "color",
        "clip_on",
        "ax",
        "text",
        "tvec",
        "np",
        "diff",
        "T",
        "format",
        "np",
        "log2",
        "vlimround",
        "format",
        "unit",
        "color",
        "rotation",
        "va",
        "ax",
        "axis",
        "ax",
        "axis",
        "ax",
        "yaxis",
        "set_ticks",
        "yticks",
        "ylabels",
        "ax",
        "yaxis",
        "set_ticklabels",
        "yticklabels",
        "ax",
        "set_ylabel",
        "labelpad",
        "ax",
        "yaxis",
        "set_ticklabels",
        "remove_axis_junk",
        "ax",
        "lines",
        "ax",
        "set_xlabel",
        "labelpad",
        "vlimround",
        "morphology",
        "templatefile",
        "templatename",
        "templateargs",
        "delete_sections",
        "dt",
        "tstop",
        "Cell",
        "NetworkCell",
        "cell_args",
        "cellParameters",
        "pop_args",
        "radius",
        "loc",
        "scale",
        "rotation_args",
        "x",
        "y",
        "dt",
        "tstop",
        "v_init",
        "celsius",
        "OUTPUTPATH",
        "OUTPUTPATH",
        "x",
        "np",
        "array",
        "y",
        "np",
        "array",
        "z",
        "np",
        "zeros",
        "N",
        "np",
        "array",
        "_",
        "r",
        "n",
        "sigma",
        "method",
        "rec_pop_contributions",
        "to_memory",
        "to_file",
        "neuron",
        "h",
        "Exp2Syn",
        "tau1",
        "tau2",
        "e",
        "tau1",
        "tau2",
        "e",
        "tau1",
        "tau2",
        "e",
        "tau1",
        "tau2",
        "e",
        "np",
        "random",
        "normal",
        "loc",
        "scale",
        "loc",
        "scale",
        "loc",
        "scale",
        "loc",
        "scale",
        "np",
        "random",
        "normal",
        "loc",
        "scale",
        "loc",
        "scale",
        "loc",
        "scale",
        "loc",
        "scale",
        "np",
        "random",
        "normal",
        "loc",
        "scale",
        "loc",
        "scale",
        "loc",
        "scale",
        "loc",
        "scale",
        "section",
        "fun",
        "st",
        "norm",
        "st",
        "norm",
        "funargs",
        "loc",
        "scale",
        "loc",
        "scale",
        "funweights",
        "_",
        "section",
        "fun",
        "st",
        "norm",
        "st",
        "norm",
        "funargs",
        "loc",
        "scale",
        "loc",
        "scale",
        "funweights",
        "_",
        "RANK",
        "os",
        "path",
        "isdir",
        "OUTPUTPATH",
        "os",
        "mkdir",
        "OUTPUTPATH",
        "fname",
        "os",
        "listdir",
        "OUTPUTPATH",
        "os",
        "unlink",
        "os",
        "path",
        "join",
        "OUTPUTPATH",
        "fname",
        "COMM",
        "Barrier",
        "Network",
        "networkParameters",
        "name",
        "size",
        "population_names",
        "population_sizes",
        "network",
        "create_population",
        "name",
        "name",
        "POP_SIZE",
        "size",
        "populationParameters",
        "i",
        "pre",
        "population_names",
        "j",
        "post",
        "population_names",
        "network",
        "get_connectivity_rand",
        "pre",
        "pre",
        "post",
        "post",
        "connprob",
        "connectionProbability",
        "i",
        "j",
        "network",
        "connect",
        "pre",
        "pre",
        "post",
        "post",
        "connectivity",
        "connectivity",
        "syntype",
        "synapseModel",
        "synparams",
        "synapseParameters",
        "i",
        "j",
        "weightfun",
        "weightFunction",
        "weightargs",
        "weightArguments",
        "i",
        "j",
        "minweight",
        "minweight",
        "delayfun",
        "delayFunction",
        "delayargs",
        "delayArguments",
        "i",
        "j",
        "mindelay",
        "mindelay",
        "multapsefun",
        "multapseFunction",
        "multapseargs",
        "multapseArguments",
        "i",
        "j",
        "syn_pos_args",
        "synapsePositionArguments",
        "i",
        "j",
        "save_connections",
        "RecExtElectrode",
        "cell",
        "electrodeParameters",
        "electrode",
        "probe",
        "set_current_pulses",
        "n_pulses",
        "biphasic",
        "width1",
        "amp1",
        "dt",
        "network",
        "dt",
        "t_stop",
        "network",
        "tstop",
        "interpulse",
        "el_id",
        "stim_elec",
        "t_start",
        "network",
        "enable_extracellular_stimulation",
        "electrode",
        "t_ext",
        "n",
        "CurrentDipoleMoment",
        "cell",
        "network",
        "simulate",
        "probes",
        "electrode",
        "current_dipole_moment",
        "networkSimulationArguments",
        "RANK",
        "i",
        "name",
        "population_names",
        "j",
        "cell",
        "network",
        "populations",
        "name",
        "cells",
        "j",
        "cell",
        "somav",
        "np",
        "vstack",
        "somavs_pop",
        "cell",
        "somav",
        "RANK",
        "j",
        "SIZE",
        "COMM",
        "recv",
        "source",
        "j",
        "tag",
        "somavs_pop",
        "recv",
        "recv",
        "recv",
        "np",
        "vstack",
        "somavs_pop",
        "recv",
        "somavs_pop",
        "ndim",
        "somavs_pop",
        "reshape",
        "somavs",
        "append",
        "somavs_pop",
        "COMM",
        "send",
        "somavs_pop",
        "dest",
        "tag",
        "somavs_pop",
        "RANK",
        "plt",
        "subplots",
        "name",
        "spts",
        "gids",
        "population_names",
        "SPIKES",
        "SPIKES",
        "spt",
        "gid",
        "spts",
        "gids",
        "np",
        "r_",
        "t",
        "spt",
        "np",
        "r_",
        "g",
        "np",
        "zeros",
        "spt",
        "size",
        "gid",
        "ax",
        "plot",
        "t",
        "t",
        "g",
        "t",
        "ms",
        "label",
        "name",
        "ax",
        "legend",
        "loc",
        "remove_axis_junk",
        "ax",
        "lines",
        "ax",
        "set_xlabel",
        "ax",
        "set_ylabel",
        "ax",
        "set_title",
        "fig",
        "savefig",
        "os",
        "path",
        "join",
        "OUTPUTPATH",
        "bbox_inches",
        "plt",
        "close",
        "fig",
        "plt",
        "figure",
        "GridSpec",
        "fig",
        "add_subplot",
        "gs",
        "somavs",
        "shape",
        "ss",
        "decimate",
        "somavs",
        "q",
        "axis",
        "zero_phase",
        "ss",
        "decimate",
        "somavs",
        "q",
        "axis",
        "zero_phase",
        "draw_lineplot",
        "ax",
        "somavs_pop",
        "dt",
        "network",
        "dt",
        "T",
        "scaling_factor",
        "vlimround",
        "label",
        "scalebar",
        "unit",
        "ylabels",
        "color",
        "ztransform",
        "ax",
        "set_yticks",
        "ax",
        "set_xticklabels",
        "ax",
        "set_ylabel",
        "ax",
        "set_title",
        "ax",
        "set_xlabel",
        "fig",
        "add_subplot",
        "gs",
        "somavs",
        "shape",
        "ss",
        "decimate",
        "somavs",
        "q",
        "axis",
        "zero_phase",
        "ss",
        "decimate",
        "somavs",
        "q",
        "axis",
        "zero_phase",
        "draw_lineplot",
        "ax",
        "somavs_pop",
        "dt",
        "network",
        "dt",
        "T",
        "scaling_factor",
        "vlimround",
        "label",
        "scalebar",
        "unit",
        "ylabels",
        "color",
        "ztransform",
        "ax",
        "set_yticks",
        "ax",
        "set_ylabel",
        "fig",
        "savefig",
        "os",
        "path",
        "join",
        "OUTPUTPATH",
        "bbox_inches",
        "plt",
        "close",
        "fig",
        "plt",
        "subplots",
        "figsize",
        "fig",
        "suptitle",
        "i",
        "ax",
        "name",
        "label",
        "axes",
        "h5py",
        "File",
        "os",
        "path",
        "join",
        "OUTPUTPATH",
        "f",
        "draw_lineplot",
        "ax",
        "ss",
        "decimate",
        "f",
        "name",
        "q",
        "zero_phase",
        "dt",
        "network",
        "dt",
        "T",
        "scaling_factor",
        "vlimround",
        "label",
        "label",
        "scalebar",
        "unit",
        "ylabels",
        "i",
        "color",
        "format",
        "i",
        "ztransform",
        "ax",
        "set_title",
        "label",
        "fig",
        "savefig",
        "os",
        "path",
        "join",
        "OUTPUTPATH",
        "bbox_inches",
        "plt",
        "close",
        "fig",
        "network",
        "pc",
        "gid_clear",
        "population",
        "network",
        "populations",
        "values",
        "cell",
        "population",
        "cells",
        "cell",
        "__del__",
        "neuron",
        "h"
    ],
    "literals": [
        "'right'",
        "'top'",
        "'none'",
        "'bottom'",
        "'left'",
        "'local'",
        "'mV'",
        "'r'",
        "'lowpass'",
        "'ch. %i'",
        "'k'",
        "'$2^{'",
        "'{}'",
        "'}$ '",
        "'{0}'",
        "'k'",
        "'vertical'",
        "'center'",
        "'tight'",
        "'channel'",
        "'right'",
        "'top'",
        "r't (ms)'",
        "'example_network_stim_output'",
        "'BallAndStick.hoc'",
        "'BallAndStickTemplate.hoc'",
        "'BallAndStickTemplate'",
        "\"linesource\"",
        "'E'",
        "'I'",
        "'soma'",
        "'apic'",
        "'soma'",
        "'apic'",
        "'__main__'",
        "'times'",
        "'gids'",
        "'.'",
        "'right'",
        "'top'",
        "'t (ms)'",
        "'gid'",
        "'spike raster'",
        "'spike_raster.pdf'",
        "'tight'",
        "'E'",
        "'mV'",
        "'C0'",
        "'E'",
        "'somatic potentials'",
        "''",
        "'I'",
        "'mV'",
        "'C1'",
        "'I'",
        "'soma_potentials.pdf'",
        "'tight'",
        "'extracellular potentials'",
        "'E'",
        "'I'",
        "'imem'",
        "'E'",
        "'I'",
        "'sum'",
        "'OUTPUT.h5'",
        "'r'",
        "'RecExtElectrode0'",
        "'mV'",
        "'C{}'",
        "'extracellular_potential.pdf'",
        "'tight'",
        "'forall delete_section()'"
    ],
    "variables": [
        "COMM",
        "SIZE",
        "RANK",
        "GLOBALSEED",
        "tvec",
        "tinds",
        "b",
        "a",
        "data",
        "dataT",
        "data",
        "zvec",
        "vlim",
        "vlimround",
        "yticklabels",
        "yticks",
        "OUTPUTPATH",
        "cellParameters",
        "populationParameters",
        "networkParameters",
        "electrodeParameters",
        "networkSimulationArguments",
        "population_names",
        "population_sizes",
        "connectionProbability",
        "synapseModel",
        "synapseParameters",
        "weightFunction",
        "weightArguments",
        "minweight",
        "delayFunction",
        "delayArguments",
        "mindelay",
        "multapseFunction",
        "multapseArguments",
        "synapsePositionArguments",
        "network",
        "connectivity",
        "conncount",
        "syncount",
        "electrode",
        "stim_elec",
        "I_stim",
        "t_ext",
        "current_dipole_moment",
        "SPIKES",
        "somavs",
        "somavs_pop",
        "somavs_pop",
        "somavs_pop",
        "recv",
        "somavs_pop",
        "somavs_pop",
        "somavs_pop",
        "fig",
        "ax",
        "t",
        "g",
        "t",
        "g",
        "fig",
        "gs",
        "ax",
        "somavs_pop",
        "somavs_pop",
        "ax",
        "somavs_pop",
        "somavs_pop",
        "fig",
        "axes",
        "electrode",
        "syn",
        "synapseModel",
        "cell",
        "population",
        "cells",
        "population",
        "pop",
        "network"
    ],
    "comments": [
        "!/usr/bin/env python",
        "-*- coding: utf-8 -*-",
        "import modules:",
        "set up MPI variables:",
        "avoid same sequence of random numbers from numpy and neuron on each RANK,",
        "e.g., in order to draw unique cell and synapse locations and random synapse",
        "activation times",
        "",
        "Function declarations",
        "",
        "apply temporal filter",
        "subtract mean in each channel",
        "",
        "Set up shared and population-specific parameters",
        "",
        "relative path for simulation output:",
        "class NetworkCell parameters:",
        "class NetworkPopulation parameters:",
        "class Network parameters:",
        "class RecExtElectrode parameters:",
        "5um radius",
        "nb of discrete point used to compute the potential",
        "conductivity S/m",
        "method Network.simulate() parameters:",
        "population names, sizes and connection probability:",
        "synapse model. All corresponding parameters for weights,",
        "connection delays, multapses and layerwise positions are",
        "set up as shape (2, 2) nested lists for each possible",
        "connection on the form:",
        "[[\"E:E\", \"E:I\"],",
        "[\"I:E\", \"I:I\"]].",
        "synapse parameters",
        "synapse max. conductance (function, mean, st.dev., min.):",
        "conduction delay (function, mean, st.dev., min.):",
        "method NetworkCell.get_rand_idx_area_and_distribution_norm",
        "parameters for layerwise synapse positions:",
        "",
        "Main simulation",
        "",
        "create directory for output:",
        "remove old simulation output if directory exist",
        "instantiate Network:",
        "create E and I populations:",
        "create connectivity matrices and connect populations:",
        "boolean connectivity matrix between pre- and post-synaptic",
        "neurons in each population (postsynaptic on this RANK)",
        "connect network:",
        "set up extracellular recording device.",
        "Here `cell` is set to None as handles to cell geometry is handled",
        "internally",
        "width2=width1, amp2=-amp1",
        "nA",
        "set up recording of current dipole moments. Ditto with regards to",
        "`cell` being set to None",
        "run simulation:",
        "collect somatic potentials across all RANKs to RANK 0:",
        "avoid undeclared variable",
        "",
        "Plot some output on RANK 0",
        "",
        "spike raster",
        "somatic potentials",
        "extracellular potentials, E and I contributions, sum",
        "",
        "customary cleanup of object references - the psection() function may not",
        "write correct information if NEURON still has object references in memory",
        "even if Python references has been deleted. It will also allow the script",
        "to be run in successive fashion.",
        "",
        "allows assigning new gids to threads"
    ],
    "docstrings": [
        "\"\"\"Demonstrate extracellular electric stimulation of a LFPy.Network instance,\nusing the LFPy.Network.enable_extracellular_stimulation() method.\n\nHere a simple model of neuron ball-and-stick is used to populate two\nmorphologies with active HH channels inserted in the somas and passive-leak\nchannels distributed throughout the apical dendrite. The corresponding\nmorphology and template specifications are in the files BallAndStick.hoc and\nBallAndStickTemplate.hoc.\n\nSame as example_network_to_file.py, except that a stimulating current is\napplied instead of background Poisson activity.\n\nExecution (w. MPI):\n\n    mpirun python example_network_stim.py\n\nCopyright (C) 2021 Computational Neuroscience Group, NMBU.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\n\"\"\"",
        "\"\"\"remove chosen lines from plotting axis\"\"\"",
        "\"\"\"helper function to draw line plots\"\"\""
    ],
    "functions": [
        "remove_axis_junk",
        "draw_lineplot"
    ],
    "classes": []
}