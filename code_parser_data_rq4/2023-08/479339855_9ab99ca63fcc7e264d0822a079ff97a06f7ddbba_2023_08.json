{
    "identifiers": [
        "Net",
        "Http",
        "Threading",
        "Tasks",
        "Microsoft",
        "Azure",
        "WebJobs",
        "Microsoft",
        "Azure",
        "WebJobs",
        "Extensions",
        "DurableTask",
        "Microsoft",
        "Azure",
        "WebJobs",
        "Extensions",
        "Http",
        "Microsoft",
        "Extensions",
        "Logging",
        "Newtonsoft",
        "Json",
        "Linq",
        "Linq",
        "Newtonsoft",
        "Json",
        "Collections",
        "Generic",
        "FHIRBulkImport",
        "Utils",
        "GetIntEnvironmentVariable",
        "Utils",
        "GetEnvironmentVariable",
        "Utils",
        "GetIntEnvironmentVariable",
        "RetryOptions",
        "firstRetryInterval",
        "TimeSpan",
        "FromSeconds",
        "maxNumberOfAttempts",
        "BackoffCoefficient",
        "FunctionName",
        "nameof",
        "ExportAll_RunOrchestrator",
        "JObject",
        "OrchestrationTrigger",
        "IDurableOrchestrationContext",
        "context",
        "ILogger",
        "logger",
        "JObject",
        "retVal",
        "context",
        "InstanceId",
        "context",
        "GetInput",
        "requestParameters",
        "JObject",
        "Parse",
        "inputs",
        "JsonReaderException",
        "jre",
        "retVal",
        "jre",
        "Message",
        "logger",
        "LogError",
        "retVal",
        "requestParameters",
        "resourceType",
        "retVal",
        "retVal",
        "requestParameters",
        "requestParameters",
        "sinceStr",
        "TryParse",
        "sinceStr",
        "since",
        "tillStr",
        "TryParse",
        "tillStr",
        "till",
        "sinceStr",
        "Empty",
        "tillStr",
        "Empty",
        "retVal",
        "message",
        "logger",
        "LogError",
        "message",
        "retVal",
        "requestParameters",
        "baseAddress",
        "baseAddress",
        "Empty",
        "baseAddress",
        "EndsWith",
        "baseAddress",
        "baseAddress",
        "requestParameters",
        "retVal",
        "context",
        "CurrentUtcDateTime",
        "context",
        "SetCustomStatus",
        "retVal",
        "baseAddress",
        "resourceType",
        "_exportResourceCount",
        "since",
        "nextLink",
        "since",
        "ToString",
        "till",
        "nextLink",
        "till",
        "ToString",
        "nextLink",
        "logger",
        "LogInformation",
        "nextLink",
        "context",
        "CallActivityWithRetryAsync",
        "DataPageResult",
        "nameof",
        "ExportAllOrchestrator_GetAndWriteDataPage",
        "_exportAllRetryOptions",
        "DataPageRequest",
        "FhirRequestPath",
        "nextLink",
        "InstanceId",
        "context",
        "InstanceId",
        "ResourceType",
        "resourceType",
        "Audience",
        "audience",
        "fhirResult",
        "ResourceCount",
        "retVal",
        "nextLink",
        "fileTracker",
        "ContainsKey",
        "fhirResult",
        "BlobUrl",
        "fileTracker",
        "fhirResult",
        "BlobUrl",
        "fileTracker",
        "fhirResult",
        "BlobUrl",
        "fhirResult",
        "ResourceCount",
        "fileTracker",
        "fhirResult",
        "BlobUrl",
        "fhirResult",
        "ResourceCount",
        "nextLink",
        "fhirResult",
        "NextLink",
        "retVal",
        "JArray",
        "item",
        "fileTracker",
        "JObject",
        "fileInfo",
        "resourceType",
        "fileInfo",
        "item",
        "Key",
        "fileInfo",
        "item",
        "Value",
        "JArray",
        "retVal",
        "Add",
        "fileInfo",
        "retVal",
        "fileTracker",
        "Keys",
        "Count",
        "retVal",
        "fileTracker",
        "Values",
        "Sum",
        "context",
        "SetCustomStatus",
        "retVal",
        "retVal",
        "context",
        "CurrentUtcDateTime",
        "context",
        "CallActivityAsync",
        "nameof",
        "ExportAllOrchestrator_WriteCompletionStatusToBlob",
        "WriteCompletionStatusRequest",
        "context",
        "InstanceId",
        "retVal",
        "JObject",
        "completedStatus",
        "context",
        "SetCustomStatus",
        "completedStatus",
        "logger",
        "LogInformation",
        "context",
        "InstanceId",
        "retVal",
        "FunctionName",
        "nameof",
        "ExportAllOrchestrator_GetAndWriteDataPage",
        "DataPageResult",
        "ActivityTrigger",
        "DataPageRequest",
        "req",
        "DurableClient",
        "IDurableEntityClient",
        "ec",
        "ILogger",
        "logger",
        "FHIRUtils",
        "CallFHIRServer",
        "req",
        "FhirRequestPath",
        "HttpMethod",
        "Get",
        "logger",
        "req",
        "Audience",
        "response",
        "Success",
        "IsNullOrEmpty",
        "response",
        "Content",
        "JObject",
        "Parse",
        "response",
        "Content",
        "result",
        "FirstOrDefault",
        "link",
        "nextLinkObject",
        "nextLinkObject",
        "Value",
        "ExportOrchestrator",
        "ConvertToNDJSON",
        "result",
        "req",
        "InstanceId",
        "req",
        "ResourceType",
        "ec",
        "logger",
        "ndjsonResult",
        "logger",
        "LogInformation",
        "response",
        "Status",
        "nextLinkUrl",
        "ndjsonResult",
        "Value",
        "ResourceCount",
        "DataPageResult",
        "nextLinkUrl",
        "ndjsonResult",
        "Value",
        "ResourceCount",
        "ndjsonResult",
        "Value",
        "BlobUrl",
        "response",
        "Status",
        "response",
        "Content",
        "req",
        "FhirRequestPath",
        "logger",
        "LogError",
        "message",
        "message",
        "FunctionName",
        "nameof",
        "ExportAllOrchestrator_HttpStart",
        "HttpResponseMessage",
        "HttpTrigger",
        "AuthorizationLevel",
        "Route",
        "HttpRequestMessage",
        "req",
        "DurableClient",
        "IDurableOrchestrationClient",
        "starter",
        "ILogger",
        "log",
        "req",
        "Content",
        "ReadAsStringAsync",
        "ExportOrchestrator",
        "runningInstances",
        "starter",
        "log",
        "state",
        "Count",
        "_maxInstances",
        "running",
        "_maxInstances",
        "running",
        "_maxInstances",
        "StringContent",
        "msg",
        "HttpResponseMessage",
        "Content",
        "sc",
        "StatusCode",
        "Net",
        "HttpStatusCode",
        "TooManyRequests",
        "starter",
        "StartNewAsync",
        "nameof",
        "ExportAll_RunOrchestrator",
        "requestParameters",
        "log",
        "LogInformation",
        "instanceId",
        "starter",
        "CreateCheckStatusResponse",
        "req",
        "instanceId",
        "FunctionName",
        "nameof",
        "ExportAllOrchestrator_WriteCompletionStatusToBlob",
        "ActivityTrigger",
        "WriteCompletionStatusRequest",
        "req",
        "ILogger",
        "log",
        "StorageUtils",
        "GetCloudBlobClient",
        "_storageAccount",
        "StorageUtils",
        "WriteStringToBlob",
        "blobClient",
        "req",
        "InstanceId",
        "req",
        "StatusObject",
        "ToString",
        "log",
        "DataPageRequest",
        "FhirRequestPath",
        "InstanceId",
        "ResourceType",
        "Audience",
        "DataPageResult",
        "NextLink",
        "ResourceCount",
        "BlobUrl",
        "ErrorMessage",
        "ResultUpdateRequest",
        "InstanceId",
        "ResourceType",
        "ResourceCount",
        "NextLink",
        "WriteCompletionStatusRequest",
        "InstanceId",
        "JObject",
        "StatusObject"
    ],
    "literals": [
        "\"FS-EXPORTRESOURCECOUNT\"",
        "\"1000\"",
        "\"FBI-STORAGEACCT\"",
        "\"FBI-MAXEXPORTS\"",
        "\"0\"",
        "\"instanceid\"",
        "\"error\"",
        "\"ExportOrchestrator: Not a valid JSON Object from starter input\"",
        "\"_type\"",
        "\"error\"",
        "\"resourceType is empty\"",
        "\"_since\"",
        "\"_till\"",
        "\"error\"",
        "\"_baseAddress\"",
        "\"/\"",
        "\"_audience\"",
        "\"exportStarted\"",
        "\"o\"",
        "\"o\"",
        "\"error\"",
        "\"output\"",
        "\"type\"",
        "\"url\"",
        "\"count\"",
        "\"output\"",
        "\"exportFilesCompleted\"",
        "\"exportResourceCount\"",
        "\"exportCompleted\"",
        "\"status\"",
        "\"Success\"",
        "\"\"",
        "\"link\"",
        "\"relation\"",
        "\"next\"",
        "\"url\"",
        "\"ndjsonResult is null unexpectedly\"",
        "\"post\"",
        "\"$alt-export-all\"",
        "\"{\\\"error\\\":\\\"\"",
        "\"\\\"\"",
        "\"_completed_run.json\""
    ],
    "variables": [
        "_exportResourceCount",
        "_storageAccount",
        "_maxInstances",
        "RetryOptions",
        "_exportAllRetryOptions",
        "JObject",
        "retVal",
        "inputs",
        "fileTracker",
        "JObject",
        "requestParameters",
        "resourceType",
        "sinceStr",
        "tillStr",
        "since",
        "till",
        "message",
        "baseAddress",
        "audience",
        "nextLink",
        "DataPageResult",
        "fhirResult",
        "fileInfo",
        "completedStatus",
        "response",
        "result",
        "nextLinkObject",
        "nextLinkUrl",
        "ndjsonResult",
        "message",
        "requestParameters",
        "state",
        "running",
        "msg",
        "StringContent",
        "sc",
        "instanceId",
        "blobClient"
    ],
    "comments": [
        "Setup function level variables.",
        "Get the input from the request to the function.",
        "We only allow execution for a certain resource type.",
        "Get and validate the time range for the export if given.",
        "Signal function start in the durable task status object.",
        "Setup our first execution query to get the given resource with the configured page size.",
        "Add custom date range if given.",
        "Loop until no continuation token is returned.",
        "Keep track of how many files we export and the number of resources per file.",
        "Subsequent executions will use the continuation token.",
        "Attempt to add output array - untested.",
        "Update durable function status",
        "Report completed export",
        "Save the status in blob storage next to the exported files.",
        "Remove details from the custom status to avoid payload bloat / duplication.",
        "Parse the content and try to find the continuation token.",
        "Write bundle resources to NDJSON using the file manager - this will prevent many small files.",
        "Placeholder in case any issues are found writing to NDJSON.",
        "Function input comes from the request content."
    ],
    "docstrings": [],
    "functions": [
        "ExportAll_RunOrchestrator",
        "ExportAllOrchestrator_GetAndWriteDataPage",
        "ExportAllOrchestrator_HttpStart",
        "ExportAllOrchestrator_WriteCompletionStatusToBlob"
    ],
    "classes": [
        "ExportAllOrchestrator"
    ]
}