{
    "identifiers": [
        "argparse",
        "argparse",
        "ArgumentParser",
        "description",
        "parser",
        "add_argument",
        "help",
        "required",
        "parser",
        "add_argument",
        "help",
        "required",
        "parser",
        "add_argument",
        "help",
        "required",
        "action",
        "parser",
        "add_argument",
        "help",
        "nargs",
        "parser",
        "add_argument",
        "help",
        "nargs",
        "parser",
        "add_argument",
        "help",
        "nargs",
        "parser",
        "parse_args",
        "args",
        "verbose",
        "verbose",
        "requests",
        "shutil",
        "time",
        "os",
        "glob",
        "subprocess",
        "platform",
        "sys",
        "PIL",
        "Image",
        "PIL",
        "ImageDraw",
        "PIL",
        "ImageFont",
        "sys",
        "exit",
        "verbose",
        "args",
        "timer",
        "args",
        "skip",
        "args",
        "framerate",
        "args",
        "printer",
        "varFrameRate",
        "args",
        "camera",
        "varAppName",
        "verbose",
        "varPythonVersion",
        "platform",
        "python_version",
        "varPythonVersion",
        "platform",
        "python_version",
        "varPythonVersion",
        "verbose",
        "subprocess",
        "call",
        "stdout",
        "subprocess",
        "DEVNULL",
        "stderr",
        "subprocess",
        "DEVNULL",
        "sys",
        "exit",
        "verbose",
        "requests",
        "get",
        "varPrinterURL",
        "request",
        "status_code",
        "varPrinterURL",
        "sys",
        "exit",
        "verbose",
        "dir",
        "startswith",
        "vars",
        "varAppName",
        "verbose",
        "requests",
        "get",
        "varPrinterURL",
        "varMachineStatusURL",
        "printerStatus",
        "json",
        "printerStatus",
        "verbose",
        "zPosition",
        "printerStatus",
        "verbose",
        "printerStatus",
        "printerStatus",
        "printerStatus",
        "varPrintName",
        "requests",
        "get",
        "varPrinterURL",
        "varPrintNameURL",
        "varPrintName",
        "json",
        "varPrintName",
        "lower",
        "replace",
        "verbose",
        "varPrintName",
        "varLastZHeight",
        "zPosition",
        "verbose",
        "zPosition",
        "varImagesSkipped",
        "varSkipImages",
        "verbose",
        "subprocess",
        "call",
        "varffmpegImageCommand",
        "replace",
        "varImageCounter",
        "zfill",
        "split",
        "stdout",
        "subprocess",
        "DEVNULL",
        "stderr",
        "subprocess",
        "DEVNULL",
        "verbose",
        "Image",
        "open",
        "varImageCounter",
        "zfill",
        "thisImage",
        "size",
        "ImageDraw",
        "Draw",
        "thisImage",
        "ImageFont",
        "truetype",
        "size",
        "varImageText",
        "drawing",
        "textsize",
        "text",
        "font",
        "w",
        "text_w",
        "h",
        "text_h",
        "Image",
        "text_w",
        "text_h",
        "color",
        "ImageDraw",
        "Draw",
        "c_text",
        "drawing",
        "text",
        "text",
        "fill",
        "font",
        "font",
        "c_text",
        "putalpha",
        "thisImage",
        "paste",
        "c_text",
        "pos",
        "c_text",
        "thisImage",
        "save",
        "varImageCounter",
        "zfill",
        "varImageCounter",
        "verbose",
        "varImagesSkipped",
        "verbose",
        "varImagesSkipped",
        "varSkipImages",
        "printerStatus",
        "verbose",
        "varLastPrinterStatus",
        "verbose",
        "printerStatus",
        "verbose",
        "varffmpegCommand",
        "subprocess",
        "call",
        "varffmpegCommand",
        "split",
        "stdout",
        "subprocess",
        "DEVNULL",
        "stderr",
        "subprocess",
        "DEVNULL",
        "varPrintName",
        "replace",
        "time",
        "strftime",
        "time",
        "localtime",
        "verbose",
        "completeFileName",
        "shutil",
        "move",
        "completeFileName",
        "verbose",
        "glob",
        "glob",
        "file",
        "fileList",
        "verbose",
        "file",
        "os",
        "remove",
        "file",
        "file",
        "verbose",
        "varSleepTimer",
        "time",
        "sleep",
        "varSleepTimer",
        "KeyboardInterrupt"
    ],
    "literals": [
        "'Duet Monitor Capture v2 - www.dr-b.io'",
        "'-c'",
        "'--camera'",
        "'Input video source (EX: /dev/video0)'",
        "'-p'",
        "'--printer'",
        "'Printer URL or IP address (EX: http://192.168.1.30 or http://printer_network_name)'",
        "'-v'",
        "'--verbose'",
        "'Verbose output, useful for troubleshooting'",
        "'store_true'",
        "'-s'",
        "'--skip'",
        "'Skip first x images of printing proceess (useful to skip bed probing if enabled)'",
        "'?'",
        "'-t'",
        "'--timer'",
        "'Sleep timer between testing Z position (default 30 seconds)'",
        "'?'",
        "'-f'",
        "'--framerate'",
        "'FFMPEG video creation framerate (default .15 seconds)'",
        "'?'",
        "'Loading modules'",
        "'Python pillow is needed for this application, please install it and try again.'",
        "'Modules loaded'",
        "'Loading variables'",
        "'DMCv2'",
        "'3.7.3'",
        "'/rr_status?type=2'",
        "'/rr_fileinfo?type=1'",
        "''",
        "''",
        "''",
        "'ffmpeg -r 1/'",
        "' -i image-%015d.jpg -vcodec mpeg4 -y print.mp4'",
        "'ffmpeg -f video4linux2 -video_size 1920x1080 -i '",
        "' -f image2 -frames:v 3 -update 1 -y image-^.jpg'",
        "' - https://www.dr-b.io'",
        "'Variables loaded'",
        "'Testing python version'",
        "'WARNING: this process was developed using python '",
        "'You appear to be using pythong version '",
        "'Different versions may work but they may also cause issues.'",
        "'If you have trouble please upgrade python to at least '",
        "''",
        "''",
        "'Testing ffmpeg availability'",
        "'ffmpeg'",
        "'-version'",
        "'ffmpeg is required but could not be loaded!'",
        "'Please make sure ffmpeg is correctly installed on this system and the user running this process has access to it.'",
        "'Testing printer http availability'",
        "' offline, please verify URL and try again'",
        "''",
        "'Defined Variables:'",
        "'var'",
        "' = '",
        "''",
        "'Pre-tests complete, start processing'",
        "' started'",
        "'Press CTRL+C to exit'",
        "'Getting printer status'",
        "'coords'",
        "'xyz'",
        "'Z position: '",
        "'status'",
        "'Printer status: '",
        "'P'",
        "''",
        "'fileName'",
        "'.gcode'",
        "''",
        "'Print name: '",
        "'Z position changed'",
        "'Capturing image'",
        "'^'",
        "'Image captured, inserting watermark'",
        "'image-'",
        "'.jpg'",
        "\"/usr/share/fonts/truetype/freefont/FreeMonoBold.ttf\"",
        "'  '",
        "'  '",
        "'RGB'",
        "'#000000'",
        "\"#ffffff\"",
        "'image-'",
        "'.jpg'",
        "'Watermarked image saved'",
        "'Skipped '",
        "' of '",
        "' images'",
        "'I'",
        "'Printer is idle'",
        "'P'",
        "'Printer just completed a print job'",
        "'Creating video from still shots using ffmpeg'",
        "' '",
        "'_'",
        "'_'",
        "\"%Y_%m_%d_%H_%M_%S\"",
        "'.mp4'",
        "'Moving print.mp4 to '",
        "'print.mp4'",
        "'Getting a list of still images to delete'",
        "'image-*.jpg'",
        "'Deleting '",
        "'Error removing '",
        "''",
        "'Sleeping '",
        "' seconds'"
    ],
    "variables": [
        "parser",
        "args",
        "verbose",
        "varSleepTimer",
        "varSkipImages",
        "varImagesSkipped",
        "varFrameRate",
        "varPrinterURL",
        "varAppName",
        "varPythonVersion",
        "varMachineStatusURL",
        "varPrintNameURL",
        "varImageCounter",
        "varLastPrinterStatus",
        "varLastZHeight",
        "varPrintName",
        "varffmpegCommand",
        "varffmpegImageCommand",
        "varImageText",
        "request",
        "printerStatus",
        "printerStatus",
        "zPosition",
        "printerStatus",
        "varLastPrinterStatus",
        "varPrintName",
        "varPrintName",
        "varPrintName",
        "varLastZHeight",
        "thisImage",
        "w",
        "h",
        "drawing",
        "font",
        "text",
        "text_w",
        "text_h",
        "pos",
        "c_text",
        "drawing",
        "varLastPrinterStatus",
        "completeFileName",
        "fileList",
        "varPrintName",
        "varImageCounter",
        "varImagesSkipped"
    ],
    "comments": [
        "!/usr/bin/env python",
        "-*- coding: utf-8 -*-",
        "load up the argument parser",
        "add the arguments",
        "get the arguments",
        "import the needed modules",
        "pillow may not be installed",
        "define the variables that will be used, most variables are pretty descriptive",
        "see what version of python is on the system",
        "verify ffmpeg is installed and accessible",
        "if ffmpeg is installed this should not cause an error",
        "oops, ffmpeg could not be loaded. Alert the user!",
        "test the printer URL to make sure it is accessible",
        "list out the variables that are defined",
        "let the user know the process has started and tell them they can CTRL+C to exit",
        "try/except to catch the CTRL+C break and not output error/debugging information",
        "main loop to process things",
        "get the printer status",
        "save the JSON data",
        "extract the z coordinate",
        "extract the printer status",
        "see if we are printing",
        "save the last printer status",
        "if we dont already have a print filename get it",
        "get the file information",
        "get the JSON that has the filename",
        "extract the filename (and strip .gcode from the name)",
        "see if the z position has changed (to take a snapshot)",
        "save the last z position",
        "call ffmpeg to capture the image",
        "Store image width and height",
        "font = ImageFont.truetype('Roboto-Black.ttf', 50)",
        "get the text dimensions",
        "get a buffer around the text dimensions",
        "set a background color",
        "draw the text background",
        "set the text alpha",
        "put the text on the image",
        "save the image",
        "increment the image counter",
        "if the printer is idle",
        "and the last print status was printing (just completed a print)",
        "update the print status",
        "run ffmpeg to convert the still images to a video",
        "move (rename) the video to the correct filename and timestamp",
        "get the temporary still images created",
        "reset the print name to prepare for the next print",
        "reset the image counter",
        "sleep for a set time"
    ],
    "docstrings": [
        "\"\"\"dmc.py - \n   Duet (RepRap) Monitor Capture\n   - Capture still images from a webcam when the Z index changes\n   - Compile the still shots into a mp4 video upon print completion\"\"\""
    ],
    "functions": [],
    "classes": []
}