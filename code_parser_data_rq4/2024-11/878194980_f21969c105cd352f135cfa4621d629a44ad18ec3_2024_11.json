{
    "identifiers": [
        "Webhook",
        "headers",
        "WebhookEvent",
        "env",
        "UserSubscriptionTable",
        "createUserSubscription",
        "deleteUser",
        "req",
        "headers",
        "headerPayload",
        "headerPayload",
        "headerPayload",
        "svixId",
        "svixTimestamp",
        "svixSignature",
        "Response",
        "req",
        "payload",
        "Webhook",
        "env",
        "wh",
        "body",
        "svixId",
        "svixTimestamp",
        "svixSignature",
        "err",
        "err",
        "Response",
        "createUserSubscription",
        "deleteUser",
        "Response"
    ],
    "literals": [
        "'svix'",
        "'next/headers'",
        "'@clerk/nextjs/server'",
        "'@/data/env/server'",
        "'@/drizzle/schema'",
        "'@/server/db/subscription'",
        "'@/server/db/user'",
        "\"svix-id\"",
        "\"svix-timestamp\"",
        "\"svix-signature\"",
        "'Error occured -- no svix headers'",
        "'svix-id'",
        "'svix-timestamp'",
        "'svix-signature'",
        "'Error verifying webhook:'",
        "'Error occured'",
        "\"user.created\"",
        "'Free'",
        "\"user.deleted\"",
        "''"
    ],
    "variables": [
        "headerPayload",
        "svixId",
        "svixTimestamp",
        "svixSignature",
        "payload",
        "body",
        "wh"
    ],
    "comments": [
        "If there are no headers, error out",
        "Get the body",
        "Create a new Svix instance with your secret.",
        "Verify the payload with the headers",
        "const userSubscription = await getUserSubscription(event.data.id)",
        "if (userSubscription?.stripeSubscriptionId != null) {",
        "await stripe.subscriptions.cancel(",
        "userSubscription?.stripeSubscriptionId",
        ")",
        "}"
    ],
    "docstrings": [],
    "functions": [
        "POST"
    ],
    "classes": []
}