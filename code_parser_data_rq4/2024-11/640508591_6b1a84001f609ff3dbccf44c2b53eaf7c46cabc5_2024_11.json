{
    "identifiers": [
        "fastapi",
        "FastAPI",
        "UploadFile",
        "File",
        "fastapi",
        "responses",
        "JSONResponse",
        "Response",
        "cv2",
        "numpy",
        "np",
        "os",
        "datetime",
        "datetime",
        "deepface",
        "DeepFace",
        "retinaface",
        "RetinaFace",
        "io",
        "FastAPI",
        "os",
        "makedirs",
        "OUTPUT_DIR",
        "exist_ok",
        "img",
        "faces",
        "img",
        "copy",
        "face",
        "faces",
        "face",
        "facial_area",
        "facial_area",
        "facial_area",
        "facial_area",
        "cv2",
        "rectangle",
        "img_result",
        "x",
        "y",
        "x",
        "w",
        "y",
        "h",
        "OUTER_COLOR",
        "OUTER_THICKNESS",
        "cv2",
        "rectangle",
        "img_result",
        "x",
        "y",
        "x",
        "w",
        "y",
        "h",
        "INNER_COLOR",
        "INNER_THICKNESS",
        "face",
        "face",
        "confidence",
        "cv2",
        "FONT_HERSHEY_SIMPLEX",
        "text_width",
        "text_height",
        "cv2",
        "getTextSize",
        "text",
        "font",
        "font_scale",
        "text_thickness",
        "cv2",
        "rectangle",
        "img_result",
        "x",
        "y",
        "text_height",
        "x",
        "text_width",
        "y",
        "OUTER_COLOR",
        "cv2",
        "rectangle",
        "img_result",
        "x",
        "y",
        "text_height",
        "x",
        "text_width",
        "y",
        "INNER_COLOR",
        "cv2",
        "putText",
        "img_result",
        "text",
        "x",
        "y",
        "font",
        "font_scale",
        "text_thickness",
        "img_result",
        "app",
        "post",
        "file",
        "UploadFile",
        "File",
        "file",
        "read",
        "np",
        "frombuffer",
        "contents",
        "np",
        "uint8",
        "cv2",
        "imdecode",
        "nparr",
        "cv2",
        "IMREAD_COLOR",
        "img",
        "JSONResponse",
        "status_code",
        "content",
        "RetinaFace",
        "detect_faces",
        "img",
        "isinstance",
        "faces",
        "face_key",
        "faces",
        "faces",
        "face_key",
        "face_data",
        "face_data",
        "face_data",
        "face_data",
        "face_data",
        "face_data",
        "face_list",
        "append",
        "facial_area",
        "face_data",
        "face_data",
        "draw_detections",
        "img",
        "face_list",
        "datetime",
        "now",
        "strftime",
        "timestamp",
        "os",
        "path",
        "join",
        "OUTPUT_DIR",
        "output_filename",
        "cv2",
        "imwrite",
        "output_path",
        "img_result",
        "success",
        "output_path",
        "len",
        "face_list",
        "face",
        "face",
        "get",
        "face",
        "face_list",
        "output_path",
        "e",
        "e",
        "JSONResponse",
        "status_code",
        "content",
        "e",
        "app",
        "post",
        "file",
        "UploadFile",
        "File",
        "file",
        "read",
        "np",
        "frombuffer",
        "contents",
        "np",
        "uint8",
        "cv2",
        "imdecode",
        "nparr",
        "cv2",
        "IMREAD_COLOR",
        "img",
        "JSONResponse",
        "status_code",
        "content",
        "RetinaFace",
        "detect_faces",
        "img",
        "isinstance",
        "faces",
        "face_key",
        "faces",
        "faces",
        "face_key",
        "face_data",
        "face_data",
        "face_data",
        "face_data",
        "face_data",
        "face_data",
        "face_list",
        "append",
        "facial_area",
        "face_data",
        "face_data",
        "draw_detections",
        "img",
        "face_list",
        "cv2",
        "imencode",
        "img_result",
        "Response",
        "content",
        "img_encoded",
        "tobytes",
        "media_type",
        "headers",
        "len",
        "face_list",
        "face_list",
        "e",
        "e",
        "JSONResponse",
        "status_code",
        "content",
        "e",
        "uvicorn",
        "uvicorn",
        "run",
        "app",
        "host",
        "port"
    ],
    "literals": [
        "\"/Users/luolei/Desktop\"",
        "'facial_area'",
        "'x'",
        "'y'",
        "'w'",
        "'h'",
        "'score'",
        "'score'",
        "f\"{confidence:.2f}\"",
        "\"/detect/\"",
        "\"error\"",
        "\"Invalid image\"",
        "'x'",
        "'facial_area'",
        "'y'",
        "'facial_area'",
        "'w'",
        "'facial_area'",
        "'facial_area'",
        "'h'",
        "'facial_area'",
        "'facial_area'",
        "'facial_area'",
        "'score'",
        "'score'",
        "'score'",
        "\"%Y%m%d_%H%M%S\"",
        "f\"result_{timestamp}.jpg\"",
        "\"Failed to save the image\"",
        "f\"Successfully saved result to: {output_path}\"",
        "\"status\"",
        "\"success\"",
        "\"faces_detected\"",
        "\"faces\"",
        "\"position\"",
        "'facial_area'",
        "\"confidence\"",
        "'score'",
        "\"output_file\"",
        "f\"Error occurred: {str(e)}\"",
        "\"status\"",
        "\"error\"",
        "\"message\"",
        "\"/detect_and_return/\"",
        "\"error\"",
        "\"Invalid image\"",
        "'x'",
        "'facial_area'",
        "'y'",
        "'facial_area'",
        "'w'",
        "'facial_area'",
        "'facial_area'",
        "'h'",
        "'facial_area'",
        "'facial_area'",
        "'facial_area'",
        "'score'",
        "'score'",
        "'score'",
        "'.jpg'",
        "\"image/jpeg\"",
        "\"X-Faces-Detected\"",
        "\"X-Detection-Status\"",
        "\"success\"",
        "\"no_face\"",
        "f\"Error occurred: {str(e)}\"",
        "\"status\"",
        "\"error\"",
        "\"message\"",
        "\"__main__\"",
        "\"0.0.0.0\""
    ],
    "variables": [
        "app",
        "OUTPUT_DIR",
        "OUTER_COLOR",
        "INNER_COLOR",
        "OUTER_THICKNESS",
        "INNER_THICKNESS",
        "img_result",
        "facial_area",
        "x",
        "y",
        "w",
        "h",
        "confidence",
        "text",
        "font",
        "font_scale",
        "text_thickness",
        "baseline",
        "contents",
        "nparr",
        "img",
        "faces",
        "face_list",
        "face_data",
        "facial_area",
        "img_result",
        "timestamp",
        "output_filename",
        "output_path",
        "success",
        "contents",
        "nparr",
        "img",
        "faces",
        "face_list",
        "face_data",
        "facial_area",
        "img_result",
        "_",
        "img_encoded"
    ],
    "comments": [
        "创建输出目录",
        "定义颜色和边框设置",
        "外层边框使用白色",
        "内层边框使用橙色",
        "外层边框粗细",
        "内层边框粗细",
        "获取人脸框坐标",
        "先画外层白色边框",
        "再画内层橙色边框",
        "如果有置信度分数，显示它",
        "添加置信度文本",
        "获取文本大小",
        "绘制文本背景（使用同样的双层效果）",
        "外层白色背景",
        "内层橙色背景",
        "绘制文本",
        "白色文字",
        "读取图片",
        "使用 RetinaFace 进行人脸检测",
        "转换检测结果格式",
        "检测到人脸",
        "在图片上绘制检测结果",
        "保存结果图像",
        "读取图片",
        "使用 RetinaFace 进行人脸检测",
        "转换检测结果格式",
        "检测到人脸",
        "在图片上绘制检测结果",
        "将图片编码为JPEG格式",
        "返回处理后的图片"
    ],
    "docstrings": [
        "\"\"\"在图片上绘制检测结果\"\"\""
    ],
    "functions": [
        "draw_detections",
        "detect",
        "detect_and_return"
    ],
    "classes": []
}