{
    "identifiers": [
        "Base64String",
        "ChartConfigsTableName",
        "DbInsertChartConfig",
        "DbRawChartConfig",
        "GrapherInterface",
        "R2GrapherConfigDirectory",
        "serializeChartConfig",
        "uuidv7",
        "db",
        "saveGrapherConfigToR2",
        "saveGrapherConfigToR2ByUUID",
        "retrieveChartConfigFromDbAndSaveToR2",
        "knex",
        "db",
        "chartConfigId",
        "r2Path",
        "knex",
        "ChartConfigsTableName",
        "chartConfigId",
        "fullConfigMd5",
        "chartConfigId",
        "r2Path",
        "saveGrapherConfigToR2ByUUID",
        "chartConfigId",
        "fullConfigMd5",
        "fullConfigMd5",
        "saveGrapherConfigToR2",
        "fullConfigMd5",
        "r2Path",
        "r2Path",
        "fullConfigMd5",
        "fullConfigMd5",
        "fullConfigMd5",
        "updateChartConfigInDbAndR2",
        "knex",
        "db",
        "chartConfigId",
        "patchConfig",
        "fullConfig",
        "knex",
        "ChartConfigsTableName",
        "serializeChartConfig",
        "patchConfig",
        "serializeChartConfig",
        "fullConfig",
        "chartConfigId",
        "retrieveChartConfigFromDbAndSaveToR2",
        "knex",
        "chartConfigId",
        "saveNewChartConfigInDbAndR2",
        "knex",
        "db",
        "chartConfigId",
        "patchConfig",
        "fullConfig",
        "chartConfigId",
        "chartConfigId",
        "uuidv7",
        "knex",
        "ChartConfigsTableName",
        "chartConfigId",
        "serializeChartConfig",
        "patchConfig",
        "serializeChartConfig",
        "fullConfig",
        "retrieveChartConfigFromDbAndSaveToR2",
        "knex",
        "chartConfigId"
    ],
    "literals": [
        "\"@ourworldindata/types\"",
        "\"uuidv7\"",
        "\"../db/db.js\"",
        "\"./chartConfigR2Helpers.js\"",
        "string",
        "\"full\"",
        "\"fullMd5\"",
        "\"full\"",
        "\"fullMd5\"",
        "Chart config not found in the database! id=${chartConfigId}"
    ],
    "variables": [
        "retrieveChartConfigFromDbAndSaveToR2",
        "fullConfigMd5",
        "updateChartConfigInDbAndR2",
        "saveNewChartConfigInDbAndR2"
    ],
    "comments": [
        "We need to get the full config and the md5 hash from the database instead of",
        "computing our own md5 hash because MySQL normalizes JSON and our",
        "client computed md5 would be different from the ones computed by and stored in R2",
        "It's not updated automatically in the DB."
    ],
    "docstrings": [
        "* One particular detail of of MySQL's JSON support is that MySQL _normalizes_ JSON when storing it.\n * This means that the JSON string representation of a JSON object stored in MySQL is not equivalent\n * to the input of an INSERT statement: it may have different whitespace and key order.\n * This is a problem when we compute MD5 hashes of JSON objects using computed MySQL columns - in\n * order to get the correct hash, we need to first store the JSON object in MySQL and then retrieve\n * it and its hash again from MySQL immediately afterwards, such that we can store the exact same\n * JSON representation and hash in R2 also.\n * The below is a helper function that does just this.\n * - @marcelgerber, 2024-11-20"
    ],
    "functions": [],
    "classes": []
}