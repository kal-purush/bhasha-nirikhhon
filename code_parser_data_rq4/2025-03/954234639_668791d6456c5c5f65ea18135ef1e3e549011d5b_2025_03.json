{
    "identifiers": [
        "fastapi",
        "APIRouter",
        "HTTPException",
        "Response",
        "Query",
        "Backend",
        "firebase_config",
        "client",
        "google",
        "cloud",
        "bigquery",
        "io",
        "BytesIO",
        "openpyxl",
        "Workbook",
        "openpyxl",
        "utils",
        "dataframe",
        "dataframe_to_rows",
        "openpyxl",
        "drawing",
        "image",
        "Image",
        "XLImage",
        "pandas",
        "pd",
        "matplotlib",
        "pyplot",
        "plt",
        "APIRouter",
        "prefix",
        "tags",
        "stats_router",
        "get",
        "client",
        "query",
        "query",
        "result",
        "row",
        "store_name",
        "row",
        "total_bonuri",
        "row",
        "total_cheltuit",
        "row",
        "result",
        "e",
        "HTTPException",
        "status_code",
        "detail",
        "e",
        "stats_router",
        "get",
        "client",
        "query",
        "query",
        "result",
        "row",
        "operation",
        "row",
        "count",
        "row",
        "results",
        "e",
        "HTTPException",
        "status_code",
        "detail",
        "e",
        "stats_router",
        "get",
        "client",
        "query",
        "query",
        "result",
        "row",
        "user_uid",
        "row",
        "total_spent",
        "row",
        "results",
        "rows",
        "e",
        "HTTPException",
        "status_code",
        "detail",
        "e",
        "stats_router",
        "get",
        "client",
        "query",
        "query",
        "result",
        "row",
        "items",
        "row",
        "results",
        "rows",
        "e",
        "HTTPException",
        "status_code",
        "detail",
        "e",
        "stats_router",
        "get",
        "uid",
        "Query",
        "description",
        "bigquery",
        "QueryJobConfig",
        "query_parameters",
        "bigquery",
        "ScalarQueryParameter",
        "uid",
        "client",
        "query",
        "query",
        "job_config",
        "job_config",
        "job",
        "result",
        "results",
        "rows",
        "HTTPException",
        "status_code",
        "detail",
        "pd",
        "DataFrame",
        "r",
        "items",
        "r",
        "rows",
        "pd",
        "to_datetime",
        "df",
        "df",
        "sum",
        "df",
        "value_counts",
        "reset_index",
        "plt",
        "figure",
        "figsize",
        "plt",
        "bar",
        "top_stores",
        "top_stores",
        "plt",
        "xticks",
        "rotation",
        "ha",
        "plt",
        "title",
        "plt",
        "tight_layout",
        "BytesIO",
        "plt",
        "savefig",
        "img_buffer",
        "format",
        "img_buffer",
        "seek",
        "Workbook",
        "wb",
        "active",
        "r",
        "dataframe_to_rows",
        "df",
        "index",
        "header",
        "ws_bonuri",
        "append",
        "r",
        "row",
        "ws_bonuri",
        "iter_rows",
        "min_row",
        "min_col",
        "max_col",
        "cell",
        "row",
        "wb",
        "create_sheet",
        "title",
        "ws_stats",
        "append",
        "round",
        "total_spent",
        "ws_stats",
        "append",
        "ws_stats",
        "append",
        "index",
        "row",
        "top_stores",
        "iterrows",
        "ws_stats",
        "append",
        "row",
        "row",
        "XLImage",
        "img_buffer",
        "ws_stats",
        "add_image",
        "img",
        "BytesIO",
        "wb",
        "save",
        "excel_buffer",
        "excel_buffer",
        "seek",
        "excel_buffer",
        "getvalue",
        "uid",
        "filename",
        "Response",
        "content",
        "excel_bytes",
        "media_type",
        "headers",
        "headers"
    ],
    "literals": [
        "\"/api/v1/stats\"",
        "\"Statistics\"",
        "\"/top-stores\"",
        "\"store_name\"",
        "\"bonuri\"",
        "\"total_cheltuit\"",
        "f\"Eroare BigQuery: {e}\"",
        "\"/distributia-operatiilor-crud\"",
        "\"operation\"",
        "\"count\"",
        "f\"Eroare BigQuery: {e}\"",
        "\"/users-spendings\"",
        "\"user_uid\"",
        "\"total_spent\"",
        "f\"Eroare BigQuery: {e}\"",
        "\"/change-log-info\"",
        "f\"Eroare BigQuery: {e}\"",
        "\"/export-excel\"",
        "\"UID-ul utilizatorului\"",
        "\"uid\"",
        "\"STRING\"",
        "\"Nu s-au gÄƒsit bonuri pentru acest utilizator.\"",
        "\"date\"",
        "\"date\"",
        "\"total_amount\"",
        "\"store_name\"",
        "\"store_name\"",
        "\"num_receipts\"",
        "\"store_name\"",
        "\"num_receipts\"",
        "'right'",
        "\"Cele mai frecventate magazine\"",
        "'png'",
        "\"Bonuri\"",
        "\"DD-MM-YYYY\"",
        "\"Statistici\"",
        "\"Total cheltuit (RON)\"",
        "\"Top magazine\"",
        "\"Nr. bonuri\"",
        "\"store_name\"",
        "\"num_receipts\"",
        "\"E2\"",
        "f\"raport_{uid}.xlsx\"",
        "\"Content-Disposition\"",
        "f\"attachment; filename={filename}\"",
        "\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\""
    ],
    "variables": [
        "stats_router",
        "query",
        "result",
        "query",
        "results",
        "query",
        "results",
        "rows",
        "query",
        "results",
        "rows",
        "query",
        "job_config",
        "job",
        "results",
        "rows",
        "df",
        "df",
        "total_spent",
        "top_stores",
        "top_stores",
        "columns",
        "img_buffer",
        "wb",
        "ws_bonuri",
        "ws_bonuri",
        "title",
        "cell",
        "number_format",
        "ws_stats",
        "img",
        "excel_buffer",
        "excel_bytes",
        "filename",
        "headers"
    ],
    "comments": [],
    "docstrings": [
        "\"\"\"\n        SELECT\n          JSON_VALUE(data, '$.store_name') AS store_name,\n          COUNT(*) AS total_bonuri,\n          SUM(CAST(JSON_VALUE(data, '$.total_amount') AS FLOAT64)) AS total_cheltuit\n        FROM `receipt-tracking-application.receipts_info.receipts_raw_latest`\n        GROUP BY store_name\n        ORDER BY total_cheltuit DESC\n        LIMIT 5\n    \"\"\"",
        "\"\"\"\n    SELECT \n      operation,\n      COUNT(*) AS count\n    FROM `receipt-tracking-application.receipts_info.receipts_raw_changelog`\n    GROUP BY operation\n    ORDER BY count DESC\n    \"\"\"",
        "\"\"\"\n    SELECT \n      JSON_VALUE(data, '$.user_uid') AS user_uid,\n      SUM(CAST(JSON_VALUE(data, '$.total_amount') AS FLOAT64)) AS total_spent\n    FROM `receipt-tracking-application.receipts_info.receipts_raw_latest`\n    GROUP BY user_uid\n    ORDER BY total_spent DESC\n    \"\"\"",
        "\"\"\"\n    SELECT *\n    FROM `receipt-tracking-application.receipts_info.receipts_raw_changelog`\n    ORDER BY timestamp DESC\n    \"\"\"",
        "\"\"\"\n    SELECT\n      JSON_VALUE(data, '$.store_name') AS store_name,\n      CAST(JSON_VALUE(data, '$.total_amount') AS FLOAT64) AS total_amount,\n      JSON_VALUE(data, '$.date') AS date\n    FROM `receipt-tracking-application.receipts_info.receipts_raw_latest`\n    WHERE JSON_VALUE(data, '$.user_uid') = @uid\n    ORDER BY date DESC\n    \"\"\""
    ],
    "functions": [
        "get_top_stores",
        "get_operation_counts",
        "get_top_users",
        "get_change_log",
        "export_excel_for_user"
    ],
    "classes": []
}