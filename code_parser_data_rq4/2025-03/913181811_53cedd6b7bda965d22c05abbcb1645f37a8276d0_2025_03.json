{
    "identifiers": [
        "Injectable",
        "Logger",
        "fs",
        "path",
        "ConfigService",
        "Injectable",
        "Logger",
        "VideoChunksService",
        "configService",
        "path",
        "process",
        "fs",
        "error",
        "error",
        "fs",
        "fileId",
        "chunkIndex",
        "totalChunks",
        "chunkBuffer",
        "path",
        "fileId",
        "fs",
        "chunkDir",
        "error",
        "error",
        "fs",
        "chunkDir",
        "fileId",
        "path",
        "chunkDir",
        "chunkIndex",
        "fs",
        "chunkPath",
        "chunkBuffer",
        "chunkIndex",
        "totalChunks",
        "fileId",
        "error",
        "chunkIndex",
        "fileId",
        "error",
        "chunkIndex",
        "fileId",
        "error",
        "fileId",
        "totalChunks",
        "path",
        "fileId",
        "totalChunks",
        "fileId",
        "i",
        "totalChunks",
        "i",
        "path",
        "chunkDir",
        "i",
        "fs",
        "chunkPath",
        "error",
        "error",
        "i",
        "fileId",
        "i",
        "totalChunks",
        "i",
        "path",
        "chunkDir",
        "i",
        "fs",
        "chunkPath",
        "buffers",
        "chunkBuffer",
        "i",
        "chunkBuffer",
        "Buffer",
        "buffers",
        "totalChunks",
        "fileId",
        "combinedBuffer",
        "fileId",
        "err",
        "fileId",
        "err",
        "combinedBuffer",
        "error",
        "fileId",
        "error",
        "error",
        "fileId",
        "path",
        "fileId",
        "fileId",
        "fs",
        "chunkDir",
        "file",
        "files",
        "fs",
        "path",
        "chunkDir",
        "file",
        "fs",
        "chunkDir",
        "fileId",
        "error",
        "fileId",
        "error",
        "fileId",
        "totalChunks",
        "path",
        "fileId",
        "fs",
        "chunkDir",
        "fs",
        "chunkDir",
        "files",
        "filename",
        "parseInt",
        "filename",
        "index",
        "isNaN",
        "index",
        "index",
        "index",
        "totalChunks",
        "i",
        "totalChunks",
        "i",
        "uploadedChunks",
        "i",
        "missingChunks",
        "i",
        "uploadedChunks",
        "totalChunks",
        "uploadedChunks",
        "totalChunks",
        "missingChunks",
        "missingChunks",
        "error",
        "error",
        "fileId",
        "totalChunks",
        "totalChunks",
        "_",
        "i",
        "i",
        "olderThanHours",
        "fs",
        "olderThanHours",
        "entry",
        "entries",
        "entry",
        "path",
        "entry",
        "fs",
        "dirPath",
        "stats",
        "cutoffTime",
        "entry",
        "entry",
        "olderThanHours",
        "error",
        "error"
    ],
    "literals": [
        "'@nestjs/common'",
        "'fs'",
        "'path'",
        "'@nestjs/config'",
        "string",
        "'temp'",
        "Using existing temp directory at ${this.tempDir}",
        "Created temp directory at ${this.tempDir}",
        "string",
        "Created directory for file ${fileId}",
        "${chunkIndex}",
        "Saved chunk ${chunkIndex + 1}/${totalChunks} for ${fileId}",
        "Error saving chunk ${chunkIndex} for ${fileId}",
        "Failed to save chunk ${chunkIndex} for ${fileId}: ${error.message}",
        "string",
        "Combining ${totalChunks} chunks for ${fileId}",
        "${i}",
        "Missing chunk ${i} for file ${fileId}",
        "${i}",
        "Added chunk ${i} (${chunkBuffer.length} bytes) to combined buffer",
        "Successfully combined ${totalChunks} chunks for ${fileId}, total size: ${combinedBuffer.length} bytes",
        "Failed to cleanup chunks for ${fileId}",
        "Error combining chunks for ${fileId}",
        "string",
        "Cleaning up chunks for ${fileId}",
        "Successfully cleaned up all chunks for ${fileId}",
        "Error cleaning up chunks for ${fileId}",
        "string",
        "No chunks found for ${fileId}",
        "Cleaning up incomplete upload: ${entry.name}",
        "Finished cleanup of incomplete uploads older than ${olderThanHours} hours",
        "'Error during cleanup of incomplete uploads'"
    ],
    "variables": [
        "chunkDir",
        "chunkPath",
        "chunkDir",
        "buffers",
        "i",
        "chunkPath",
        "i",
        "chunkPath",
        "chunkBuffer",
        "combinedBuffer",
        "chunkDir",
        "files",
        "chunkDir",
        "files",
        "uploadedChunks",
        "missingChunks",
        "i",
        "complete",
        "entries",
        "cutoffTime",
        "dirPath",
        "stats"
    ],
    "comments": [
        "Configure a temp directory for chunks",
        "First, verify that all chunks exist",
        "Then read and combine them",
        "Clean up chunks in the background",
        "Delete each chunk file",
        "Remove the directory",
        "Don't rethrow this error since cleanup is non-critical",
        "Determine which chunks are present",
        "Determine which chunks are missing",
        "Directory doesn't exist, so no chunks uploaded yet"
    ],
    "docstrings": [],
    "functions": [
        "ensureTempDirExists",
        "saveChunk",
        "combineChunks",
        "cleanupChunks",
        "getUploadStatus",
        "cleanupIncompleteUploads"
    ],
    "classes": [
        "VideoChunksService"
    ]
}