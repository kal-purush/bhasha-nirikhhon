{
    "identifiers": [
        "pandas",
        "pd",
        "requests",
        "json",
        "datetime",
        "sqlalchemy",
        "db",
        "keyring",
        "pymysql",
        "requests",
        "get",
        "response_api",
        "text",
        "json",
        "loads",
        "data",
        "pd",
        "json_normalize",
        "parse_json",
        "df",
        "max",
        "df",
        "apply",
        "x",
        "datetime",
        "datetime",
        "fromtimestamp",
        "x",
        "strftime",
        "axis",
        "df",
        "rename",
        "columns",
        "inplace",
        "df",
        "drop",
        "columns",
        "inplace",
        "df",
        "df_final",
        "to_csv",
        "index",
        "load_table",
        "main",
        "os",
        "os",
        "getcwd",
        "format",
        "cwd",
        "re",
        "re",
        "sub",
        "datetime",
        "datetime",
        "fromtimestamp",
        "s_time",
        "strftime"
    ],
    "literals": [
        "'Getting data'",
        "\"https://services1.arcgis.com/xeMpV7tU1t4KD3Ei/arcgis/rest/services/BC_COVID19_Dashboard_Case_Details_Production/FeatureServer/0/query?where=1%3D1&outFields=*&outSR=4326&f=json\"",
        "'Got the data! Now cleaning..'",
        "'features'",
        "'attributes.Reported_Date'",
        "\"Reported_Date\"",
        "'attributes.Reported_Date'",
        "'%Y-%m-%d %H:%M:%S'",
        "'attributes.HA'",
        "'HA'",
        "'attributes.Sex'",
        "'Sex'",
        "'attributes.Age_Group'",
        "'Age_Group'",
        "'attributes.ObjectId'",
        "'ObjectId'",
        "'attributes.Reported_Date'",
        "'Reported_Date'",
        "'HA'",
        "'Sex'",
        "'Age_Group'",
        "'ObjectId'",
        "'./data/B.C._COVID-19_-_Case_Details.csv'",
        "'Done loading! Ready to be used in the reports.'",
        "\"__main__\"",
        "\"Current working directory: {0}\"",
        "'\\D'",
        "''",
        "'/Date(1585810800000)/'",
        "'%Y-%m-%d %H:%M:%S'"
    ],
    "variables": [
        "response_api",
        "data",
        "parse_json",
        "df",
        "df",
        "df_final",
        "cwd",
        "s_time"
    ],
    "comments": [
        "Author : Ria Thomas",
        "Description : The script is to get the British Columbia Covid cases data for the Tableau Dashboard. Also to clean and transform it as required.",
        "Source : https://resources-covid19canada.hub.arcgis.com/pages/open-data",
        "engine_dest = db.create_engine('mysql+pymysql://root:'+keyring.get_password('mysql_db', 'root')+'@localhost/db_dash?host=localhost?port=3306')",
        "table_name = 'bc_covid_data'",
        "query = 'SELECT * from db_dash.bc_covid_data'",
        "data_db = pd.read_sql(query, engine_dest)",
        "print('All done! Getting ready to load it to the table')",
        "conn = engine_dest.connect()",
        "conn.execute(\"TRUNCATE TABLE \" + table_name)",
        "df.to_sql(table_name, con=engine_dest, if_exists='append', index = False)",
        "Print the current working directory"
    ],
    "docstrings": [],
    "functions": [
        "load_table",
        "main"
    ],
    "classes": []
}