{
    "identifiers": [
        "Azure",
        "Storage",
        "Blobs",
        "Azure",
        "Storage",
        "Blobs",
        "Models",
        "Azure",
        "Storage",
        "Sas",
        "Collections",
        "Generic",
        "IO",
        "Linq",
        "Threading",
        "Tasks",
        "Microsoft",
        "Azure",
        "Devices",
        "Samples",
        "TimeSpan",
        "FromSeconds",
        "IReadOnlyList",
        "JobStatus",
        "JobStatus",
        "Completed",
        "JobStatus",
        "Failed",
        "JobStatus",
        "Cancelled",
        "RegistryManager",
        "rm",
        "BlobContainerClient",
        "sc",
        "deleteDevicesWithPrefix",
        "_registryManager",
        "rm",
        "ArgumentNullException",
        "nameof",
        "rm",
        "_blobContainerClient",
        "sc",
        "ArgumentNullException",
        "nameof",
        "sc",
        "_deleteDevicesWithPrefix",
        "deleteDevicesWithPrefix",
        "PrintDeviceCountAsync",
        "CleanupDevices",
        "WriteLine",
        "_blobContainerClient",
        "Name",
        "GetStorageAccountSasUriForCleanupJob",
        "_blobContainerClient",
        "ToString",
        "JobProperties",
        "CreateForExportJob",
        "outputBlobContainerUri",
        "storageAccountSasUri",
        "excludeKeysInExport",
        "storageAuthenticationType",
        "StorageAuthenticationType",
        "KeyBased",
        "_registryManager",
        "ExportDevicesAsync",
        "exportAllDevicesProperties",
        "exportAllDevicesJob",
        "_registryManager",
        "GetJobAsync",
        "exportAllDevicesJob",
        "JobId",
        "s_completedJobs",
        "Contains",
        "exportAllDevicesJob",
        "Status",
        "WriteLine",
        "exportAllDevicesJob",
        "JobId",
        "exportAllDevicesJob",
        "Status",
        "exportAllDevicesJob",
        "Progress",
        "Delay",
        "s_waitDuration",
        "WriteLine",
        "exportAllDevicesJob",
        "JobId",
        "exportAllDevicesJob",
        "Status",
        "exportAllDevicesJob",
        "Status",
        "JobStatus",
        "Completed",
        "_blobContainerClient",
        "GetBlobClient",
        "ImportExportDevicesFileName",
        "blobClient",
        "DownloadAsync",
        "ExportImportDevice",
        "ImportExportDevicesHelpers",
        "BuildExportImportDeviceFromStream",
        "download",
        "Content",
        "ExportImportDevice",
        "device",
        "exportedDevices",
        "device",
        "Id",
        "prefix",
        "_deleteDevicesWithPrefix",
        "deviceId",
        "StartsWith",
        "prefix",
        "StringComparison",
        "OrdinalIgnoreCase",
        "devicesToBeDeleted",
        "Add",
        "device",
        "devicesToBeDeleted",
        "ForEach",
        "device",
        "ImportMode",
        "ImportMode",
        "Delete",
        "WriteLine",
        "devicesToBeDeleted",
        "Count",
        "devicesToBeDeleted",
        "Count",
        "ImportExportDevicesHelpers",
        "BuildDevicesStream",
        "devicesToBeDeleted",
        "blobClient",
        "UploadAsync",
        "devicesFile",
        "overwrite",
        "JobProperties",
        "CreateForImportJob",
        "inputBlobContainerUri",
        "storageAccountSasUri",
        "outputBlobContainerUri",
        "storageAccountSasUri",
        "storageAuthenticationType",
        "StorageAuthenticationType",
        "KeyBased",
        "_registryManager",
        "ImportDevicesAsync",
        "importDevicesToBeDeletedProperties",
        "importDevicesToBeDeletedJob",
        "_registryManager",
        "GetJobAsync",
        "importDevicesToBeDeletedJob",
        "JobId",
        "s_completedJobs",
        "Contains",
        "importDevicesToBeDeletedJob",
        "Status",
        "WriteLine",
        "importDevicesToBeDeletedJob",
        "JobId",
        "importDevicesToBeDeletedJob",
        "Status",
        "importDevicesToBeDeletedJob",
        "Progress",
        "Delay",
        "s_waitDuration",
        "WriteLine",
        "importDevicesToBeDeletedJob",
        "JobId",
        "importDevicesToBeDeletedJob",
        "Status",
        "_blobContainerClient",
        "DeleteAsync",
        "WriteLine",
        "_blobContainerClient",
        "Name",
        "_registryManager",
        "CreateQuery",
        "countSqlQuery",
        "countQuery",
        "HasMoreResults",
        "countQuery",
        "GetNextAsJsonAsync",
        "WriteLine",
        "result",
        "First",
        "BlobContainerClient",
        "blobContainerClient",
        "BlobContainerSasPermissions",
        "Write",
        "BlobContainerSasPermissions",
        "Read",
        "BlobContainerSasPermissions",
        "Delete",
        "BlobSasBuilder",
        "sasPermissions",
        "DateTimeOffset",
        "UtcNow",
        "AddHours",
        "BlobContainerName",
        "blobContainerClient",
        "Name",
        "blobContainerClient",
        "GenerateSasUri",
        "sasBuilder"
    ],
    "literals": [
        "\"devices.txt\"",
        "\"Exporting devices failed, exiting.\"",
        "\"SELECT COUNT() AS numberOfDevices FROM devices\""
    ],
    "variables": [
        "ImportExportDevicesFileName",
        "TimeSpan",
        "s_waitDuration",
        "s_completedJobs",
        "RegistryManager",
        "_registryManager",
        "BlobContainerClient",
        "_blobContainerClient",
        "_deleteDevicesWithPrefix",
        "storageAccountSasUri",
        "JobProperties",
        "exportAllDevicesProperties",
        "JobProperties",
        "exportAllDevicesJob",
        "BlobClient",
        "blobClient",
        "BlobDownloadInfo",
        "download",
        "exportedDevices",
        "devicesToBeDeleted",
        "deviceId",
        "Stream",
        "devicesFile",
        "JobProperties",
        "importDevicesToBeDeletedProperties",
        "JobProperties",
        "importDevicesToBeDeletedJob",
        "countSqlQuery",
        "IQuery",
        "countQuery",
        "result",
        "BlobContainerSasPermissions",
        "sasPermissions",
        "BlobSasBuilder",
        "sasBuilder"
    ],
    "comments": [
        "Copyright (c) Microsoft. All rights reserved.",
        "Licensed under the MIT license. See LICENSE file in the project root for full license information.",
        "This class leverages the import and export IoT hub device identities feature to export all registered device identities,",
        "filter out the devices that should not be deleted, and execute bulk deletion using <see cref=\"ImportMode.Delete\"/>.",
        "For more details, see <see href=\"https://docs.microsoft.com/en-us/azure/iot-hub/iot-hub-bulk-identity-mgmt\"/>.",
        "</summary>",
        "Get the count of ALL devices registered to this hub instance.",
        "Filter the devices that should be deleted (based on their prefix) and delete them.",
        "Retrieve the SAS Uri that will be used to grant access to the storage containers.",
        "Step 1: Export all device identities.",
        "Wait until the export job is finished.",
        "Job has finished executing.",
        "Step 2: Download the exported devices list from the blob create in Step 1.",
        "Step 3: Collect the devices that need to be deleted and update their ImportMode to be Delete.",
        "Step 3a: Write the new import data back to the blob.",
        "Step 3b: Call import using the same blob to delete all devices.",
        "Wait until job is finished.",
        "Job has finished executing.",
        "Step 4: Delete the storage container created.",
        "We want to provide \"Read\", \"Write\" and \"Delete\" permissions to the storage container, so that it can",
        "create a blob, read it and subsequently delete it."
    ],
    "docstrings": [
        "<summary>"
    ],
    "functions": [
        "CleanupDevicesSample",
        "RunCleanUpAsync",
        "CleanupDevices",
        "PrintDeviceCountAsync",
        "Uri",
        "GetStorageAccountSasUriForCleanupJob"
    ],
    "classes": [
        "CleanupDevicesSample"
    ]
}